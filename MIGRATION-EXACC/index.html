<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migration UTL_FILE - Guide DBA</title>
    <style>
        :root {
            --primary: #0f9d58;
            --primary-dark: #0b7a45;
            --secondary: #1a73e8;
            --warning: #f9ab00;
            --danger: #ea4335;
            --dark: #202124;
            --gray: #5f6368;
            --light-gray: #f1f3f4;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light-gray);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: 40px 20px;
            text-align: center;
            position: relative;
        }

        .header-content {
            display: inline-block;
        }

        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .logout-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: var(--white);
            border: 1px solid rgba(255,255,255,0.4);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.6);
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        section {
            background: var(--white);
            margin: 20px 0;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
        }

        section h3 {
            color: var(--dark);
            margin: 20px 0 15px 0;
            font-size: 1.2rem;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .alert-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .alert-success {
            background: #e6f4ea;
            border-left: 4px solid var(--primary);
        }

        .alert-info {
            background: #e8f0fe;
            border-left: 4px solid var(--secondary);
        }

        .alert-warning {
            background: #fef7e0;
            border-left: 4px solid var(--warning);
        }

        .alert-danger {
            background: #fce8e6;
            border-left: 4px solid var(--danger);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95rem;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #e0e0e0;
        }

        th {
            background: var(--primary);
            color: var(--white);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: var(--light-gray);
        }

        tr:hover {
            background: #e8f0fe;
        }

        .code-container {
            position: relative;
            margin: 15px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .code-header {
            background: var(--dark);
            color: var(--white);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }

        .copy-btn {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: var(--primary-dark);
        }

        .copy-btn.copied {
            background: var(--secondary);
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            max-height: 400px;
        }

        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 15px;
            margin: 10px 0;
            background: var(--light-gray);
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .checklist li.done {
            background: #e6f4ea;
            border-left: 4px solid var(--primary);
        }

        .checklist li.pending {
            background: #fef7e0;
            border-left: 4px solid var(--warning);
        }

        .checklist li.blocked {
            background: #fce8e6;
            border-left: 4px solid var(--danger);
        }

        .check-box {
            width: 24px;
            height: 24px;
            border: 2px solid var(--gray);
            border-radius: 4px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .check-box.checked {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .step-number {
            background: var(--primary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .email-template {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: var(--white);
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
        }

        .card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .tag-toi {
            background: #e6f4ea;
            color: var(--primary);
        }

        .tag-admin {
            background: #e8f0fe;
            color: var(--secondary);
        }

        .tag-attente {
            background: #fef7e0;
            color: #b45309;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        footer {
            background: var(--dark);
            color: var(--white);
            padding: 20px;
            text-align: center;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.6rem;
            }
            section {
                padding: 15px;
            }
        }

        @media print {
            .copy-btn, .check-box {
                display: none;
            }
        }

        /* Navigation par onglets */
        .tabs-nav {
            display: flex;
            background: var(--dark);
            padding: 0;
            margin: 0;
            list-style: none;
            overflow-x: auto;
        }

        .tabs-nav li {
            flex: 0 0 auto;
        }

        .tabs-nav a {
            display: block;
            padding: 15px 25px;
            color: #ccc;
            text-decoration: none;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tabs-nav a:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .tabs-nav a.active {
            color: white;
            border-bottom-color: var(--primary);
            background: rgba(255,255,255,0.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ===== STYLES ONGLET SCRIPTS ===== */
        .scripts-container {
            display: flex;
            gap: 20px;
            min-height: 500px;
        }

        .scripts-list {
            width: 280px;
            flex-shrink: 0;
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .scripts-list h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1rem;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }

        .script-item {
            padding: 12px;
            margin: 5px 0;
            background: var(--light-gray);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .script-item:hover {
            background: #e8f0fe;
            border-left-color: var(--secondary);
        }

        .script-item.active {
            background: #e8f0fe;
            border-left-color: var(--primary);
        }

        .script-item .script-title {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--dark);
        }

        .script-item .script-desc {
            font-size: 0.75rem;
            color: var(--gray);
            margin-top: 4px;
        }

        .scripts-editor {
            flex: 1;
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            background: var(--dark);
            color: var(--white);
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-title-input {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.1rem;
            font-weight: 600;
            width: 300px;
        }

        .editor-title-input:focus {
            outline: none;
            border-bottom: 1px solid var(--primary);
        }

        .editor-actions {
            display: flex;
            gap: 10px;
        }

        .editor-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-save {
            background: var(--primary);
            color: white;
        }

        .btn-save:hover {
            background: var(--primary-dark);
        }

        .btn-copy {
            background: var(--secondary);
            color: white;
        }

        .btn-copy:hover {
            background: #1557b0;
        }

        .btn-delete {
            background: var(--danger);
            color: white;
        }

        .btn-delete:hover {
            background: #c62828;
        }

        .editor-textarea {
            flex: 1;
            width: 100%;
            padding: 20px;
            border: none;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            resize: none;
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 0 0 10px 10px;
        }

        .editor-textarea:focus {
            outline: none;
        }

        .editor-desc-input {
            width: 100%;
            padding: 10px 20px;
            border: none;
            border-bottom: 1px solid #e0e0e0;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .editor-desc-input:focus {
            outline: none;
            background: #f8f9fa;
        }

        .firebase-status {
            padding: 8px 15px;
            font-size: 0.8rem;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .status-connected {
            background: #e6f4ea;
            color: var(--primary);
        }

        .status-disconnected {
            background: #fce8e6;
            color: var(--danger);
        }

        .status-loading {
            background: #fef7e0;
            color: var(--warning);
        }

        .add-script-btn {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .add-script-btn:hover {
            background: var(--primary-dark);
        }

        /* ===== STYLES ONGLET CAPTURES ===== */
        .captures-container {
            display: flex;
            gap: 20px;
            min-height: 500px;
        }

        .captures-list {
            width: 300px;
            flex-shrink: 0;
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            max-height: 600px;
            overflow-y: auto;
        }

        .captures-list h3 {
            margin-bottom: 15px;
            color: var(--secondary);
            font-size: 1rem;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
        }

        .capture-item {
            padding: 10px;
            margin: 8px 0;
            background: var(--light-gray);
            border-radius: 6px;
            border-left: 3px solid transparent;
            transition: all 0.2s;
            cursor: pointer;
        }

        .capture-item:hover {
            background: #e8f0fe;
            border-left-color: var(--secondary);
        }

        .capture-item.active {
            background: #e8f0fe;
            border-left-color: var(--primary);
        }

        .capture-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 8px;
        }

        .capture-item .capture-name {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .capture-item .capture-date {
            font-size: 0.75rem;
            color: var(--gray);
            margin-top: 4px;
        }

        .capture-item .capture-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .capture-btn {
            flex: 1;
            padding: 5px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .capture-btn-view {
            background: var(--secondary);
            color: white;
        }

        .capture-btn-delete {
            background: var(--danger);
            color: white;
        }

        .captures-paste-zone {
            flex: 1;
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
        }

        .paste-header {
            background: var(--secondary);
            color: var(--white);
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
        }

        .paste-header h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .paste-zone {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            border: 3px dashed #ccc;
            margin: 20px;
            border-radius: 10px;
            background: #fafafa;
            transition: all 0.3s;
            min-height: 300px;
        }

        .paste-zone:focus {
            outline: none;
            border-color: var(--secondary);
            background: #e3f2fd;
        }

        .paste-zone.has-image {
            border-style: solid;
            border-color: var(--primary);
            background: white;
        }

        .paste-zone .paste-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .paste-zone .paste-text {
            font-size: 1.2rem;
            color: var(--dark);
            text-align: center;
            margin-bottom: 10px;
        }

        .paste-zone .paste-hint {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .paste-zone .paste-shortcut {
            display: inline-block;
            background: var(--dark);
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 1rem;
            margin-top: 15px;
        }

        .paste-preview {
            max-width: 100%;
            max-height: 350px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .paste-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .paste-action-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .paste-action-btn.save {
            background: var(--primary);
            color: white;
        }

        .paste-action-btn.save:hover {
            background: var(--primary-dark);
        }

        .paste-action-btn.clear {
            background: var(--gray);
            color: white;
        }

        .paste-action-btn.clear:hover {
            background: #424242;
        }

        .upload-status {
            margin-top: 15px;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            display: none;
        }

        .upload-status.success {
            display: block;
            background: #e8f5e9;
            color: var(--primary);
        }

        .upload-status.error {
            display: block;
            background: #ffebee;
            color: var(--danger);
        }

        .upload-status.info {
            display: block;
            background: #e3f2fd;
            color: #1565c0;
        }

        .upload-status.loading {
            display: block;
            background: #fff3e0;
            color: #e65100;
        }

        .storage-info {
            padding: 8px 15px;
            font-size: 0.8rem;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 15px;
        }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>

<header>
    <div class="header-content">
        <h1>üõ†Ô∏è Migration UTL_FILE vers ExaCC</h1>
        <p class="subtitle">Guide DBA - Focus sur ton p√©rim√®tre uniquement</p>
        <span class="badge">Tu g√®res la base ‚Ä¢ Les admins OCI g√®rent le cloud</span>
    </div>
    <button class="logout-btn" onclick="logout()" title="D√©connexion">üö™ D√©connexion</button>
</header>

<!-- Navigation par onglets -->
<nav>
    <ul class="tabs-nav">
        <li><a href="#guide" class="active" onclick="showTab('guide', this)">üìã Guide Migration</a></li>
        <li><a href="#postmigration" onclick="showTab('postmigration', this)">‚úÖ Post-Migration</a></li>
        <li><a href="#modesconnexion" onclick="showTab('modesconnexion', this)">üîå Modes Connexion</a></li>
        <li><a href="#jira" onclick="showTab('jira', this)">üé´ Tickets JIRA</a></li>
        <li><a href="#scripts" onclick="showTab('scripts', this)">üìú Scripts</a></li>
        <li><a href="#remediation" onclick="showTab('remediation', this)">üîß Rem√©diation PARNA</a></li>
        <!-- Masque temporairement - necessite Firebase Storage (plan Blaze)
        <li><a href="#captures" onclick="showTab('captures', this)">üì∑ Captures</a></li>
        -->
    </ul>
</nav>

<div class="container">

<!-- LIENS MAQUETTES COFAH -->
<section style="background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%); border: 2px solid #ff9800; margin-bottom: 20px;">
    <h2 style="color: #e65100;">Maquettes COFAH COMPTA</h2>
    <p style="margin: 10px 0;">
        <a href="maquette_cofah_compta.html" style="color: #1565c0; font-weight: bold; margin-right: 30px;">Rapport 1 : Liste des cas</a>
        <a href="maquette_cofah_rapport2.html" style="color: #1565c0; font-weight: bold;">Rapport 2 : Delais + Accordeon + Modal</a>
    </p>
</section>

<!-- ==================== ONGLET JIRA ==================== -->
<div id="jira" class="tab-content">

    <section style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border: 2px solid #2196f3; margin-top: 20px;">
        <h2>üé´ Tickets JIRA - Migration UTL_FILE vers ExaCC</h2>
        <p style="margin: 15px 0;">3 tickets pour structurer ton projet de migration : Audit ‚Üí Impl√©mentation ‚Üí Tests</p>
    </section>

    <!-- TICKET 1 : AUDIT -->
    <section>
        <h2>üìù Ticket 1 : Audit UTL_FILE</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üîç</span>
            <div>
                <strong>Type :</strong> Story<br>
                <strong>Epic :</strong> Migration ExaCC - Adaptation code PL/SQL<br>
                <strong>Assign√© √† :</strong> DBA
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Titre du ticket</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>[EXACC] Audit des utilisations UTL_FILE</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Description</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Contexte
Dans le cadre de la migration vers ExaCC (Exadata Cloud@Customer), le package UTL_FILE n'est plus disponible car l'acc√®s au filesystem du serveur est supprim√©.

Nous devons identifier toutes les utilisations de UTL_FILE pour planifier la migration vers DBMS_CLOUD + Object Storage.

## Objectif
R√©aliser un audit complet pour identifier et documenter tous les impacts avant migration.

## P√©rim√®tre
- Base de donn√©es : [NOM_BASE]
- Environnement : [PROD/PREPROD/DEV]

## T√¢ches
- [ ] Lister les sch√©mas utilisant UTL_FILE
- [ ] Compter les r√©f√©rences par sch√©ma
- [ ] Lister les objets impact√©s (packages, proc√©dures, fonctions)
- [ ] Identifier les fonctions UTL_FILE utilis√©es (FOPEN, PUT_LINE, GET_LINE, etc.)
- [ ] V√©rifier compatibilit√© avec le wrapper UTL_FILE_WRAPPER
- [ ] Lister les directories Oracle
- [ ] Contacter l'√©diteur si application tierce concern√©e
- [ ] Identifier les jobs Control-M concern√©s
- [ ] Identifier les fichiers volumineux (> 100 Mo)

## Livrables
- Rapport d'audit Excel/CSV avec :
  - Liste des sch√©mas impact√©s
  - Liste des objets par sch√©ma
  - Nombre de r√©f√©rences par objet
  - Liste des directories √† migrer
  - Liste des fonctions UTL_FILE utilis√©es
  - Liste des jobs Control-M impact√©s</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Crit√®res d'acceptation</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Crit√®res d'acceptation

### ‚úÖ DONE quand :

1. **Inventaire sch√©mas**
   - [ ] Tous les sch√©mas applicatifs ont √©t√© analys√©s
   - [ ] La liste des sch√©mas utilisant UTL_FILE est document√©e
   - [ ] Le nombre total de r√©f√©rences UTL_FILE est connu

2. **Inventaire objets**
   - [ ] Pour chaque sch√©ma, la liste des objets impact√©s est fournie
   - [ ] Le nombre de r√©f√©rences par objet est document√©

3. **Fonctions UTL_FILE**
   - [ ] La liste des fonctions UTL_FILE utilis√©es est fournie
   - [ ] La compatibilit√© avec le wrapper est v√©rifi√©e (toutes ‚úÖ OUI)

4. **Directories Oracle**
   - [ ] La liste des directories Oracle est fournie
   - [ ] La correspondance directory ‚Üí chemin physique est document√©e

5. **√âditeur (si applicable)**
   - [ ] L'√©diteur a √©t√© contact√©
   - [ ] La r√©ponse de l'√©diteur est document√©e

6. **Jobs Control-M**
   - [ ] Les jobs utilisant UTL_FILE sont identifi√©s
   - [ ] La liste est transmise √† l'√©quipe ordonnancement

7. **Fichiers volumineux**
   - [ ] Les fichiers > 100 Mo sont identifi√©s
   - [ ] Une strat√©gie est d√©finie pour ces fichiers

8. **Rapport d'audit**
   - [ ] Un fichier Excel/CSV r√©capitulatif est produit
   - [ ] Le rapport est stock√© dans [EMPLACEMENT]

### ‚ùå NOT DONE si :
- Des sch√©mas applicatifs n'ont pas √©t√© analys√©s
- Le rapport d'audit n'est pas produit
- La compatibilit√© des fonctions n'est pas v√©rifi√©e</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Labels sugg√©r√©s</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>migration, exacc, utl_file, audit, dba</code></pre>
        </div>
    </section>

    <!-- TICKET 2 : IMPLEMENTATION -->
    <section>
        <h2>üìù Ticket 2 : Impl√©mentation Migration UTL_FILE</h2>

        <div class="alert alert-success">
            <span class="alert-icon">üîß</span>
            <div>
                <strong>Type :</strong> Story<br>
                <strong>Assign√© √† :</strong> DBA<br>
                <strong>Pr√©requis :</strong> Ticket 1 (Audit) termin√© + Config OCI re√ßue des admins
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Titre du ticket</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>[EXACC] Impl√©mentation wrapper UTL_FILE et synonyme PUBLIC</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Description</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Contexte
Suite √† l'audit (ticket [LIEN_TICKET_1]), nous pouvons d√©ployer la solution de migration.

## Pr√©requis
- [ ] Ticket Audit termin√©
- [ ] Configuration OCI re√ßue des admins :
  - URI du bucket Object Storage
  - Nom du credential DBMS_CLOUD
  - ACL r√©seau confirm√©e
  - Dossiers cr√©√©s dans le bucket

## Solution technique
D√©ployer un package wrapper UTL_FILE_WRAPPER qui :
- Expose les m√™mes signatures que UTL_FILE
- Utilise DBMS_CLOUD en interne pour acc√©der √† Object Storage
- Utilise une table de mapping directory ‚Üí URI Object Storage

Cr√©er un synonyme PUBLIC UTL_FILE ‚Üí UTL_FILE_WRAPPER pour que le code existant fonctionne sans modification.

## T√¢ches
- [ ] Cr√©er la table de mapping UTL_FILE_DIRECTORY_MAPPING
- [ ] Ins√©rer les mappings (directory ‚Üí Object Storage)
- [ ] D√©ployer le package UTL_FILE_WRAPPER (spec + body)
- [ ] Cr√©er le synonyme PUBLIC UTL_FILE
- [ ] Recompiler les sch√©mas impact√©s
- [ ] V√©rifier aucun objet invalide
- [ ] Documenter la proc√©dure de rollback

## Environnement cible
- Base : [NOM_BASE]
- Sch√©mas impact√©s : [LISTE]

## Livrables
- Package UTL_FILE_WRAPPER d√©ploy√©
- Synonyme PUBLIC cr√©√©
- Documentation de rollback</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Crit√®res d'acceptation</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Crit√®res d'acceptation

### ‚úÖ DONE quand :

1. **Table de mapping**
   - [ ] La table UTL_FILE_DIRECTORY_MAPPING est cr√©√©e
   - [ ] Tous les directories identifi√©s dans l'audit sont mapp√©s
   - [ ] Les URI Object Storage sont correctes

2. **Package wrapper**
   - [ ] Le package UTL_FILE_WRAPPER est d√©ploy√©
   - [ ] Le statut est VALID
   - [ ] Le package utilise DBMS_CLOUD en interne

3. **Synonyme PUBLIC**
   - [ ] Le synonyme PUBLIC UTL_FILE pointe vers UTL_FILE_WRAPPER
   - [ ] Le synonyme est visible depuis tous les sch√©mas applicatifs

4. **Recompilation**
   - [ ] Tous les sch√©mas impact√©s sont recompil√©s
   - [ ] Aucun objet n'est en statut INVALID

5. **Rollback**
   - [ ] La proc√©dure de rollback est document√©e
   - [ ] Le script de rollback est test√© sur environnement de test

### ‚ùå NOT DONE si :
- Des objets sont en statut INVALID
- Le rollback n'est pas document√©</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Labels sugg√©r√©s</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>migration, exacc, utl_file, implementation, dba</code></pre>
        </div>
    </section>

    <!-- TICKET 3 : TESTS -->
    <section>
        <h2>üìù Ticket 3 : Tests et Validation</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Type :</strong> Story<br>
                <strong>Assign√© √† :</strong> DBA + QA<br>
                <strong>Pr√©requis :</strong> Ticket 2 (Impl√©mentation) termin√©
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Titre du ticket</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>[EXACC] Tests et validation migration UTL_FILE</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Description</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Contexte
Suite au d√©ploiement du wrapper (ticket [LIEN_TICKET_2]), nous devons valider le bon fonctionnement avant mise en production.

## Objectif
Valider que la migration fonctionne correctement et que le rollback est op√©rationnel.

## T√¢ches
- [ ] Test unitaire √©criture fichier
- [ ] Test unitaire lecture fichier
- [ ] Test avec chaque directory mapp√©
- [ ] V√©rifier fichiers dans Object Storage (console OCI)
- [ ] Test job Control-M (environnement de test)
- [ ] Test avec fichier volumineux (si applicable)
- [ ] Test de rollback (sur environnement de test)
- [ ] Validation avec √©quipe applicative
- [ ] Validation avec √©diteur (si applicable)

## Environnement de test
- Base : [NOM_BASE_TEST]
- Jobs Control-M : [LISTE_JOBS_TEST]

## Livrables
- PV de recette sign√©
- Rapport de tests</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Crit√®res d'acceptation</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Crit√®res d'acceptation

### ‚úÖ DONE quand :

1. **Tests unitaires**
   - [ ] Test √©criture fichier OK
   - [ ] Test lecture fichier OK
   - [ ] Fichiers visibles dans Object Storage

2. **Tests directories**
   - [ ] Chaque directory mapp√© a √©t√© test√©
   - [ ] Les fichiers sont cr√©√©s au bon emplacement

3. **Tests Control-M**
   - [ ] Au moins un job Control-M a √©t√© ex√©cut√© en test
   - [ ] Le job s'est termin√© avec succ√®s
   - [ ] Les fichiers g√©n√©r√©s sont corrects

4. **Test fichiers volumineux** (si applicable)
   - [ ] Un fichier > 100 Mo a √©t√© √©crit avec succ√®s
   - [ ] Le temps d'ex√©cution est acceptable

5. **Validation m√©tier**
   - [ ] L'√©quipe applicative a valid√© les tests
   - [ ] L'√©diteur a valid√© (si applicable)

6. **Documentation**
   - [ ] PV de recette sign√©
   - [ ] Rapport de tests produit

### ‚ùå NOT DONE si :
- Un test est en √©chec
- Le PV de recette n'est pas sign√©</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Labels sugg√©r√©s</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>migration, exacc, utl_file, tests, validation, qa</code></pre>
        </div>
    </section>

    <!-- TICKET 4 : ROLLBACK -->
    <section>
        <h2>üìù Ticket 4 : Rollback et Test Rollback</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">üîÑ</span>
            <div>
                <strong>Type :</strong> Story<br>
                <strong>Assign√© √† :</strong> DBA<br>
                <strong>Pr√©requis :</strong> Ticket 2 (Impl√©mentation) termin√©
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Titre du ticket</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>[EXACC] Rollback et Test Rollback migration UTL_FILE</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Description</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Contexte
En cas de probl√®me apr√®s la migration UTL_FILE vers ExaCC, nous devons pouvoir revenir √† l'√©tat initial (UTL_FILE natif Oracle).

Ce ticket couvre la documentation et le test de la proc√©dure de rollback.

## Objectif
- Documenter la proc√©dure de rollback compl√®te
- Tester le rollback sur environnement de test
- Valider le retour √† UTL_FILE natif

## T√¢ches
- [ ] Documenter la proc√©dure de rollback √©tape par √©tape
- [ ] Cr√©er le script de rollback complet
- [ ] Ex√©cuter le rollback sur environnement de test
- [ ] V√©rifier suppression du synonyme PUBLIC UTL_FILE
- [ ] V√©rifier suppression du package UTL_FILE_WRAPPER
- [ ] V√©rifier suppression de la table de mapping
- [ ] Recompiler les sch√©mas impact√©s
- [ ] V√©rifier aucun objet invalide apr√®s rollback
- [ ] Tester UTL_FILE natif apr√®s rollback
- [ ] Documenter les r√©sultats du test

## Script de rollback
Le script doit :
1. Supprimer le synonyme PUBLIC UTL_FILE
2. Supprimer le package UTL_FILE_WRAPPER
3. Supprimer la table UTL_FILE_DIRECTORY_MAPPING
4. Recompiler tous les sch√©mas impact√©s
5. V√©rifier qu'il n'y a pas d'objets invalides

## Environnement de test
- Base : [NOM_BASE_TEST]

## Livrables
- Documentation proc√©dure de rollback
- Script de rollback test√© et valid√©
- Rapport de test rollback</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Crit√®res d'acceptation</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Crit√®res d'acceptation

### ‚úÖ DONE quand :

1. **Documentation**
   - [ ] La proc√©dure de rollback est document√©e √©tape par √©tape
   - [ ] Le script de rollback est versionn√©

2. **Test rollback ex√©cut√©**
   - [ ] Le rollback a √©t√© ex√©cut√© sur environnement de test
   - [ ] Le synonyme PUBLIC UTL_FILE est supprim√©
   - [ ] Le package UTL_FILE_WRAPPER est supprim√©
   - [ ] La table de mapping est supprim√©e

3. **Recompilation**
   - [ ] Tous les sch√©mas impact√©s sont recompil√©s
   - [ ] Aucun objet n'est en statut INVALID

4. **Test UTL_FILE natif**
   - [ ] Apr√®s rollback, UTL_FILE natif (SYS.UTL_FILE) fonctionne
   - [ ] Un test √©criture/lecture fichier est OK

5. **Rapport**
   - [ ] Le rapport de test rollback est produit
   - [ ] Les r√©sultats sont document√©s

### ‚ùå NOT DONE si :
- Le rollback n'a pas √©t√© test√© sur environnement de test
- Des objets sont invalides apr√®s rollback
- UTL_FILE natif ne fonctionne pas apr√®s rollback</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Labels sugg√©r√©s</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>migration, exacc, utl_file, rollback, dba</code></pre>
        </div>
    </section>

    <!-- TICKET 5 : Audit Jobs Control-M -->
    <section style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border: 2px solid #ff9800;">
        <h2>üé´ Ticket 5 : Audit Jobs Control-M - Scripts SQL</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>AUDIT PR√â-MIGRATION</strong><br>
                Ce ticket concerne l'audit des jobs Control-M AVANT migration ExaCC pour identifier les impacts UTL_FILE.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Titre du ticket</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>[AUDIT] Jobs Control-M - Analyse scripts SQL et impacts UTL_FILE</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Description</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>## Contexte

Dans le cadre de la pr√©paration √† la migration vers Oracle ExaCC, il est n√©cessaire
d'auditer les jobs Control-M qui ex√©cutent des scripts SQL sur les serveurs applicatifs,
afin d'identifier les impacts potentiels li√©s √† l'utilisation d'UTL_FILE.

## Objectif

Recenser tous les jobs Control-M qui :
1. Appellent des scripts sur le serveur applicatif
2. Ex√©cutent des traitements SQL/PL-SQL en base de donn√©es
3. Utilisent directement ou indirectement UTL_FILE

## P√©rim√®tre

### Jobs √† auditer :
- Jobs d√©clenchant des scripts shell (.sh, .ksh)
- Jobs appelant SQL*Plus, SQL*Loader ou Pro*C
- Jobs ordonnan√ßant des proc√©dures PL/SQL

### Serveurs concern√©s :
- Serveurs applicatifs avec scripts SQL
- Cha√Ænes de connexion vers les bases Oracle actuelles

## Livrables attendus

1. **Inventaire des jobs Control-M**
   - Nom du job
   - Serveur d'ex√©cution
   - Script appel√©
   - Base de donn√©es cible

2. **Analyse des scripts SQL**
   - Scripts utilisant UTL_FILE (lecture/√©criture fichiers)
   - Chemins de r√©pertoires utilis√©s
   - DIRECTORY Oracle r√©f√©renc√©s

3. **Matrice d'impact**
   - Jobs impact√©s par la migration UTL_FILE
   - Niveau de criticit√© (Haute/Moyenne/Basse)
   - Actions de rem√©diation requises

## Architecture concern√©e

<code>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CONTROL-M     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ SERVEUR APPLI   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    DATABASE     ‚îÇ
‚îÇ   (Scheduler)   ‚îÇ     ‚îÇ  (Scripts SQL)  ‚îÇ     ‚îÇ    (Oracle)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                       ‚îÇ                       ‚îÇ
        ‚îÇ                       ‚îÇ                       ‚îÇ
        ‚ñº                       ‚ñº                       ‚ñº
   D√©clenchement          Ex√©cution              UTL_FILE
   des jobs               SQL*Plus              (Lecture/√âcriture)
                          SQL*Loader
                          Pro*C
</code>

## Points de contr√¥le

### Analyse Control-M :
- [ ] Export de la liste des jobs vers les serveurs applicatifs
- [ ] Identification des jobs avec scripts SQL
- [ ] Mapping jobs ‚Üí scripts ‚Üí bases de donn√©es

### Analyse Scripts SQL :
- [ ] Grep sur les scripts pour "UTL_FILE"
- [ ] Identification des appels FOPEN, PUT_LINE, GET_LINE
- [ ] Liste des DIRECTORY Oracle utilis√©s

### Documentation :
- [ ] Inventaire complet produit
- [ ] Matrice d'impact compl√©t√©e
- [ ] Priorisation des rem√©diations d√©finie</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Crit√®res d'acceptation (Definition of Done)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>### ‚úÖ DONE si :

1. **Inventaire Control-M**
   - [ ] Liste exhaustive des jobs appelant des scripts SQL
   - [ ] Mapping job ‚Üí serveur ‚Üí script ‚Üí base
   - [ ] Export valid√© par l'√©quipe infra

2. **Analyse UTL_FILE**
   - [ ] Tous les scripts contenant UTL_FILE sont identifi√©s
   - [ ] Les DIRECTORY Oracle utilis√©s sont list√©s
   - [ ] Les chemins de fichiers sont document√©s

3. **Matrice d'impact**
   - [ ] Chaque job impact√© est classifi√© (criticit√©)
   - [ ] Les actions de rem√©diation sont d√©finies
   - [ ] Les d√©pendances entre jobs sont identifi√©es

4. **Documentation**
   - [ ] Le rapport d'audit est produit
   - [ ] La matrice d'impact est partag√©e avec l'√©quipe projet

### ‚ùå NOT DONE si :
- L'inventaire des jobs est incomplet
- Des scripts SQL n'ont pas √©t√© analys√©s
- La matrice d'impact n'est pas produite</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Script d'analyse - Recherche UTL_FILE dans les scripts</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>#!/bin/bash
# Script d'audit UTL_FILE dans les scripts SQL
# Usage: ./audit_utl_file.sh /chemin/scripts

SCRIPTS_DIR="${1:-.}"
OUTPUT_FILE="audit_utl_file_$(date +%Y%m%d_%H%M%S).csv"

echo "Script,Ligne,Occurrence" > "$OUTPUT_FILE"

find "$SCRIPTS_DIR" -type f \( -name "*.sql" -o -name "*.pls" -o -name "*.pkb" -o -name "*.pks" \) | while read script; do
    grep -n -i "UTL_FILE" "$script" 2>/dev/null | while read match; do
        line_num=$(echo "$match" | cut -d: -f1)
        content=$(echo "$match" | cut -d: -f2-)
        echo "\"$script\",$line_num,\"$content\"" >> "$OUTPUT_FILE"
    done
done

echo "Audit termin√©. R√©sultat: $OUTPUT_FILE"
echo "Nombre de scripts avec UTL_FILE: $(tail -n +2 "$OUTPUT_FILE" | cut -d, -f1 | sort -u | wc -l)"</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>JIRA - Labels sugg√©r√©s</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>audit, control-m, utl_file, pre-migration, infra, sql-scripts</code></pre>
        </div>
    </section>

    <!-- RECAPITULATIF -->
    <section style="background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); border: 2px solid #9c27b0;">
        <h2>üìä R√©capitulatif des tickets</h2>

        <table>
            <thead>
                <tr>
                    <th>N¬∞</th>
                    <th>Ticket</th>
                    <th>Type</th>
                    <th>Assign√© √†</th>
                    <th>D√©pendance</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Audit UTL_FILE</td>
                    <td>Story</td>
                    <td>DBA</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Impl√©mentation Migration</td>
                    <td>Story</td>
                    <td>DBA</td>
                    <td>Ticket 1 + Config OCI</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Tests et Validation</td>
                    <td>Story</td>
                    <td>DBA + QA</td>
                    <td>Ticket 2</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Rollback et Test Rollback</td>
                    <td>Story</td>
                    <td>DBA</td>
                    <td>Ticket 2</td>
                </tr>
                <tr style="background-color: #fff3e0;">
                    <td>5</td>
                    <td>Audit Jobs Control-M</td>
                    <td>Story</td>
                    <td>Infra + DBA</td>
                    <td>-</td>
                </tr>
            </tbody>
        </table>

        <div class="alert alert-info" style="margin-top: 20px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Notes :</strong><br>
                - Le ticket "Configuration OCI" pour les admins cloud peut √™tre cr√©√© s√©par√©ment. Il est pr√©requis du Ticket 2.<br>
                - Les tickets 3 et 4 peuvent √™tre ex√©cut√©s en parall√®le apr√®s le ticket 2.<br>
                - <strong>Le Ticket 5 (Audit Control-M)</strong> est un audit PR√â-migration qui peut √™tre ex√©cut√© en parall√®le du Ticket 1.
            </div>
        </div>
    </section>

</div>
<!-- ==================== FIN ONGLET JIRA ==================== -->

<!-- ==================== ONGLET GUIDE ==================== -->
<div id="guide" class="tab-content active">

    <!-- Info Multi-Sch√©mas -->
    <section style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border: 2px solid #4caf50;">
        <h2>üéØ Important : Migration Multi-Sch√©mas</h2>

        <div class="alert alert-success">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Connecte-toi √† chaque sch√©ma applicatif dans SQL Developer</strong><br>
                Les scripts utilisent <code>user_source</code> qui affiche automatiquement le code du sch√©ma connect√©. Pas besoin de modifier les scripts !
            </div>
        </div>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Ne migre que tes sch√©mas applicatifs !</strong><br>
                Les sch√©mas syst√®me Oracle (<code>SYS</code>, <code>SYSTEM</code>, <code>XDB</code>, etc.) sont g√©r√©s automatiquement par Oracle lors de la migration vers ExaCC. Tu ne dois jamais les modifier.
            </div>
        </div>

        <h3>üìã Proc√©dure pour chaque sch√©ma applicatif</h3>
        <div style="background: white; border-radius: 10px; padding: 20px; margin: 15px 0;">
            <ol style="padding-left: 20px; margin: 15px 0;">
                <li style="margin: 10px 0;"><strong>Dans SQL Developer :</strong> Cr√©e une connexion pour ton sch√©ma applicatif (ou utilise une existante)</li>
                <li style="margin: 10px 0;"><strong>Connecte-toi</strong> √† ce sch√©ma</li>
                <li style="margin: 10px 0;"><strong>Ex√©cute l'audit</strong> (le script utilise <code>user_source</code> = ton sch√©ma connect√©)</li>
                <li style="margin: 10px 0;"><strong>Note les r√©sultats</strong></li>
                <li style="margin: 10px 0;"><strong>R√©p√®te</strong> pour chaque sch√©ma applicatif</li>
            </ol>
        </div>

        <h3>üîç Script d'audit UTL_FILE (sch√©ma connect√©)</h3>
        <div class="alert alert-info">
            <span class="alert-icon">‚ö°</span>
            <div>
                <strong>Ex√©cute ce script dans SQL Developer</strong><br>
                Il analyse automatiquement le sch√©ma sur lequel tu es connect√©. Pas besoin de modifier le script !
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Audit UTL_FILE du sch√©ma connect√©</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- AUDIT UTL_FILE - SCH√âMA CONNECT√â
-- ============================================
-- Ex√©cute ce script connect√© √† ton sch√©ma applicatif dans SQL Developer
-- user_source = code source du sch√©ma sur lequel tu es connect√©

-- 1. Afficher le sch√©ma courant
SELECT USER AS schema_courant FROM DUAL;


-- 2. Nombre total de r√©f√©rences UTL_FILE dans ce sch√©ma
SELECT COUNT(*) AS total_references_utl_file
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%';


-- 3. D√©tail : quels objets utilisent UTL_FILE ?
SELECT
    name AS object_name,
    type AS object_type,
    COUNT(*) AS nb_lignes
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
GROUP BY name, type
ORDER BY nb_lignes DESC;


-- 4. Voir le code exact (lignes contenant UTL_FILE) avec Directory utilis√©
-- Fonctions UTL_FILE avec directory en param√®tre : FOPEN, FOPEN_NCHAR, FREMOVE, FCOPY, FRENAME, FGETATTR
SELECT
    name AS object_name,
    type AS object_type,
    line AS numero_ligne,
    -- Extraction du directory (1er param√®tre des fonctions UTL_FILE qui utilisent un directory)
    NVL(
        -- Directory en cha√Æne litt√©rale 'DIR_NAME'
        REGEXP_SUBSTR(text, 'UTL_FILE\.(FOPEN|FOPEN_NCHAR|FREMOVE|FCOPY|FRENAME|FGETATTR)\s*\(\s*''([^'']+)''', 1, 1, 'i', 2),
        -- Directory en variable PL/SQL
        REGEXP_SUBSTR(text, 'UTL_FILE\.(FOPEN|FOPEN_NCHAR|FREMOVE|FCOPY|FRENAME|FGETATTR)\s*\(\s*([A-Za-z_][A-Za-z0-9_]*)', 1, 1, 'i', 2)
    ) AS directory_utilise,
    text AS code
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
ORDER BY name, type, line;


-- ============================================
-- 5. LISTER TOUTES LES FONCTIONS/CONSTANTES UTL_FILE UTILIS√âES
-- ============================================
-- Cette requ√™te liste TOUTES les fonctions et constantes UTL_FILE
-- utilis√©es dans ton code (sans filtre, pour ne rien omettre)

COLUMN fonction_utl_file FORMAT A40
COLUMN nb_utilisations FORMAT 9999

SELECT
    REGEXP_SUBSTR(UPPER(text), 'UTL_FILE\.[A-Z_]+') AS fonction_utl_file,
    COUNT(*) AS nb_utilisations
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE.%'
GROUP BY REGEXP_SUBSTR(UPPER(text), 'UTL_FILE\.[A-Z_]+')
ORDER BY nb_utilisations DESC;

-- Fonctions support√©es par le wrapper :
-- ‚úÖ FOPEN, FCLOSE, FCLOSE_ALL, PUT_LINE, PUT, GET_LINE, NEW_LINE
-- ‚úÖ FFLUSH, IS_OPEN, PUT_RAW, GET_RAW, FGETATTR, FCOPY, FRENAME, FREMOVE
-- ‚úÖ Exceptions : INVALID_PATH, INVALID_MODE, INVALID_FILEHANDLE, etc.
-- ‚ùå Non support√©es : FSEEK, FGETPOS, PUTF


-- ============================================
-- 6. INVESTIGUER UNE FONCTION UTL_FILE INCONNUE
-- ============================================
-- Si tu vois une fonction UTL_FILE que tu ne connais pas dans la liste,
-- utilise cette requ√™te pour voir o√π elle est utilis√©e dans le code
-- Remplace 'FILE_OPEN' par la fonction √† investiguer

SELECT
    name AS object_name,
    type AS object_type,
    line AS numero_ligne,
    text AS code
FROM user_source
WHERE UPPER(text) LIKE '%FILE_OPEN%'
ORDER BY name, type, line;</code></pre>
        </div>

        <h3>üìä Connexion SYSDBA : Identifier les sch√©mas √† migrer</h3>
        <div class="alert alert-info">
            <span class="alert-icon">üîë</span>
            <div>
                <strong>Connect√© en SYSDBA ?</strong><br>
                Utilise ces commandes pour identifier rapidement tous les sch√©mas qui utilisent UTL_FILE.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Lister tous les sch√©mas utilisant UTL_FILE (SYSDBA)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- LISTER LES SCH√âMAS UTILISANT UTL_FILE
-- ============================================
-- Ex√©cute connect√© en SYSDBA (sqlplus / as sysdba)

-- Formatage pour affichage lisible dans SQL*Plus
SET LINESIZE 200
SET PAGESIZE 100
COLUMN schema_name FORMAT A30
COLUMN nb_references FORMAT 999999

-- 1. Liste simple des sch√©mas
SELECT DISTINCT owner AS schema_name
FROM dba_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
ORDER BY owner;


-- 2. Avec le nombre de r√©f√©rences par sch√©ma
SELECT owner AS schema_name, COUNT(*) AS nb_references
FROM dba_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
GROUP BY owner
ORDER BY nb_references DESC;</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Lister tous les sch√©mas de la base (SYSDBA)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Formatage pour affichage lisible dans SQL*Plus
SET LINESIZE 200
SET PAGESIZE 100
COLUMN username FORMAT A30

-- Lister tous les sch√©mas (utilisateurs) de la base
SELECT username FROM dba_users ORDER BY username;

-- Lister uniquement les sch√©mas applicatifs (sans sch√©mas syst√®me)
SELECT username
FROM dba_users
WHERE username NOT IN (
    'SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS', 'CTXSYS', 'MDSYS',
    'OLAPSYS', 'ORDDATA', 'ORDSYS', 'OUTLN', 'DBSNMP', 'APPQOSSYS',
    'DBSFWUSER', 'GGSYS', 'ANONYMOUS', 'AUDSYS', 'DIP', 'DVF', 'DVSYS',
    'GSMADMIN_INTERNAL', 'GSMCATUSER', 'GSMUSER', 'LBACSYS', 'OJVMSYS',
    'REMOTE_SCHEDULER_AGENT', 'SYS$UMF', 'SYSBACKUP', 'SYSDG', 'SYSKM', 'SYSRAC'
)
  AND username NOT LIKE 'APEX%'
  AND username NOT LIKE 'FLOWS_%'
  AND username NOT LIKE 'OWA%'
  AND account_status = 'OPEN'
ORDER BY username;</code></pre>
        </div>
    </section>

    <!-- R√©partition des r√¥les -->
    <section>
        <h2>üë• R√©partition des R√¥les</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Bonne nouvelle !</strong><br>
                Tu n'as pas besoin de g√©rer les API Keys, les buckets ou les policies OCI. Les admins cloud s'en occupent.
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>T√¢che</th>
                    <th>Qui ?</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cr√©er le bucket Object Storage</td>
                    <td><span class="tag tag-admin">Admin OCI</span></td>
                    <td>√Ä demander</td>
                </tr>
                <tr>
                    <td>G√©n√©rer les API Keys</td>
                    <td><span class="tag tag-admin">Admin OCI</span></td>
                    <td>√Ä demander</td>
                </tr>
                <tr>
                    <td>Configurer les IAM Policies</td>
                    <td><span class="tag tag-admin">Admin OCI</span></td>
                    <td>√Ä demander</td>
                </tr>
                <tr>
                    <td>Cr√©er le credential DBMS_CLOUD en base</td>
                    <td><span class="tag tag-admin">Admin OCI</span> ou <span class="tag tag-toi">Toi</span></td>
                    <td>√Ä clarifier</td>
                </tr>
                <tr>
                    <td>Configurer les ACL r√©seau</td>
                    <td><span class="tag tag-admin">Admin OCI</span></td>
                    <td>√Ä demander</td>
                </tr>
                <tr style="background: #e6f4ea;">
                    <td><strong>Audit du code UTL_FILE</strong></td>
                    <td><span class="tag tag-toi">Toi (DBA)</span></td>
                    <td>√Ä faire maintenant</td>
                </tr>
                <tr style="background: #e6f4ea;">
                    <td><strong>Cr√©er la table de mapping</strong></td>
                    <td><span class="tag tag-toi">Toi (DBA)</span></td>
                    <td>Apr√®s retour admins</td>
                </tr>
                <tr style="background: #e6f4ea;">
                    <td><strong>D√©ployer le package wrapper</strong></td>
                    <td><span class="tag tag-toi">Toi (DBA)</span></td>
                    <td>Apr√®s retour admins</td>
                </tr>
                <tr style="background: #e6f4ea;">
                    <td><strong>Remplacer UTL_FILE dans le code</strong></td>
                    <td><span class="tag tag-toi">Toi (DBA)</span></td>
                    <td>Apr√®s wrapper</td>
                </tr>
                <tr style="background: #e6f4ea;">
                    <td><strong>Tests de validation</strong></td>
                    <td><span class="tag tag-toi">Toi (DBA)</span></td>
                    <td>Final</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Email aux admins -->
    <section>
        <h2>üìß Email √† envoyer aux Admins OCI</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üì®</span>
            <div>
                <strong>Premi√®re √©tape</strong><br>
                Envoie cet email aux admins OCI pour obtenir les informations n√©cessaires.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Email - Demande aux admins OCI</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>Objet : [Migration ExaCC] Demande configuration Object Storage pour remplacement UTL_FILE

Bonjour,

Dans le cadre de la migration vers ExaCC, nous devons remplacer les appels
UTL_FILE par DBMS_CLOUD + Object Storage car l'acc√®s au filesystem local
n'est plus disponible sur ExaCC.

Apr√®s audit, nous avons identifi√© plus de 1000 utilisations de UTL_FILE
dans notre base de donn√©es.

Pourriez-vous nous fournir les √©l√©ments suivants :

1. URI DU BUCKET OBJECT STORAGE
   Format attendu :
   https://objectstorage.[region].oraclecloud.com/n/[namespace]/b/[bucket]/o/

   Exemple : https://objectstorage.eu-paris-1.oraclecloud.com/n/monnamespace/b/db-files/o/

2. NOM DU CREDENTIAL DBMS_CLOUD
   Le credential doit √™tre cr√©√© dans la base de donn√©es pour permettre
   l'authentification vers Object Storage.

   Question : Ce credential est-il d√©j√† cr√©√© ? Si oui, quel est son nom ?
   Sinon, pouvez-vous le cr√©er ou me fournir les informations (API Key)
   pour que je le cr√©e ?

3. CONFIRMATION DES ACL R√âSEAU
   La base doit pouvoir acc√©der √† *.oraclecloud.com sur le port 443 (HTTPS).
   Pouvez-vous confirmer que c'est configur√© ?

4. DOSSIERS (PREFIXES) √Ä CR√âER DANS LE BUCKET
   Voici la liste des directories Oracle actuels √† migrer :

   [LISTE √Ä COMPL√âTER APR√àS AUDIT - voir ci-dessous]

Merci de me tenir inform√© d√®s que ces √©l√©ments seront disponibles.

Cordialement,
[Ton nom]</code></pre>
        </div>

        <h3>üìã Liste des directories √† inclure dans l'email</h3>
        <p>Ex√©cute d'abord l'audit pour obtenir la liste :</p>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Lister les directories utilis√©s par UTL_FILE</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Lister les directories applicatifs (hors directories syst√®me Oracle)
SELECT directory_name, directory_path
FROM all_directories
WHERE directory_name NOT LIKE 'ORACLE%'
  AND directory_name NOT LIKE 'OPATCH%'
  AND directory_name NOT LIKE 'DATA_PUMP%'
  AND directory_name NOT LIKE 'DBMS_%'
  AND directory_name NOT LIKE 'XDB%'
  AND directory_name NOT LIKE 'XML%'
  AND directory_name NOT LIKE 'XSD%'
  AND directory_name NOT LIKE 'JAVA$%'
  AND directory_name NOT LIKE 'ADMIN%'
ORDER BY directory_name;</code></pre>
        </div>
    </section>

    <!-- √âtape 1.5 : Identifier les directories -->
    <section>
        <h2>üìÅ √âtape 1.5 : Identifier les Dossiers √† Cr√©er dans Object Storage</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Principe important</strong><br>
                Les dossiers (prefixes) √† cr√©er dans le bucket Object Storage sont <strong>les m√™mes noms</strong> que tes directories Oracle actuels. Ainsi, ton code n'a pas besoin de changer !
            </div>
        </div>

        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #2196f3;">
            <h3 style="margin-top: 0; color: #1565c0;">üîÑ Correspondance Directory Oracle ‚Üí Dossier Object Storage</h3>
            <table style="width: 100%; margin: 15px 0; background: white; border-radius: 10px;">
                <thead>
                    <tr>
                        <th style="background: #1565c0; color: white; padding: 12px;">Avant (On-Premise)</th>
                        <th style="background: #1565c0; color: white; padding: 12px;">Apr√®s (Object Storage)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            <code>UTL_FILE.FOPEN('<strong>DATA_EXPORT</strong>', 'fichier.txt')</code><br>
                            <small style="color: #666;">Directory ‚Üí /u01/app/data/</small>
                        </td>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            Fichier stock√© dans : <code>bucket/<strong>DATA_EXPORT</strong>/fichier.txt</code>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            <code>UTL_FILE.FOPEN('<strong>LOG_DIR</strong>', 'batch.log')</code><br>
                            <small style="color: #666;">Directory ‚Üí /u01/app/logs/</small>
                        </td>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            Fichier stock√© dans : <code>bucket/<strong>LOG_DIR</strong>/batch.log</code>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            <code>UTL_FILE.FOPEN('<strong>REPORTS</strong>', 'rapport.pdf')</code><br>
                            <small style="color: #666;">Directory ‚Üí /u01/app/reports/</small>
                        </td>
                        <td style="padding: 12px; border: 1px solid #ddd;">
                            Fichier stock√© dans : <code>bucket/<strong>REPORTS</strong>/rapport.pdf</code>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p style="margin: 0; text-align: center; font-style: italic; color: #1565c0;">
                <strong>Le nom du directory Oracle devient le nom du dossier dans le bucket !</strong>
            </p>
        </div>

        <h3>üîç Script : Lister les directories √† migrer</h3>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Lister tous les directories applicatifs</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- LISTER TOUS LES DIRECTORIES ORACLE
-- ============================================
-- Formatage pour affichage lisible
SET LINESIZE 200
SET PAGESIZE 100
COLUMN directory_name FORMAT A30
COLUMN directory_path FORMAT A60

-- Liste les directories applicatifs (hors directories syst√®me Oracle)
SELECT
    directory_name,
    directory_path
FROM all_directories
WHERE directory_name NOT LIKE 'ORACLE%'
  AND directory_name NOT LIKE 'OPATCH%'
  AND directory_name NOT LIKE 'DATA_PUMP%'
  AND directory_name NOT LIKE 'DBMS_%'
  AND directory_name NOT LIKE 'XDB%'
  AND directory_name NOT LIKE 'XML%'
  AND directory_name NOT LIKE 'XSD%'
  AND directory_name NOT LIKE 'JAVA$%'
  AND directory_name NOT LIKE 'ADMIN%'
ORDER BY directory_name;</code></pre>
        </div>

        <div class="alert alert-info">
            <span class="alert-icon">üìã</span>
            <div>
                <strong>√âtape suivante</strong><br>
                Avec cette liste, valide avec l'√©quipe applicative quels directories sont r√©ellement utilis√©s par les traitements UTL_FILE.<br>
                Ces directories deviendront les dossiers (prefixes) √† cr√©er dans le bucket Object Storage.
            </div>
        </div>

        <h3>üìß Mod√®le d'email √† envoyer √† un √©diteur de logiciel</h3>

        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Quand utiliser ce mail ?</strong><br>
                Si tu utilises une application tierce (√©diteur) qui partage ta base de donn√©es, envoie ce mail pour v√©rifier la compatibilit√©.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Email - V√©rification compatibilit√© √©diteur</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>Objet : Migration Oracle ExaCC - V√©rification compatibilit√© de votre application

Bonjour,

Dans le cadre de la modernisation de notre infrastructure, nous allons migrer notre base de donn√©es Oracle vers Oracle Exadata Cloud@Customer (ExaCC).

CHANGEMENT TECHNIQUE MAJEUR :

Sur ExaCC, l'acc√®s direct au syst√®me de fichiers du serveur de base de donn√©es est supprim√©. Concr√®tement, le package Oracle UTL_FILE (utilis√© pour lire/√©crire des fichiers c√¥t√© serveur BDD) n'est plus disponible.

IMPACT POTENTIEL :

Si votre application utilise UTL_FILE avec des directories Oracle standards (ex: UTL_FILE.FOPEN('NOM_DIRECTORY', 'fichier.csv', 'W')), il n'y a pas d'impact. Notre wrapper de migration prend en charge ces appels de mani√®re transparente.

Nous avons besoin de conna√Ætre les directories Oracle utilis√©s par votre application afin de les inclure dans notre table de mapping.

DIRECTORIES ORACLE EXISTANTS :

Voici la liste des directories Oracle actuellement configur√©s sur notre base :

   - DIR_EXPORT      ‚Üí /u01/app/oracle/exports/
   - DIR_LOGS        ‚Üí /u01/app/oracle/logs/
   - DIR_INTERFACE   ‚Üí /u01/app/oracle/interface/
   [Adapter selon le r√©sultat de votre requ√™te all_directories]

NOTRE DEMANDE :

Parmi ces directories, lesquels sont utilis√©s par votre application ?

Si votre application utilise UTL_FILE, merci de nous indiquer :
- Les fonctionnalit√©s concern√©es (exports, interfaces, logs...)
- Les directories utilis√©s parmi la liste ci-dessus
- Ou les chemins physiques si cod√©s en dur dans votre code
- Si vous disposez d'une version compatible Cloud/ExaCC

Nous restons disponibles pour en discuter.

Cordialement,
[Votre nom]</code></pre>
        </div>

        <h3>üìß Exemple de liste √† envoyer aux admins OCI</h3>

        <div style="background: #f8f9fa; border: 2px dashed #6c757d; border-radius: 10px; padding: 20px; margin: 20px 0; font-family: 'Courier New', monospace;">
            <p style="margin: 0 0 15px 0; font-weight: bold; color: #495057;">Dossiers (prefixes) √† cr√©er dans le bucket Object Storage :</p>
            <pre style="background: transparent; margin: 0; padding: 0; color: #212529;">
   - DATA_EXPORT/
   - LOG_DIR/
   - REPORTS/
   - BACKUP_DIR/
   - INTERFACE_IN/
   - INTERFACE_OUT/
   [Adapter selon le r√©sultat de ton audit]</pre>
        </div>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>R√©sultat attendu</strong><br>
                Apr√®s cr√©ation par les admins OCI, le bucket aura cette structure :
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; margin-top: 10px;">
mon-bucket/
‚îú‚îÄ‚îÄ DATA_EXPORT/
‚îÇ   ‚îî‚îÄ‚îÄ (tes fichiers d'export iront ici)
‚îú‚îÄ‚îÄ LOG_DIR/
‚îÇ   ‚îî‚îÄ‚îÄ (tes logs iront ici)
‚îú‚îÄ‚îÄ REPORTS/
‚îÇ   ‚îî‚îÄ‚îÄ (tes rapports iront ici)
‚îî‚îÄ‚îÄ ...</pre>
            </div>
        </div>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Important</strong><br>
                Les noms des dossiers dans Object Storage doivent √™tre <strong>exactement identiques</strong> aux noms des directories Oracle (en majuscules g√©n√©ralement). Sinon la table de mapping ne fera pas la correspondance !
            </div>
        </div>

    </section>

    <!-- Ton plan d'action -->
    <section>
        <h2>üìã Ton Plan d'Action (5 √©tapes)</h2>

        <div class="progress-bar">
            <div class="progress-fill" style="width: 20%;" id="progress"></div>
        </div>
        <p style="text-align: center; color: var(--gray);">Progression : <span id="progress-text">√âtape 1/5</span></p>

        <ul class="checklist">
            <!-- √âTAPE 1 -->
            <li class="pending">
                <span class="step-number">1</span>
                <div>
                    <strong>Audit UTL_FILE</strong> <span class="tag tag-toi">√Ä faire maintenant</span><br>
                    <small>Identifier toutes les utilisations de UTL_FILE dans la base. Tu peux commencer sans attendre les admins OCI.</small>
                </div>
            </li>
        </ul>
        <div class="alert alert-info" style="margin: 0 0 20px 45px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi cette √©tape ?</strong><br>
                <p style="margin: 10px 0;">Imagine que tu d√©m√©nages d'une maison vers un appartement. Avant de commencer, tu dois <strong>inventorier tout ce que tu poss√®des</strong> pour savoir ce qui rentrera et ce qu'il faudra adapter.</p>
                <p style="margin: 10px 0;">C'est pareil ici : UTL_FILE c'est ton "ancienne m√©thode" pour lire/√©crire des fichiers sur le serveur. Sur ExaCC, cette m√©thode ne fonctionne plus. Tu dois donc <strong>lister tous les endroits du code</strong> o√π cette m√©thode est utilis√©e pour savoir exactement ce qu'il faudra modifier.</p>
                <p style="margin: 10px 0;"><strong>Analogie :</strong> C'est comme faire le tour de ta maison avec un carnet pour noter tous les meubles avant le d√©m√©nagement.</p>
            </div>
        </div>

        <ul class="checklist">
            <!-- √âTAPE 2 -->
            <li class="blocked">
                <span class="step-number">2</span>
                <div>
                    <strong>Envoyer l'email aux admins OCI</strong> <span class="tag tag-attente">Bloquant</span><br>
                    <small>Demander : URI bucket, nom du credential, confirmation ACL.</small>
                </div>
            </li>
        </ul>
        <div class="alert alert-info" style="margin: 0 0 20px 45px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi cette √©tape ?</strong><br>
                <p style="margin: 10px 0;">Tu as besoin de <strong>3 informations cl√©s</strong> que seuls les admins OCI peuvent te donner :</p>
                <ul style="margin: 10px 0 10px 20px;">
                    <li><strong>URI du bucket</strong> = l'adresse du nouveau "disque dur cloud" o√π seront stock√©s tes fichiers</li>
                    <li><strong>Credential</strong> = le "mot de passe" que la base utilisera pour acc√©der √† ce disque cloud</li>
                    <li><strong>ACL</strong> = l'autorisation r√©seau pour que ta base puisse communiquer avec le cloud</li>
                </ul>
                <p style="margin: 10px 0;"><strong>Analogie :</strong> C'est comme demander √† ton nouveau propri√©taire l'adresse exacte, les cl√©s et le code du digicode avant de d√©m√©nager.</p>
            </div>
        </div>

        <ul class="checklist">
            <!-- √âTAPE 3 -->
            <li class="blocked">
                <span class="step-number">3</span>
                <div>
                    <strong>Cr√©er la table de mapping</strong> <span class="tag tag-attente">Attente retour admins</span><br>
                    <small>Apr√®s r√©ception de l'URI du bucket, cr√©er la table de correspondance directory ‚Üí Object Storage.</small>
                </div>
            </li>
        </ul>
        <div class="alert alert-info" style="margin: 0 0 20px 45px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi cette √©tape ?</strong><br>
                <p style="margin: 10px 0;">Ton ancien code utilise des <strong>"directories Oracle"</strong> comme <code>DATA_EXPORT</code> ou <code>LOG_DIR</code>. Ce sont des raccourcis vers des dossiers sur le serveur (ex: <code>/u01/app/data</code>).</p>
                <p style="margin: 10px 0;">Sur ExaCC, ces dossiers n'existent plus. La table de mapping fait la <strong>traduction</strong> entre l'ancien chemin et le nouveau chemin cloud :</p>
                <table style="margin: 10px 0; font-size: 0.9rem;">
                    <tr><td style="padding: 5px 10px; background: #fce8e6;"><code>DATA_EXPORT</code></td><td style="padding: 5px;">‚Üí</td><td style="padding: 5px 10px; background: #e6f4ea;"><code>https://objectstorage.../DATA_EXPORT/</code></td></tr>
                    <tr><td style="padding: 5px 10px; background: #fce8e6;"><code>LOG_DIR</code></td><td style="padding: 5px;">‚Üí</td><td style="padding: 5px 10px; background: #e6f4ea;"><code>https://objectstorage.../LOG_DIR/</code></td></tr>
                </table>
                <p style="margin: 10px 0;"><strong>Analogie :</strong> C'est comme cr√©er un tableau de correspondance "ancienne adresse ‚Üí nouvelle adresse" pour faire suivre ton courrier apr√®s un d√©m√©nagement.</p>
            </div>
        </div>

        <ul class="checklist">
            <!-- √âTAPE 4 -->
            <li class="blocked">
                <span class="step-number">4</span>
                <div>
                    <strong>D√©ployer le package wrapper</strong> <span class="tag tag-attente">Attente retour admins</span><br>
                    <small>Installer UTL_FILE_WRAPPER qui utilise DBMS_CLOUD en arri√®re-plan.</small>
                </div>
            </li>
        </ul>
        <div class="alert alert-info" style="margin: 0 0 20px 45px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi cette √©tape ?</strong><br>
                <p style="margin: 10px 0;">Le <strong>wrapper</strong> est un "traducteur" intelligent. Il permet √† ton ancien code de continuer √† fonctionner <strong>sans le modifier</strong>.</p>
                <p style="margin: 10px 0;"><strong>Comment √ßa marche :</strong></p>
                <ul style="margin: 10px 0 10px 20px;">
                    <li>Ton code appelle <code>UTL_FILE.FOPEN('DATA_EXPORT', 'fichier.txt')</code> comme avant</li>
                    <li>Le wrapper intercepte cet appel</li>
                    <li>Il consulte la table de mapping pour trouver l'URL cloud correspondante</li>
                    <li>Il utilise <code>DBMS_CLOUD</code> pour envoyer le fichier vers Object Storage</li>
                    <li>Ton code ne voit aucune diff√©rence !</li>
                </ul>
                <p style="margin: 10px 0;"><strong>Analogie :</strong> C'est comme un adaptateur √©lectrique quand tu voyages. Ta prise fran√ßaise fonctionne toujours, l'adaptateur fait la conversion vers la prise √©trang√®re.</p>
            </div>
        </div>

        <ul class="checklist">
            <!-- √âTAPE 5 -->
            <li class="blocked">
                <span class="step-number">5</span>
                <div>
                    <strong>Cr√©er le synonyme et tester</strong> <span class="tag tag-attente">Apr√®s √©tape 4</span><br>
                    <small>Cr√©er le synonyme UTL_FILE ‚Üí UTL_FILE_WRAPPER et valider avec un test complet.</small>
                </div>
            </li>
        </ul>
        <div class="alert alert-info" style="margin: 0 0 20px 45px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi cette √©tape ?</strong><br>
                <p style="margin: 10px 0;">C'est le moment de <strong>brancher l'adaptateur</strong> avec le <strong>synonyme</strong> :</p>
                <ul style="margin: 10px 0 10px 20px;">
                    <li>Tu cr√©es un "alias" : quand le code dit <code>UTL_FILE</code>, Oracle comprend <code>UTL_FILE_WRAPPER</code></li>
                    <li>Avantage : <strong>z√©ro modification</strong> de ton code existant</li>
                    <li>Avec 1000+ utilisations, c'est la seule m√©thode viable et sans risque</li>
                </ul>
                <p style="margin: 10px 0;">Ensuite, tu <strong>testes</strong> que tout fonctionne : √©criture d'un fichier test, lecture, suppression. Si √ßa marche, la migration est termin√©e !</p>
                <p style="margin: 10px 0;"><strong>Analogie :</strong> C'est comme tester l'√©lectricit√© dans ton nouvel appartement apr√®s avoir tout branch√©.</p>
            </div>
        </div>

    </section>

    <!-- Architecture et Flux -->
    <section>
        <h2>üèóÔ∏è Comprendre l'Architecture : Avant / Apr√®s</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üìç</span>
            <div>
                <strong>Ton contexte : Migration On-Premise ‚Üí ExaCC</strong><br>
                Ta base de donn√©es est actuellement sur un serveur physique (On-Premise) et va √™tre migr√©e vers ExaCC dans le cloud OCI.
            </div>
        </div>

        <!-- AVANT : On-Premise -->
        <h3>üè† AVANT : Comment √ßa marche aujourd'hui (On-Premise)</h3>

        <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #ff9800;">
            <pre style="background: transparent; color: #333; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; margin: 0; overflow-x: auto;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  üè¢ TON SERVEUR ACTUEL (On-Premise)             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                           ‚îÇ
‚îÇ   ‚îÇ  üìù Code PL/SQL ‚îÇ                                           ‚îÇ
‚îÇ   ‚îÇ                 ‚îÇ                                           ‚îÇ
‚îÇ   ‚îÇ  UTL_FILE.FOPEN ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
‚îÇ   ‚îÇ  ('DATA_EXPORT',‚îÇ         ‚îÇ                                 ‚îÇ
‚îÇ   ‚îÇ   'fichier.txt')‚îÇ         ‚îÇ  Acc√®s DIRECT au disque         ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ                                 ‚îÇ
‚îÇ                               ‚ñº                                 ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ              ‚îÇ  üíæ DISQUE DUR DU SERVEUR          ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ                                    ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ  üìÅ /u01/app/oracle/data/          ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ     ‚îú‚îÄ‚îÄ üìÑ export_20240115.csv     ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ     ‚îú‚îÄ‚îÄ üìÑ rapport_mensuel.txt     ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ     ‚îî‚îÄ‚îÄ üìÑ log_batch.txt           ‚îÇ             ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            </pre>
            <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                <strong>üí° Explication simple :</strong>
                <p style="margin: 10px 0;">Aujourd'hui, quand ton code fait <code>UTL_FILE.FOPEN('DATA_EXPORT', 'fichier.txt')</code>, Oracle va directement √©crire sur le disque dur du serveur, dans un dossier comme <code>/u01/app/oracle/data/</code>.</p>
                <p style="margin: 5px 0;"><strong>Analogie :</strong> C'est comme √©crire un document et le sauvegarder sur le disque dur de ton PC. Simple et direct.</p>
            </div>
        </div>

        <!-- APR√àS : ExaCC -->
        <h3>‚òÅÔ∏è APR√àS : Comment √ßa marchera sur ExaCC</h3>

        <!-- Pourquoi migrer vers ExaCC -->
        <div style="background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #9c27b0;">
            <h4 style="margin-top: 0; color: #6a1b9a;">üéØ Pourquoi migrer vers ExaCC ?</h4>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #4caf50;">
                    <strong style="color: #2e7d32;">üí∞ R√©duction des co√ªts</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">Plus besoin de g√©rer le mat√©riel, la climatisation, l'√©lectricit√© du datacenter. Oracle s'en occupe.</p>
                </div>
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #2196f3;">
                    <strong style="color: #1565c0;">üîß Maintenance simplifi√©e</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">Les patchs, mises √† jour et maintenance mat√©rielle sont g√©r√©s par Oracle. Tu te concentres sur la base.</p>
                </div>
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #ff9800;">
                    <strong style="color: #e65100;">üìà Scalabilit√©</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">Besoin de plus de puissance ? Tu augmentes les ressources en quelques clics, sans acheter de nouveau serveur.</p>
                </div>
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #f44336;">
                    <strong style="color: #c62828;">üõ°Ô∏è Haute disponibilit√©</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">R√©plication automatique, backups g√©r√©s par Oracle, reprise apr√®s sinistre facilit√©e.</p>
                </div>
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #9c27b0;">
                    <strong style="color: #6a1b9a;">üîí S√©curit√© renforc√©e</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">Chiffrement automatique, isolation r√©seau, conformit√© aux normes (RGPD, etc.).</p>
                </div>
                <div style="background: white; border-radius: 10px; padding: 15px; border-left: 4px solid #00bcd4;">
                    <strong style="color: #00838f;">üè† Donn√©es chez toi</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">Avec ExaCC, l'infrastructure est dans TON datacenter. Tu gardes le contr√¥le physique de tes donn√©es.</p>
                </div>
            </div>
        </div>

        <!-- Diff√©rence On-Premise vs ExaCC -->
        <div style="background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #ffc107;">
            <h4 style="margin-top: 0; color: #f57f17;">üÜö Oracle On-Premise vs ExaCC : Quelle diff√©rence ?</h4>

            <table style="width: 100%; margin: 15px 0; background: white; border-radius: 10px; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th style="background: #f57f17; color: white; padding: 15px; text-align: left; width: 25%;">Crit√®re</th>
                        <th style="background: #ff8f00; color: white; padding: 15px; text-align: center;">Oracle On-Premise (Actuel)</th>
                        <th style="background: #4caf50; color: white; padding: 15px; text-align: center;">ExaCC (Cible)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">üñ•Ô∏è Infrastructure</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">Serveurs Linux classiques<br><small style="color: #666;">Tu installes Oracle dessus</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">Exadata (appliance optimis√©e)<br><small style="color: #666;">Mat√©riel + logiciel int√©gr√©</small></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">üìç O√π est le mat√©riel ?</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">Dans ton datacenter<br><small style="color: #666;">Tu ach√®tes et g√®res tout</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">Dans ton datacenter<br><small style="color: #666;">Oracle installe et g√®re</small></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">üíµ Mod√®le de co√ªt</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">CAPEX (achat serveurs + licences)<br><small style="color: #666;">Investissement initial</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">OPEX (abonnement)<br><small style="color: #666;">Paiement mensuel/annuel</small></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">üîß Qui g√®re quoi ?</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">Toi : serveurs, OS, Oracle, patchs<br><small style="color: #666;">Charge op√©rationnelle √©lev√©e</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">Oracle : mat√©riel, OS, patchs<br>Toi : bases de donn√©es uniquement</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">‚ö° Performance</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">D√©pend de ton mat√©riel<br><small style="color: #666;">Variable selon config</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">Optimis√©e pour Oracle<br><small style="color: #666;">Smart Scan, InfiniBand, etc.</small></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">üìÅ Acc√®s filesystem</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">OUI (UTL_FILE)<br><small style="color: #666;">Acc√®s direct /u01/...</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #ffebee;">NON ‚ùå<br><small style="color: #c62828;">‚Üí Object Storage + DBMS_CLOUD</small></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">‚òÅÔ∏è Services cloud OCI</td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">Non disponible<br><small style="color: #666;">Isol√© du cloud</small></td>
                        <td style="padding: 12px; border: 1px solid #ddd; text-align: center; background: #e8f5e9;">Int√©gr√© nativement<br><small style="color: #666;">Object Storage, IAM, backups...</small></td>
                    </tr>
                </tbody>
            </table>

            <div style="background: white; border-radius: 10px; padding: 20px; margin-top: 15px; border-left: 5px solid #f57f17;">
                <strong>üí° En r√©sum√© simple (pour expliquer comme un pro) :</strong>

                <div style="margin: 15px 0; padding: 15px; background: #fff3e0; border-radius: 10px;">
                    <p style="margin: 0 0 10px 0;"><strong>üêß Actuellement : Oracle sur serveurs Linux On-Premise</strong></p>
                    <p style="margin: 0; padding-left: 15px;">
                        Vos bases Oracle sont install√©es sur des <strong>serveurs Linux classiques</strong> dans votre datacenter.
                        Vous g√©rez tout : le mat√©riel (serveurs, stockage, r√©seau), le syst√®me d'exploitation Linux,
                        l'installation d'Oracle, les patchs de s√©curit√©, les sauvegardes, etc.
                        C'est un mod√®le <strong>CAPEX</strong> (investissement) avec un contr√¥le total mais une <strong>charge op√©rationnelle importante</strong>.
                    </p>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: #e8f5e9; border-radius: 10px;">
                    <p style="margin: 0 0 10px 0;"><strong>‚òÅÔ∏è Cible : ExaCC (Exadata Cloud@Customer)</strong></p>
                    <p style="margin: 0; padding-left: 15px;">
                        <strong>Exadata</strong> est une appliance Oracle : du mat√©riel sp√©cialement con√ßu et optimis√© pour faire tourner Oracle Database
                        (stockage flash, r√©seau InfiniBand, Smart Scan, etc.). C'est la <strong>Rolls-Royce des infrastructures Oracle</strong>.<br><br>
                        <strong>Cloud@Customer</strong> signifie qu'Oracle installe cette Exadata <strong>physiquement dans votre datacenter</strong>,
                        mais c'est <strong>Oracle qui la g√®re</strong> (maintenance, patchs, monitoring mat√©riel).<br><br>
                        Vous passez en mod√®le <strong>OPEX</strong> (abonnement) et vous vous concentrez uniquement sur vos <strong>bases de donn√©es</strong> (sch√©mas, donn√©es, PL/SQL).
                        Vos donn√©es restent chez vous = <strong>souverainet√© des donn√©es</strong> garantie.
                    </p>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: #e3f2fd; border-radius: 10px;">
                    <p style="margin: 0 0 10px 0;"><strong>üéØ La diff√©rence cl√© en une phrase :</strong></p>
                    <p style="margin: 0; padding-left: 15px; font-size: 1.05rem;">
                        <em>"On passe de <strong>serveurs Linux classiques qu'on g√®re nous-m√™mes</strong> √† une <strong>infrastructure Exadata manag√©e par Oracle</strong>,
                        install√©e chez nous. On gagne en performance, en fiabilit√© et on r√©duit notre charge op√©rationnelle,
                        tout en gardant nos donn√©es dans notre datacenter."</em>
                    </p>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: #fce4ec; border-radius: 10px; border: 2px solid #e91e63;">
                    <p style="margin: 0 0 10px 0;"><strong>‚ö†Ô∏è Impact technique majeur pour le DBA :</strong></p>
                    <p style="margin: 0; padding-left: 15px;">
                        Sur ExaCC, tu n'as <strong>plus d'acc√®s au filesystem</strong> du serveur (pas de SSH sur /u01/app/...).
                        Les packages comme <code>UTL_FILE</code> qui √©crivent sur le disque local ne fonctionnent plus.<br><br>
                        Tu dois utiliser <strong>Object Storage</strong> (stockage objet OCI) via le package <strong>DBMS_CLOUD</strong> pour toutes les op√©rations fichiers.
                        <br><br>
                        <strong>üëâ C'est exactement l'objet de cette migration :</strong> adapter ton code PL/SQL pour qu'il fonctionne sur ExaCC.
                    </p>
                </div>

                <div style="margin: 15px 0; padding: 15px; background: #f5f5f5; border-radius: 10px; border: 1px solid #9e9e9e;">
                    <p style="margin: 0 0 10px 0;"><strong>üìù Script pour expliquer √† un coll√®gue ou manager :</strong></p>
                    <p style="margin: 0; padding: 10px; background: white; border-radius: 8px; font-style: italic; line-height: 1.8;">
                        "Actuellement, nos bases Oracle tournent sur des <strong>serveurs Linux classiques</strong> qu'on g√®re nous-m√™mes (mat√©riel, OS, patchs, etc.).<br><br>
                        On migre vers <strong>ExaCC (Exadata Cloud@Customer)</strong>. C'est une infrastructure <strong>Exadata</strong> ‚Äî du mat√©riel haute performance sp√©cialement con√ßu pour Oracle ‚Äî qu'Oracle va installer <strong>dans notre datacenter</strong>. Mais c'est <strong>Oracle qui g√®re l'infrastructure</strong> (maintenance, patchs, monitoring). Nous, on se concentre uniquement sur nos bases de donn√©es.<br><br>
                        <strong>Les avantages :</strong> meilleures performances, moins de charge op√©rationnelle, mod√®le OPEX (abonnement au lieu d'achat), services cloud OCI int√©gr√©s, et nos donn√©es restent physiquement chez nous.<br><br>
                        <strong>La contrainte technique :</strong> on perd l'acc√®s direct au filesystem du serveur. Donc tout notre code qui utilise <strong>UTL_FILE</strong> pour lire/√©crire des fichiers doit √™tre adapt√© pour utiliser <strong>Object Storage</strong> via <strong>DBMS_CLOUD</strong>. C'est l'objet de ce projet de migration."
                    </p>
                </div>
            </div>
        </div>

        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #2196f3;">
            <pre style="background: transparent; color: #333; font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 1.6; margin: 0; overflow-x: auto;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                    ‚òÅÔ∏è CLOUD OCI                                          ‚îÇ
‚îÇ                                                                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ         üóÑÔ∏è ExaCC (ta base de donn√©es)       ‚îÇ     ‚îÇ    üì¶ Object Storage (Bucket)  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ     ‚îÇ                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ     ‚îÇ    C'est ton nouveau           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üìù Code PL/SQL ‚îÇ                        ‚îÇ     ‚îÇ    "disque dur cloud"          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                 ‚îÇ                        ‚îÇ     ‚îÇ                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  UTL_FILE.FOPEN ‚îÇ ‚óÑ‚îÄ‚îÄ Ton code ne       ‚îÇ     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ('DATA_EXPORT',‚îÇ     change PAS !       ‚îÇ     ‚îÇ  ‚îÇ üìÅ DATA_EXPORT/          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   'fichier.txt')‚îÇ                        ‚îÇ     ‚îÇ  ‚îÇ    üìÑ fichier.txt        ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ     ‚îÇ  ‚îÇ    üìÑ export.csv         ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ                                 ‚îÇ     ‚îÇ  ‚îÇ                          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚ñº                                 ‚îÇ     ‚îÇ  ‚îÇ üìÅ LOG_DIR/              ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ     ‚îÇ  ‚îÇ    üìÑ batch.log          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ üîÑ SYNONYME     ‚îÇ  "Quand tu dis         ‚îÇ     ‚îÇ  ‚îÇ                          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ UTL_FILE =      ‚îÇ   UTL_FILE, je         ‚îÇ     ‚îÇ  ‚îÇ üìÅ REPORTS/              ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ UTL_FILE_WRAPPER‚îÇ   comprends WRAPPER"   ‚îÇ     ‚îÇ  ‚îÇ    üìÑ rapport.pdf        ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ                                 ‚îÇ     ‚îÇ               ‚ñ≤                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚ñº                                 ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ üì¶ WRAPPER      ‚îÇ  Le traducteur !       ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ UTL_FILE_WRAPPER‚îÇ                        ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ                                 ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚ñº                                 ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ üìã TABLE MAPPING‚îÇ  "DATA_EXPORT" =       ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ directory ‚Üí URL ‚îÇ  https://object...     ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ                                 ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           ‚ñº                                 ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTPS (port 443)    ‚îÇ     ‚îÇ               ‚îÇ                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ üîå DBMS_CLOUD   ‚îÇ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ (package Oracle)‚îÇ    + CREDENTIAL        ‚îÇ     ‚îÇ                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    (authentification)  ‚îÇ     ‚îÇ                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ     ‚îÇ                                ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                          ‚îÇ
‚îÇ         ‚ñ≤                                                        ‚ñ≤                       ‚îÇ
‚îÇ         ‚îÇ                    üîí ACL (Firewall interne)           ‚îÇ                       ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ autorise la connexion ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            </pre>
        </div>

        <!-- Explication du flux -->
        <h3>üîÑ Le Flux Expliqu√© Pas √† Pas</h3>

        <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 20px 0;">
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="width: 60px; text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #4caf50; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">1</span>
                    </td>
                    <td style="padding: 15px; border-bottom: 1px solid #e0e0e0;">
                        <strong>Ton code appelle UTL_FILE</strong><br>
                        <code style="background: #fff3e0; padding: 5px 10px; border-radius: 5px;">UTL_FILE.FOPEN('DATA_EXPORT', 'rapport.txt', 'W')</code><br>
                        <small style="color: #666;">üëâ Ton code PL/SQL n'a pas chang√©, il utilise toujours UTL_FILE comme avant !</small>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #2196f3; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">2</span>
                    </td>
                    <td style="padding: 15px; border-bottom: 1px solid #e0e0e0;">
                        <strong>Le SYNONYME redirige vers le WRAPPER</strong><br>
                        <small style="color: #666;">üëâ Oracle dit : "UTL_FILE ? Je connais pas, mais j'ai un synonyme qui me dit d'utiliser UTL_FILE_WRAPPER √† la place !"</small><br>
                        <span style="background: #e3f2fd; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 5px;">UTL_FILE ‚Üí UTL_FILE_WRAPPER (automatique, invisible)</span>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #ff9800; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">3</span>
                    </td>
                    <td style="padding: 15px; border-bottom: 1px solid #e0e0e0;">
                        <strong>Le WRAPPER consulte la TABLE DE MAPPING</strong><br>
                        <small style="color: #666;">üëâ Le wrapper cherche : "DATA_EXPORT, c'est quoi en URL cloud ?"</small><br>
                        <table style="margin: 10px 0; font-size: 0.9rem; background: white;">
                            <tr style="background: #ffecb3;"><td style="padding: 8px;"><code>DATA_EXPORT</code></td><td style="padding: 8px;">‚Üí</td><td style="padding: 8px;"><code>https://objectstorage.eu-paris-1.oraclecloud.com/.../DATA_EXPORT/</code></td></tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #9c27b0; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">4</span>
                    </td>
                    <td style="padding: 15px; border-bottom: 1px solid #e0e0e0;">
                        <strong>Le WRAPPER appelle DBMS_CLOUD avec le CREDENTIAL</strong><br>
                        <small style="color: #666;">üëâ Le wrapper dit √† DBMS_CLOUD : "Envoie ce fichier √† cette URL, voici le mot de passe (credential)"</small><br>
                        <code style="background: #f3e5f5; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 5px;">DBMS_CLOUD.PUT_OBJECT(credential_name => 'MON_CREDENTIAL', ...)</code>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #f44336; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">5</span>
                    </td>
                    <td style="padding: 15px; border-bottom: 1px solid #e0e0e0;">
                        <strong>L'ACL autorise la connexion r√©seau</strong><br>
                        <small style="color: #666;">üëâ Le firewall interne OCI v√©rifie : "ExaCC a-t-il le droit de parler √† Object Storage ?" ‚Üí OUI</small><br>
                        <span style="background: #ffebee; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 5px;">üîí C'est une r√®gle de s√©curit√© INTERNE au cloud (pas Internet)</span>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; vertical-align: top; padding: 15px;">
                        <span style="background: #4caf50; color: white; border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">‚úì</span>
                    </td>
                    <td style="padding: 15px;">
                        <strong>Le fichier arrive dans Object Storage !</strong><br>
                        <small style="color: #666;">üëâ Ton fichier <code>rapport.txt</code> est maintenant stock√© dans le bucket, accessible via URL</small><br>
                        <code style="background: #e8f5e9; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 5px;">https://objectstorage.../DATA_EXPORT/rapport.txt</code>
                    </td>
                </tr>
            </table>
        </div>

        <!-- C'est quoi l'ACL -->
        <h3>üîí C'est quoi l'ACL exactement ?</h3>

        <div class="alert alert-warning" style="margin: 20px 0;">
            <span class="alert-icon">üîê</span>
            <div>
                <strong>ACL = Access Control List (Liste de Contr√¥le d'Acc√®s)</strong>
                <p style="margin: 10px 0;">M√™me si ta base ExaCC et Object Storage sont <strong>tous les deux dans le cloud OCI</strong>, ils ne peuvent pas se parler automatiquement. C'est une mesure de s√©curit√©.</p>
                <p style="margin: 10px 0;">L'ACL est une r√®gle qui dit : <em>"La base de donn√©es ExaCC a le droit de se connecter √† Object Storage sur le port 443 (HTTPS)"</em></p>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
            <div style="background: #ffebee; border-radius: 10px; padding: 20px; border-left: 5px solid #f44336;">
                <h4 style="margin: 0 0 10px 0; color: #c62828;">‚ùå Sans ACL configur√©e</h4>
                <p style="margin: 0; font-size: 0.95rem;">Ta base essaie d'acc√©der √† Object Storage ‚Üí <strong>BLOQU√â</strong> par le firewall interne OCI</p>
                <p style="margin: 10px 0 0 0; font-size: 0.85rem; color: #666;">Erreur : <code>ORA-29024: Certificate validation failure</code> ou timeout</p>
            </div>
            <div style="background: #e8f5e9; border-radius: 10px; padding: 20px; border-left: 5px solid #4caf50;">
                <h4 style="margin: 0 0 10px 0; color: #2e7d32;">‚úÖ Avec ACL configur√©e</h4>
                <p style="margin: 0; font-size: 0.95rem;">Ta base acc√®de √† Object Storage ‚Üí <strong>AUTORIS√â</strong></p>
                <p style="margin: 10px 0 0 0; font-size: 0.85rem; color: #666;">Les fichiers sont lus/√©crits normalement</p>
            </div>
        </div>

        <div style="background: #e8f5e9; border-radius: 10px; padding: 20px; margin: 20px 0;">
            <strong>üéØ Bonne nouvelle pour toi :</strong>
            <p style="margin: 10px 0 0 0;">L'ACL est configur√©e par les <strong>admins OCI</strong>, pas par toi. Tu dois juste leur demander de confirmer que c'est fait. Dans ton email, demande simplement : <em>"Pouvez-vous confirmer que l'ACL autorise la base ExaCC √† acc√©der √† Object Storage ?"</em></p>
        </div>

        <!-- Analogie finale -->
        <h3>üè† Analogie Compl√®te : Le D√©m√©nagement</h3>

        <div style="background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%); border-radius: 15px; padding: 25px; margin: 20px 0;">
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <th style="text-align: left; padding: 10px; background: rgba(255,255,255,0.5); border-radius: 5px;">√âl√©ment technique</th>
                    <th style="text-align: left; padding: 10px; background: rgba(255,255,255,0.5); border-radius: 5px;">Analogie du d√©m√©nagement</th>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>On-Premise ‚Üí ExaCC</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Tu d√©m√©nages de ta maison vers un appartement en r√©sidence</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>UTL_FILE (ancien)</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Tu rangeais tes affaires dans ton garage personnel</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>Object Storage (nouveau)</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Maintenant tu utilises un garde-meuble s√©curis√© de la r√©sidence</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>URI du Bucket</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">L'adresse du garde-meuble</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>Credential</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">La cl√©/badge pour ouvrir le garde-meuble</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>ACL</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Le gardien de la r√©sidence qui v√©rifie que tu as le droit d'acc√©der au garde-meuble</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>Table de Mapping</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Un carnet qui dit "les outils du garage ‚Üí casier A3 du garde-meuble"</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);"><strong>Wrapper</strong></td>
                    <td style="padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1);">Un assistant qui transporte tes affaires entre l'appart et le garde-meuble automatiquement</td>
                </tr>
                <tr>
                    <td style="padding: 12px;"><strong>Synonyme</strong></td>
                    <td style="padding: 12px;">Tu dis toujours "je range au garage" mais l'assistant comprend "je mets au garde-meuble"</td>
                </tr>
            </table>
        </div>

    </section>

    <!-- √âtape 1 : Audit -->
    <section>
        <h2>üîç √âtape 1 : Audit UTL_FILE (√Ä faire maintenant)</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚ñ∂Ô∏è</span>
            <div>
                <strong>Tu peux commencer tout de suite !</strong><br>
                Cette √©tape ne d√©pend pas des admins OCI. Lance l'audit pour conna√Ætre l'ampleur du travail.
            </div>
        </div>

        <h3>1.1 Compter les utilisations</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Comptage global (sch√©ma courant)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- AUDIT POUR LE SCH√âMA COURANT (USER)
-- ============================================
-- Ex√©cute ce script connect√© au sch√©ma √† auditer

-- Afficher le sch√©ma courant
SELECT USER AS schema_courant FROM DUAL;

-- Nombre total de r√©f√©rences UTL_FILE dans CE sch√©ma
SELECT COUNT(*) AS total_references
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%';

-- Nombre d'objets distincts impact√©s dans CE sch√©ma
SELECT COUNT(DISTINCT name) AS objets_impactes
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%';</code></pre>
        </div>

        <h3>1.2 Liste des objets √† modifier</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Liste d√©taill√©e des objets (sch√©ma courant)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Liste des objets utilisant UTL_FILE dans le sch√©ma courant
SELECT
    USER AS owner,
    name AS object_name,
    type AS object_type,
    COUNT(*) AS nb_references
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
GROUP BY name, type
ORDER BY nb_references DESC;</code></pre>
        </div>

        <h3>1.3 Fonctions UTL_FILE utilis√©es et compatibilit√© wrapper</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Liste des fonctions UTL_FILE utilis√©es et leur support</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- FONCTIONS UTL_FILE UTILIS√âES ET COMPATIBILIT√â WRAPPER
-- ============================================
-- Cette requ√™te liste toutes les fonctions UTL_FILE utilis√©es
-- et indique si elles sont support√©es par UTL_FILE_WRAPPER

SET LINESIZE 200
SET PAGESIZE 100
COLUMN fonction FORMAT A20
COLUMN nb_utilisations FORMAT 9999
COLUMN supporte_wrapper FORMAT A20

SELECT
    fonction,
    nb_utilisations,
    CASE
        WHEN fonction IN ('FOPEN', 'FCLOSE', 'FCLOSE_ALL', 'PUT_LINE', 'PUT',
                          'GET_LINE', 'NEW_LINE', 'FFLUSH', 'IS_OPEN',
                          'PUT_RAW', 'GET_RAW', 'FGETATTR',
                          'FCOPY', 'FRENAME', 'FREMOVE', 'FILE_TYPE')
        THEN '‚úÖ OUI'
        ELSE '‚ùå NON'
    END AS supporte_wrapper
FROM (
    SELECT
        CASE
            WHEN UPPER(text) LIKE '%UTL_FILE.FOPEN%' THEN 'FOPEN'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCLOSE_ALL%' THEN 'FCLOSE_ALL'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCLOSE%' THEN 'FCLOSE'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT_LINE%' THEN 'PUT_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT_RAW%' THEN 'PUT_RAW'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT%' AND UPPER(text) NOT LIKE '%PUT_LINE%' AND UPPER(text) NOT LIKE '%PUT_RAW%' THEN 'PUT'
            WHEN UPPER(text) LIKE '%UTL_FILE.GET_LINE%' THEN 'GET_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.GET_RAW%' THEN 'GET_RAW'
            WHEN UPPER(text) LIKE '%UTL_FILE.NEW_LINE%' THEN 'NEW_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FFLUSH%' THEN 'FFLUSH'
            WHEN UPPER(text) LIKE '%UTL_FILE.IS_OPEN%' THEN 'IS_OPEN'
            WHEN UPPER(text) LIKE '%UTL_FILE.FGETATTR%' THEN 'FGETATTR'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCOPY%' THEN 'FCOPY'
            WHEN UPPER(text) LIKE '%UTL_FILE.FRENAME%' THEN 'FRENAME'
            WHEN UPPER(text) LIKE '%UTL_FILE.FREMOVE%' THEN 'FREMOVE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FILE_TYPE%' OR UPPER(text) LIKE '%FILE_TYPE%' THEN 'FILE_TYPE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FSEEK%' THEN 'FSEEK'
            WHEN UPPER(text) LIKE '%UTL_FILE.FGETPOS%' THEN 'FGETPOS'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUTF%' THEN 'PUTF'
            ELSE 'AUTRE'
        END AS fonction,
        COUNT(*) AS nb_utilisations
    FROM user_source
    WHERE UPPER(text) LIKE '%UTL_FILE%'
    GROUP BY
        CASE
            WHEN UPPER(text) LIKE '%UTL_FILE.FOPEN%' THEN 'FOPEN'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCLOSE_ALL%' THEN 'FCLOSE_ALL'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCLOSE%' THEN 'FCLOSE'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT_LINE%' THEN 'PUT_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT_RAW%' THEN 'PUT_RAW'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUT%' AND UPPER(text) NOT LIKE '%PUT_LINE%' AND UPPER(text) NOT LIKE '%PUT_RAW%' THEN 'PUT'
            WHEN UPPER(text) LIKE '%UTL_FILE.GET_LINE%' THEN 'GET_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.GET_RAW%' THEN 'GET_RAW'
            WHEN UPPER(text) LIKE '%UTL_FILE.NEW_LINE%' THEN 'NEW_LINE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FFLUSH%' THEN 'FFLUSH'
            WHEN UPPER(text) LIKE '%UTL_FILE.IS_OPEN%' THEN 'IS_OPEN'
            WHEN UPPER(text) LIKE '%UTL_FILE.FGETATTR%' THEN 'FGETATTR'
            WHEN UPPER(text) LIKE '%UTL_FILE.FCOPY%' THEN 'FCOPY'
            WHEN UPPER(text) LIKE '%UTL_FILE.FRENAME%' THEN 'FRENAME'
            WHEN UPPER(text) LIKE '%UTL_FILE.FREMOVE%' THEN 'FREMOVE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FILE_TYPE%' OR UPPER(text) LIKE '%FILE_TYPE%' THEN 'FILE_TYPE'
            WHEN UPPER(text) LIKE '%UTL_FILE.FSEEK%' THEN 'FSEEK'
            WHEN UPPER(text) LIKE '%UTL_FILE.FGETPOS%' THEN 'FGETPOS'
            WHEN UPPER(text) LIKE '%UTL_FILE.PUTF%' THEN 'PUTF'
            ELSE 'AUTRE'
        END
)
ORDER BY nb_utilisations DESC;</code></pre>
        </div>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Fonctions support√©es par UTL_FILE_WRAPPER :</strong><br>
                FOPEN, FCLOSE, FCLOSE_ALL, PUT_LINE, PUT, GET_LINE, NEW_LINE, FFLUSH, IS_OPEN, PUT_RAW, GET_RAW, FGETATTR, FCOPY, FRENAME, FREMOVE, FILE_TYPE
            </div>
        </div>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Fonctions NON support√©es (rarement utilis√©es) :</strong><br>
                FSEEK, FGETPOS, PUTF - Si tu utilises ces fonctions, il faudra adapter le wrapper ou modifier le code.
            </div>
        </div>

        <h3>1.4 Export de l'audit complet</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Export CSV pour Excel (sch√©ma courant)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- G√©n√©rer un rapport CSV pour le sch√©ma courant
SET MARKUP CSV ON
SET LINESIZE 32767
SET PAGESIZE 0
SPOOL utl_file_audit.csv

SELECT
    USER AS owner,
    name,
    type,
    line,
    REPLACE(TRIM(text), ',', ';') AS code_line
FROM user_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
ORDER BY name, type, line;

SPOOL OFF
SET MARKUP CSV OFF</code></pre>
        </div>
    </section>

    <!-- Ce que tu attends des admins -->
    <section>
        <h2>‚è≥ Ce que tu attends des Admins OCI</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">üì•</span>
            <div>
                <strong>Informations √† recevoir</strong><br>
                Une fois que tu auras ces informations, tu pourras continuer les √©tapes 3, 4 et 5.
            </div>
        </div>

        <div class="card-grid">
            <div class="card">
                <h4>1. URI du Bucket</h4>
                <p>Format attendu :</p>
                <code style="background:#f5f5f5;padding:5px;display:block;margin-top:10px;font-size:0.85rem;word-break:break-all;">
                https://objectstorage.eu-paris-1.oraclecloud.com/n/[namespace]/b/[bucket]/o/
                </code>
                <p style="margin-top:10px;"><strong>Re√ßu :</strong> <input type="text" id="bucket_uri" style="width:100%;padding:5px;margin-top:5px;" placeholder="Coller l'URI ici..."></p>
            </div>
            <div class="card">
                <h4>2. Nom du Credential</h4>
                <p>Le credential DBMS_CLOUD cr√©√© en base pour l'authentification.</p>
                <p style="margin-top:10px;"><strong>Re√ßu :</strong> <input type="text" id="credential_name" style="width:100%;padding:5px;margin-top:5px;" placeholder="Ex: OCI_CREDENTIAL"></p>
            </div>
            <div class="card">
                <h4>3. ACL R√©seau</h4>
                <p>Confirmation que la base peut acc√©der √† *.oraclecloud.com:443</p>
                <p style="margin-top:10px;">
                    <label><input type="checkbox" id="acl_confirmed"> Confirm√© par les admins</label>
                </p>
            </div>
            <div class="card">
                <h4>4. Dossiers cr√©√©s</h4>
                <p>Les prefixes (dossiers) cr√©√©s dans le bucket.</p>
                <p style="margin-top:10px;"><strong>Liste :</strong></p>
                <textarea id="folders_list" style="width:100%;height:60px;padding:5px;" placeholder="DATA_EXPORT/&#10;LOG_DIR/&#10;REPORTS/"></textarea>
            </div>
        </div>

        <div style="text-align:center;margin-top:20px;">
            <button onclick="saveConfig()" style="background:var(--primary);color:white;padding:10px 30px;border:none;border-radius:5px;cursor:pointer;font-size:1rem;">
                üíæ Sauvegarder (localStorage)
            </button>
        </div>
    </section>

    <!-- √âtape 3 : Table de mapping -->
    <section>
        <h2>üìä √âtape 3 : Cr√©er la Table de Mapping</h2>

        <div class="alert alert-info">
            <span class="alert-icon">‚è≥</span>
            <div>
                <strong>Pr√©requis</strong><br>
                Tu dois avoir re√ßu l'URI du bucket des admins OCI avant de cr√©er cette table.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Cr√©ation de la table de mapping (sch√©ma courant)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- CR√âATION TABLE DE MAPPING - SCH√âMA COURANT
-- ============================================
-- La table sera cr√©√©e dans le sch√©ma o√π tu es connect√©

-- Afficher le sch√©ma courant
SELECT USER AS schema_courant FROM DUAL;

-- Cr√©er la table de mapping (dans le sch√©ma courant)
CREATE TABLE utl_file_directory_mapping (
    mapping_id         NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    oracle_directory   VARCHAR2(128) NOT NULL UNIQUE,
    object_storage_uri VARCHAR2(1000) NOT NULL,
    credential_name    VARCHAR2(128) DEFAULT 'OCI_CREDENTIAL',
    is_active          VARCHAR2(1) DEFAULT 'Y',
    created_date       DATE DEFAULT SYSDATE
);

-- Index pour performance
CREATE INDEX idx_mapping_dir ON utl_file_directory_mapping(oracle_directory);

-- V√©rifier la cr√©ation
SELECT table_name FROM user_tables WHERE table_name = 'UTL_FILE_DIRECTORY_MAPPING';</code></pre>
        </div>

        <h3>Ins√©rer les mappings</h3>
        <div class="code-container" id="code-insert-mappings">
            <div class="code-header">
                <span>SQL - Insertion des mappings <span class="auto-update-badge" style="display:none; background:#4caf50; color:white; padding:2px 8px; border-radius:10px; font-size:0.75rem; margin-left:10px;">‚úÖ Mis √† jour auto</span></span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code id="sql-insert-mappings">-- ============================================
-- INSERTION DES MAPPINGS DIRECTORY ‚Üí OBJECT STORAGE
-- ============================================

DECLARE
    v_base_uri VARCHAR2(500) := '<span class="placeholder-uri">[URI_BUCKET]</span>';
    v_credential VARCHAR2(100) := '<span class="placeholder-cred">[CREDENTIAL]</span>';
BEGIN
<span id="sql-insert-lines">    -- Adapter cette liste selon ton audit
    INSERT INTO utl_file_directory_mapping (oracle_directory, object_storage_uri, credential_name)
    VALUES ('DATA_EXPORT', v_base_uri || 'DATA_EXPORT/', v_credential);

    INSERT INTO utl_file_directory_mapping (oracle_directory, object_storage_uri, credential_name)
    VALUES ('LOG_DIR', v_base_uri || 'LOG_DIR/', v_credential);

    INSERT INTO utl_file_directory_mapping (oracle_directory, object_storage_uri, credential_name)
    VALUES ('REPORT_DIR', v_base_uri || 'REPORT_DIR/', v_credential);

    -- Ajouter d'autres directories selon ton audit...</span>

    COMMIT;
END;
/

-- V√©rifier les mappings ins√©r√©s
SELECT oracle_directory, object_storage_uri, credential_name
FROM utl_file_directory_mapping
ORDER BY oracle_directory;</code></pre>
        </div>
    </section>

    <!-- √âtape 4 : Package wrapper -->
    <section>
        <h2>üì¶ √âtape 4 : D√©ployer le Package Wrapper</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üìÑ</span>
            <div>
                <strong>Package complet</strong><br>
                Le code complet du package UTL_FILE_WRAPPER est disponible dans le document principal :
                <a href="migration-utl-file-exacc.html#wrapper" style="color:var(--secondary);">migration-utl-file-exacc.html ‚Üí Section Package Wrapper</a>
            </div>
        </div>

        <h3>R√©sum√© des √©tapes</h3>
        <ol style="padding-left: 20px;">
            <li style="margin: 10px 0;">Copier le code du <strong>Package Specification</strong> et l'ex√©cuter</li>
            <li style="margin: 10px 0;">Copier le code du <strong>Package Body</strong> et l'ex√©cuter</li>
            <li style="margin: 10px 0;">V√©rifier que le package est VALID :
                <code style="background:#f5f5f5;padding:3px 8px;margin-left:10px;">SELECT status FROM user_objects WHERE object_name = 'UTL_FILE_WRAPPER';</code>
            </li>
            <li style="margin: 10px 0;">Donner les grants aux utilisateurs qui en ont besoin</li>
        </ol>
    </section>

    <!-- √âtape 5 : Migration -->
    <section>
        <h2>üîÑ √âtape 5 : Cr√©er le Synonyme et Tester</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚≠ê</span>
            <div>
                <strong>M√©thode utilis√©e : Le Synonyme</strong><br>
                Avec plus de 1000 utilisations de UTL_FILE, le synonyme est la seule option viable. Z√©ro modification de code = z√©ro risque d'erreur.
            </div>
        </div>

        <h3>‚úÖ Cr√©ation du Synonyme</h3>

        <div class="alert alert-info" style="margin-bottom: 15px;">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Pourquoi le synonyme est la meilleure solution ?</strong>
                <table style="margin: 15px 0; width: 100%;">
                    <tr>
                        <th style="background: var(--primary); color: white; padding: 10px;">Avantage</th>
                        <th style="background: var(--primary); color: white; padding: 10px;">Explication</th>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Z√©ro modification de code</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Tes 1000+ proc√©dures restent identiques, pas de risque d'introduire des bugs</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Rollback instantan√©</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Si probl√®me, tu supprimes le synonyme et tout redevient comme avant en 1 seconde</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Pas de tests de non-r√©gression</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Le code n'ayant pas chang√©, pas besoin de tout re-tester ligne par ligne</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Migration en 5 minutes</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Au lieu de jours/semaines pour modifier 1000 proc√©dures</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Transparent pour les devs</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Les d√©veloppeurs continuent √† √©crire <code>UTL_FILE</code> sans rien changer</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="alert alert-warning" style="margin-bottom: 15px;">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Pr√©requis : Privil√®ge CREATE PUBLIC SYNONYM</strong><br>
                Pour cr√©er un synonyme PUBLIC, tu dois avoir le privil√®ge <code>CREATE PUBLIC SYNONYM</code> ou √™tre connect√© en tant que DBA/SYS.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Migration par SYNONYME PUBLIC (tous les sch√©mas)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- MIGRATION UTL_FILE PAR SYNONYME PUBLIC
-- ============================================
-- Avantage : UNE SEULE commande pour TOUS les sch√©mas !
-- Ex√©cute ce script en tant que DBA ou utilisateur avec CREATE PUBLIC SYNONYM

-- Afficher l'utilisateur courant
SELECT USER AS utilisateur_courant FROM DUAL;


-- √âTAPE 1 : Identifier le sch√©ma o√π est d√©ploy√© le wrapper
-- --------------------------------------------------------
-- Le wrapper doit √™tre dans UN sch√©ma (ex: SCHEMA_COMMON ou le premier sch√©ma migr√©)
SELECT owner, object_name, object_type, status
FROM dba_objects
WHERE object_name = 'UTL_FILE_WRAPPER'
  AND object_type IN ('PACKAGE', 'PACKAGE BODY')
ORDER BY owner;
-- Note le OWNER o√π le wrapper est VALID (ex: SCHEMA_COMMON)


-- √âTAPE 2 : Cr√©er le SYNONYME PUBLIC
-- ----------------------------------
-- ‚ö†Ô∏è REMPLACE "SCHEMA_WRAPPER" par le sch√©ma o√π tu as d√©ploy√© le wrapper
CREATE OR REPLACE PUBLIC SYNONYM UTL_FILE FOR SCHEMA_WRAPPER.UTL_FILE_WRAPPER;

-- V√©rifier que le synonyme est cr√©√©
SELECT owner, synonym_name, table_owner, table_name
FROM dba_synonyms
WHERE synonym_name = 'UTL_FILE'
  AND owner = 'PUBLIC';


-- √âTAPE 3 : Recompiler TOUS les sch√©mas impact√©s
-- ----------------------------------------------
-- Liste des sch√©mas utilisant UTL_FILE
SELECT DISTINCT owner
FROM dba_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
ORDER BY owner;

-- Recompiler chaque sch√©ma (adapter la liste)
BEGIN
    DBMS_UTILITY.COMPILE_SCHEMA(schema => 'SCHEMA_APP1', compile_all => FALSE);
    DBMS_UTILITY.COMPILE_SCHEMA(schema => 'SCHEMA_APP2', compile_all => FALSE);
    DBMS_UTILITY.COMPILE_SCHEMA(schema => 'SCHEMA_BATCH', compile_all => FALSE);
    -- Ajouter les autres sch√©mas...
END;
/

-- Ou recompiler automatiquement TOUS les sch√©mas impact√©s
BEGIN
    FOR rec IN (
        SELECT DISTINCT owner
        FROM dba_source
        WHERE UPPER(text) LIKE '%UTL_FILE%'
          AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
    ) LOOP
        DBMS_OUTPUT.PUT_LINE('Recompilation du sch√©ma: ' || rec.owner);
        DBMS_UTILITY.COMPILE_SCHEMA(schema => rec.owner, compile_all => FALSE);
    END LOOP;
END;
/


-- √âTAPE 4 : V√©rifier qu'il n'y a plus d'objets invalides
-- -----------------------------------------------------
SELECT owner, object_name, object_type, status
FROM dba_objects
WHERE status = 'INVALID'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
ORDER BY owner, object_name;
-- Cette requ√™te doit retourner 0 ligne


-- ============================================
-- TEST RAPIDE (depuis n'importe quel sch√©ma)
-- ============================================
SET SERVEROUTPUT ON
DECLARE
    v_file UTL_FILE.FILE_TYPE;
BEGIN
    DBMS_OUTPUT.PUT_LINE('Test depuis le sch√©ma: ' || USER);
    v_file := UTL_FILE.FOPEN('DATA_EXPORT', 'test_' || USER || '.txt', 'W');
    UTL_FILE.PUT_LINE(v_file, 'Test synonyme PUBLIC OK - ' || SYSDATE);
    UTL_FILE.FCLOSE(v_file);
    DBMS_OUTPUT.PUT_LINE('‚úÖ Synonyme PUBLIC fonctionne pour ' || USER || ' !');
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('‚ùå Erreur: ' || SQLERRM);
END;
/</code></pre>
        </div>

        <h3>üîÑ Rollback complet si probl√®me</h3>

        <div class="alert alert-danger">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Script de rollback complet</strong><br>
                Ce script annule enti√®rement la migration et revient √† UTL_FILE natif Oracle.
                √Ä ex√©cuter en tant que DBA (SYSDBA).
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - ROLLBACK COMPLET (ex√©cuter en SYSDBA)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- ROLLBACK COMPLET - MIGRATION UTL_FILE
-- ============================================
-- Ex√©cuter en tant que SYSDBA
-- Ce script annule toute la migration et revient √† UTL_FILE natif

SET SERVEROUTPUT ON
SET LINESIZE 200

DECLARE
    v_count NUMBER;
    v_schema VARCHAR2(128) := 'SCHEMA_WRAPPER';  -- ‚ö†Ô∏è ADAPTER: Sch√©ma o√π le wrapper a √©t√© install√©
BEGIN
    DBMS_OUTPUT.PUT_LINE('========================================');
    DBMS_OUTPUT.PUT_LINE('ROLLBACK MIGRATION UTL_FILE - D√âBUT');
    DBMS_OUTPUT.PUT_LINE('========================================');
    DBMS_OUTPUT.PUT_LINE('');

    -- ============================================
    -- √âTAPE 1 : Supprimer le synonyme PUBLIC
    -- ============================================
    DBMS_OUTPUT.PUT_LINE('√âTAPE 1 : Suppression du synonyme PUBLIC UTL_FILE...');
    BEGIN
        EXECUTE IMMEDIATE 'DROP PUBLIC SYNONYM UTL_FILE';
        DBMS_OUTPUT.PUT_LINE('   ‚úÖ Synonyme PUBLIC UTL_FILE supprim√©');
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE = -1432 THEN
                DBMS_OUTPUT.PUT_LINE('   ‚ÑπÔ∏è Synonyme PUBLIC UTL_FILE n''existait pas');
            ELSE
                DBMS_OUTPUT.PUT_LINE('   ‚ùå Erreur: ' || SQLERRM);
            END IF;
    END;

    -- ============================================
    -- √âTAPE 2 : Supprimer le package UTL_FILE_WRAPPER
    -- ============================================
    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('√âTAPE 2 : Suppression du package UTL_FILE_WRAPPER...');
    BEGIN
        EXECUTE IMMEDIATE 'DROP PACKAGE ' || v_schema || '.UTL_FILE_WRAPPER';
        DBMS_OUTPUT.PUT_LINE('   ‚úÖ Package UTL_FILE_WRAPPER supprim√©');
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE = -4043 THEN
                DBMS_OUTPUT.PUT_LINE('   ‚ÑπÔ∏è Package UTL_FILE_WRAPPER n''existait pas');
            ELSE
                DBMS_OUTPUT.PUT_LINE('   ‚ùå Erreur: ' || SQLERRM);
            END IF;
    END;

    -- ============================================
    -- √âTAPE 3 : Supprimer la table de mapping
    -- ============================================
    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('√âTAPE 3 : Suppression de la table de mapping...');
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE ' || v_schema || '.UTL_FILE_DIRECTORY_MAPPING CASCADE CONSTRAINTS';
        DBMS_OUTPUT.PUT_LINE('   ‚úÖ Table UTL_FILE_DIRECTORY_MAPPING supprim√©e');
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE = -942 THEN
                DBMS_OUTPUT.PUT_LINE('   ‚ÑπÔ∏è Table UTL_FILE_DIRECTORY_MAPPING n''existait pas');
            ELSE
                DBMS_OUTPUT.PUT_LINE('   ‚ùå Erreur: ' || SQLERRM);
            END IF;
    END;

    -- ============================================
    -- √âTAPE 4 : Recompiler tous les sch√©mas impact√©s
    -- ============================================
    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('√âTAPE 4 : Recompilation des sch√©mas impact√©s...');
    FOR rec IN (
        SELECT DISTINCT owner
        FROM dba_source
        WHERE UPPER(text) LIKE '%UTL_FILE%'
          AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
        ORDER BY owner
    ) LOOP
        BEGIN
            DBMS_OUTPUT.PUT_LINE('   Recompilation de ' || rec.owner || '...');
            DBMS_UTILITY.COMPILE_SCHEMA(schema => rec.owner, compile_all => FALSE);
            DBMS_OUTPUT.PUT_LINE('   ‚úÖ ' || rec.owner || ' recompil√©');
        EXCEPTION
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('   ‚ùå Erreur recompilation ' || rec.owner || ': ' || SQLERRM);
        END;
    END LOOP;

    -- ============================================
    -- √âTAPE 5 : V√©rification finale
    -- ============================================
    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('√âTAPE 5 : V√©rifications...');

    -- V√©rifier qu'il n'y a plus de synonyme PUBLIC UTL_FILE
    SELECT COUNT(*) INTO v_count
    FROM dba_synonyms
    WHERE synonym_name = 'UTL_FILE' AND owner = 'PUBLIC';

    IF v_count = 0 THEN
        DBMS_OUTPUT.PUT_LINE('   ‚úÖ Aucun synonyme PUBLIC UTL_FILE');
    ELSE
        DBMS_OUTPUT.PUT_LINE('   ‚ùå Synonyme PUBLIC UTL_FILE existe encore !');
    END IF;

    -- V√©rifier les objets invalides
    SELECT COUNT(*) INTO v_count
    FROM dba_objects
    WHERE status = 'INVALID'
      AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM');

    IF v_count = 0 THEN
        DBMS_OUTPUT.PUT_LINE('   ‚úÖ Aucun objet invalide');
    ELSE
        DBMS_OUTPUT.PUT_LINE('   ‚ö†Ô∏è ' || v_count || ' objets invalides (v√©rifier avec requ√™te ci-dessous)');
    END IF;

    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('========================================');
    DBMS_OUTPUT.PUT_LINE('ROLLBACK TERMIN√â');
    DBMS_OUTPUT.PUT_LINE('Le code utilise maintenant UTL_FILE natif Oracle (SYS.UTL_FILE)');
    DBMS_OUTPUT.PUT_LINE('========================================');
END;
/

-- V√©rifier les objets invalides apr√®s rollback
SELECT owner, object_name, object_type, status
FROM dba_objects
WHERE status = 'INVALID'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
ORDER BY owner, object_type, object_name;</code></pre>
        </div>

        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Apr√®s le rollback :</strong><br>
                - Le code PL/SQL utilise √† nouveau UTL_FILE natif (SYS.UTL_FILE)<br>
                - Les fichiers seront √©crits sur le filesystem local (comme avant)<br>
                - Les fichiers d√©j√† dans Object Storage restent accessibles (√† supprimer manuellement si besoin)
            </div>
        </div>

    </section>

    <!-- Test final -->
    <section>
        <h2>‚úÖ Test Final</h2>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Test d'√©criture/lecture (sch√©ma courant)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================
-- TEST COMPLET - SCH√âMA COURANT
-- ============================================
-- Ex√©cute ce test connect√© au sch√©ma migr√©

-- Afficher le sch√©ma courant
SELECT USER AS schema_courant FROM DUAL;

-- Activer l'affichage
SET SERVEROUTPUT ON

DECLARE
    v_file   UTL_FILE.FILE_TYPE;
    v_line   VARCHAR2(32767);
    v_test   VARCHAR2(100) := 'Test migration ' || USER || ' - ' || TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS');
BEGIN
    DBMS_OUTPUT.PUT_LINE('=== Test pour le sch√©ma: ' || USER || ' ===');
    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('Le code utilise UTL_FILE (comme avant)');
    DBMS_OUTPUT.PUT_LINE('Le synonyme redirige vers UTL_FILE_WRAPPER automatiquement');
    DBMS_OUTPUT.PUT_LINE('');

    -- Test √©criture (appel UTL_FILE comme avant migration)
    v_file := UTL_FILE.FOPEN('DATA_EXPORT', 'test_migration_' || USER || '.txt', 'W');
    UTL_FILE.PUT_LINE(v_file, v_test);
    UTL_FILE.FCLOSE(v_file);
    DBMS_OUTPUT.PUT_LINE('‚úÖ √âcriture OK');

    -- Test lecture (appel UTL_FILE comme avant migration)
    v_file := UTL_FILE.FOPEN('DATA_EXPORT', 'test_migration_' || USER || '.txt', 'R');
    UTL_FILE.GET_LINE(v_file, v_line);
    UTL_FILE.FCLOSE(v_file);

    IF v_line = v_test THEN
        DBMS_OUTPUT.PUT_LINE('‚úÖ Lecture OK - Contenu v√©rifi√©');
    ELSE
        DBMS_OUTPUT.PUT_LINE('‚ùå Contenu diff√©rent !');
    END IF;

    -- Nettoyage
    UTL_FILE.FREMOVE('DATA_EXPORT', 'test_migration_' || USER || '.txt');
    DBMS_OUTPUT.PUT_LINE('‚úÖ Suppression OK');

    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('üéâ MIGRATION R√âUSSIE - Le synonyme fonctionne !');
    DBMS_OUTPUT.PUT_LINE('Le code UTL_FILE existant fonctionne sans modification.');

EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('‚ùå Erreur pour ' || USER || ' : ' || SQLERRM);
END;
/</code></pre>
        </div>
    </section>

    <!-- Section DB Links - Identification et Migration -->
    <section>
        <h2>üîó Audit des DB Links (Database Links)</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>IMPORTANT :</strong> Les DB Links existants ne fonctionneront pas sur ExaCC !<br>
                Ils utilisent TCP/1521 alors qu'ExaCC requiert mTLS/TCPS/1522 avec certificats.
            </div>
        </div>

        <h3>Pourquoi les DB Links ne marchent pas sur ExaCC ?</h3>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>On-Premise (Avant)</th>
                    <th>ExaCC (Apres)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Protocole</td>
                    <td>TCP (non chiffre)</td>
                    <td>TCPS (SSL/TLS)</td>
                </tr>
                <tr>
                    <td>Port</td>
                    <td>1521</td>
                    <td>1522</td>
                </tr>
                <tr>
                    <td>Authentification</td>
                    <td>User/Password simple</td>
                    <td>mTLS + Certificats</td>
                </tr>
                <tr>
                    <td>tnsnames.ora</td>
                    <td>Fichier sur le serveur</td>
                    <td>Dans le Wallet (non modifiable)</td>
                </tr>
                <tr>
                    <td>Methode de creation</td>
                    <td>CREATE DATABASE LINK</td>
                    <td>DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK</td>
                </tr>
            </tbody>
        </table>

        <h3>Script 1 : Identifier tous les DB Links existants</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Lister tous les DB Links</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- AUDIT DB LINKS - Identifier tous les DB Links existants
-- ============================================================
-- Executer en tant que DBA ou utilisateur avec privileges adequats

-- 1. Lister TOUS les DB Links de la base
SELECT
    owner,
    db_link AS nom_dblink,
    username AS user_distant,
    host AS chaine_connexion,
    created AS date_creation
FROM dba_db_links
ORDER BY owner, db_link;

-- 2. Lister les DB Links de l'utilisateur courant
SELECT
    db_link AS nom_dblink,
    username AS user_distant,
    host AS chaine_connexion,
    created AS date_creation
FROM user_db_links
ORDER BY db_link;

-- 3. Compter les DB Links par owner
SELECT
    owner,
    COUNT(*) AS nb_dblinks
FROM dba_db_links
GROUP BY owner
ORDER BY nb_dblinks DESC;</code></pre>
        </div>

        <h3>Script 2 : Identifier les objets qui utilisent ces DB Links</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Dependances des DB Links</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- Identifier les objets PL/SQL qui utilisent des DB Links
-- ============================================================

-- 1. Via les dependances Oracle
SELECT
    d.owner AS schema_owner,
    d.name AS object_name,
    d.type AS object_type,
    d.referenced_link_name AS dblink_utilise
FROM dba_dependencies d
WHERE d.referenced_link_name IS NOT NULL
ORDER BY d.owner, d.name;

-- 2. Recherche dans le code source (plus exhaustif)
SELECT DISTINCT
    owner,
    name AS object_name,
    type AS object_type,
    '@' || REGEXP_SUBSTR(UPPER(text), '@([A-Z0-9_]+)', 1, 1, NULL, 1) AS dblink_probable
FROM dba_source
WHERE UPPER(text) LIKE '%@%'
  AND REGEXP_LIKE(text, '@[A-Za-z0-9_]+')
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
ORDER BY owner, name;

-- 3. Resume : Impact par DB Link
SELECT
    d.referenced_link_name AS dblink_name,
    COUNT(DISTINCT d.owner || '.' || d.name) AS nb_objets_impactes,
    LISTAGG(DISTINCT d.type, ', ') WITHIN GROUP (ORDER BY d.type) AS types_objets
FROM dba_dependencies d
WHERE d.referenced_link_name IS NOT NULL
GROUP BY d.referenced_link_name
ORDER BY nb_objets_impactes DESC;</code></pre>
        </div>

        <h3>Script 3 : Migration d'un DB Link vers ExaCC</h3>
        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Sur ExaCC :</strong> Utilisez DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK<br>
                Le tnsnames.ora est gere automatiquement (dans le Wallet).
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Exemple de migration DB Link</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- MIGRATION DB LINK : On-Premise vers ExaCC
-- ============================================================

-- Exemple : DB Link Q08449A qui pointait vers une autre instance
-- AVANT (On-Premise) - NE FONCTIONNERA PAS SUR EXACC :
/*
CREATE DATABASE LINK "Q08449A"
   CONNECT TO "BANKREC" IDENTIFIED BY "password"
   USING '(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=S01VL9975523)(PORT=1521))
          (CONNECT_DATA=(SERVER=DEDICATED)(SID=Q08449AP10)))';
*/

-- APRES (ExaCC) - A EXECUTER SUR EXACC :

-- Etape 1 : Supprimer l'ancien DB Link (s'il existe)
DROP DATABASE LINK Q08449A;

-- Etape 2 : Creer le credential pour l'authentification
BEGIN
    DBMS_CLOUD.CREATE_CREDENTIAL(
        credential_name => 'CRED_Q08449A',
        username        => 'BANKREC',
        password        => 'NouveauMotDePasse'
    );
END;
/

-- Etape 3 : Creer le nouveau DB Link avec DBMS_CLOUD_ADMIN
BEGIN
    DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK(
        db_link_name        => 'Q08449A',
        hostname            => 'exacc-q08449a-scan.oraclecloud.com',  -- Nouveau hostname ExaCC
        port                => 1522,                                   -- Port mTLS
        service_name        => 'Q08449A_HIGH.adb.oraclecloud.com',    -- Service name ExaCC
        ssl_server_dn_match => TRUE,
        credential_name     => 'CRED_Q08449A'
    );
END;
/

-- Etape 4 : Tester le DB Link
SELECT * FROM dual@Q08449A;

-- Etape 5 : Verifier les objets dependants
SELECT owner, name, type
FROM dba_dependencies
WHERE referenced_link_name = 'Q08449A';</code></pre>
        </div>

        <div class="alert alert-warning">
            <span class="alert-icon">üìã</span>
            <div>
                <strong>Checklist DB Links :</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li>Lister tous les DB Links avec le script 1</li>
                    <li>Identifier les objets dependants avec le script 2</li>
                    <li>Obtenir les nouveaux hostnames ExaCC aupres des admins OCI</li>
                    <li>Recreer chaque DB Link avec DBMS_CLOUD_ADMIN</li>
                    <li>Tester chaque DB Link et ses objets dependants</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Section Incompatibilites OCI -->
    <section>
        <h2>‚ö†Ô∏è Audit des Incompatibilites OCI/ExaCC</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">üö®</span>
            <div>
                <strong>Elements NON compatibles avec OCI/ExaCC !</strong><br>
                Ces fonctionnalites Oracle ne fonctionnent pas ou differemment sur ExaCC.
            </div>
        </div>

        <h3>Tableau des incompatibilites</h3>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>On-Premise</th>
                    <th>ExaCC/OCI</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>UTL_FILE</strong></td>
                    <td>Filesystem serveur</td>
                    <td>Non accessible</td>
                    <td>DBMS_CLOUD + Object Storage (ce guide)</td>
                </tr>
                <tr>
                    <td><strong>DB Links</strong></td>
                    <td>TCP/1521</td>
                    <td>mTLS/1522</td>
                    <td>DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK</td>
                </tr>
                <tr>
                    <td><strong>DIRECTORY</strong></td>
                    <td>Pointe vers filesystem</td>
                    <td>Filesystem non accessible</td>
                    <td>Object Storage via DBMS_CLOUD</td>
                </tr>
                <tr>
                    <td><strong>UTL_SMTP</strong></td>
                    <td>Serveur SMTP interne</td>
                    <td>Reseau restreint</td>
                    <td>OCI Email Delivery / APEX_MAIL</td>
                </tr>
                <tr>
                    <td><strong>UTL_TCP</strong></td>
                    <td>Connexions TCP directes</td>
                    <td>Bloque</td>
                    <td>OCI Functions / API Gateway</td>
                </tr>
                <tr>
                    <td><strong>UTL_HTTP</strong></td>
                    <td>Appels HTTP directs</td>
                    <td>ACL requises</td>
                    <td>DBMS_CLOUD.SEND_REQUEST + ACL</td>
                </tr>
                <tr>
                    <td><strong>DBMS_SCHEDULER (External)</strong></td>
                    <td>Scripts OS externes</td>
                    <td>Non supporte</td>
                    <td>OCI Functions / PL/SQL pur</td>
                </tr>
                <tr>
                    <td><strong>OS Authentication</strong></td>
                    <td>Utilisateurs OS</td>
                    <td>Non supporte</td>
                    <td>Authentication base de donnees</td>
                </tr>
                <tr>
                    <td><strong>Bequeath</strong></td>
                    <td>Connexion locale sans listener</td>
                    <td>Non supporte</td>
                    <td>Connexion TNS standard</td>
                </tr>
            </tbody>
        </table>

        <h3>Script d'audit global des incompatibilites</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Audit complet des incompatibilites OCI</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- AUDIT GLOBAL DES INCOMPATIBILITES OCI/EXACC
-- ============================================================
-- Executer en tant que DBA avant la migration

SET SERVEROUTPUT ON
SET LINESIZE 200

PROMPT
PROMPT ========================================
PROMPT 1. AUDIT UTL_FILE
PROMPT ========================================

SELECT
    owner,
    name AS object_name,
    type AS object_type,
    COUNT(*) AS nb_references
FROM dba_source
WHERE UPPER(text) LIKE '%UTL_FILE%'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
GROUP BY owner, name, type
ORDER BY owner, name;

PROMPT
PROMPT ========================================
PROMPT 2. AUDIT DIRECTORY (Repertoires)
PROMPT ========================================

SELECT
    directory_name,
    directory_path,
    origin_con_id
FROM dba_directories
WHERE directory_name NOT LIKE 'ORACLE%'
  AND directory_name NOT LIKE 'DATA_PUMP%'
ORDER BY directory_name;

PROMPT
PROMPT ========================================
PROMPT 3. AUDIT DB LINKS
PROMPT ========================================

SELECT
    owner,
    db_link,
    username,
    host
FROM dba_db_links
ORDER BY owner, db_link;

PROMPT
PROMPT ========================================
PROMPT 4. AUDIT UTL_SMTP (Emails)
PROMPT ========================================

SELECT
    owner,
    name AS object_name,
    type AS object_type
FROM dba_dependencies
WHERE referenced_name = 'UTL_SMTP'
  AND owner NOT IN ('SYS', 'SYSTEM')
ORDER BY owner, name;

PROMPT
PROMPT ========================================
PROMPT 5. AUDIT UTL_TCP (Connexions TCP)
PROMPT ========================================

SELECT
    owner,
    name AS object_name,
    type AS object_type
FROM dba_dependencies
WHERE referenced_name = 'UTL_TCP'
  AND owner NOT IN ('SYS', 'SYSTEM')
ORDER BY owner, name;

PROMPT
PROMPT ========================================
PROMPT 6. AUDIT UTL_HTTP (Appels HTTP)
PROMPT ========================================

SELECT
    owner,
    name AS object_name,
    type AS object_type
FROM dba_dependencies
WHERE referenced_name = 'UTL_HTTP'
  AND owner NOT IN ('SYS', 'SYSTEM')
ORDER BY owner, name;

PROMPT
PROMPT ========================================
PROMPT 7. AUDIT DBMS_SCHEDULER (Jobs externes)
PROMPT ========================================

SELECT
    owner,
    job_name,
    job_type,
    program_name,
    state
FROM dba_scheduler_jobs
WHERE job_type = 'EXECUTABLE'
   OR program_name IN (
       SELECT program_name FROM dba_scheduler_programs
       WHERE program_type = 'EXECUTABLE'
   )
ORDER BY owner, job_name;

PROMPT
PROMPT ========================================
PROMPT 8. AUDIT AUTHENTIFICATION OS
PROMPT ========================================

SELECT
    username,
    authentication_type,
    account_status
FROM dba_users
WHERE authentication_type = 'EXTERNAL'
ORDER BY username;

PROMPT
PROMPT ========================================
PROMPT 9. AUDIT ACL (Network Access Control)
PROMPT ========================================

SELECT
    host,
    lower_port,
    upper_port,
    acl
FROM dba_network_acls
ORDER BY host;

PROMPT
PROMPT ========================================
PROMPT 10. RESUME - COMPTAGE DES INCOMPATIBILITES
PROMPT ========================================

SELECT 'UTL_FILE' AS element, COUNT(DISTINCT owner || '.' || name) AS nb_objets
FROM dba_source WHERE UPPER(text) LIKE '%UTL_FILE%'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM', 'XDB', 'WMSYS')
UNION ALL
SELECT 'DB Links', COUNT(*) FROM dba_db_links
UNION ALL
SELECT 'DIRECTORY', COUNT(*) FROM dba_directories
  WHERE directory_name NOT LIKE 'ORACLE%' AND directory_name NOT LIKE 'DATA_PUMP%'
UNION ALL
SELECT 'UTL_SMTP', COUNT(*) FROM dba_dependencies
  WHERE referenced_name = 'UTL_SMTP' AND owner NOT IN ('SYS', 'SYSTEM')
UNION ALL
SELECT 'UTL_TCP', COUNT(*) FROM dba_dependencies
  WHERE referenced_name = 'UTL_TCP' AND owner NOT IN ('SYS', 'SYSTEM')
UNION ALL
SELECT 'UTL_HTTP', COUNT(*) FROM dba_dependencies
  WHERE referenced_name = 'UTL_HTTP' AND owner NOT IN ('SYS', 'SYSTEM')
UNION ALL
SELECT 'SCHEDULER External', COUNT(*) FROM dba_scheduler_jobs WHERE job_type = 'EXECUTABLE'
UNION ALL
SELECT 'OS Auth Users', COUNT(*) FROM dba_users WHERE authentication_type = 'EXTERNAL'
ORDER BY nb_objets DESC;</code></pre>
        </div>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Actions recommandees :</strong>
                <ol style="margin: 10px 0 0 20px;">
                    <li>Executer le script d'audit ci-dessus AVANT la migration</li>
                    <li>Pour chaque element identifie, planifier la solution de remplacement</li>
                    <li>Tester les solutions sur un environnement de dev/test</li>
                    <li>Documenter les changements pour les equipes de dev</li>
                </ol>
            </div>
        </div>
    </section>

    <!-- Section Architecture Entreprise WildFly/CFT/Control-M -->
    <section>
        <h2>üè¢ Architecture Entreprise - Impacts Migration</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üîç</span>
            <div>
                <strong>Vue d'ensemble de l'architecture applicative</strong><br>
                Cette section decrit l'architecture typique des applications entreprise et les impacts de la migration ExaCC sur chaque composant.
            </div>
        </div>

        <h3>Schema d'architecture</h3>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; font-family: monospace; margin: 15px 0; overflow-x: auto;">
<pre style="background: transparent; padding: 0; margin: 0; color: #333;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           ARCHITECTURE APPLICATIVE                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Utilisateurs  ‚îÇ
    ‚îÇ   (Navigateur)  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ HTTPS
             ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  WildFly Server ‚îÇ  ‚óÑ‚îÄ‚îÄ Presentation Web (Java EE)
    ‚îÇ   (Port 8080)   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ Appels internes
             ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Server Appli   ‚îÇ      ‚îÇ         Control-M             ‚îÇ
    ‚îÇ  (Metier/DAO)   ‚îÇ      ‚îÇ    (Ordonnanceur Jobs)        ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ                              ‚îÇ
             ‚îÇ JDBC/TNS                     ‚îÇ Declenchement
             ‚îÇ mTLS:1522                    ‚ñº
             ‚îÇ                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
             ‚îÇ                   ‚îÇ          CFT              ‚îÇ
             ‚îÇ                   ‚îÇ   (Transfert Fichiers)    ‚îÇ
             ‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ                                  ‚îÇ
             ‚îÇ                                  ‚îÇ Fichiers XML
             ‚ñº                                  ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                    Oracle Database                       ‚îÇ
    ‚îÇ                       (ExaCC)                            ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
    ‚îÇ  ‚îÇ   DB Links      ‚îÇ    ‚îÇ   UTL_FILE_WRAPPER          ‚îÇ ‚îÇ
    ‚îÇ  ‚îÇ (vers autres BD)‚îÇ    ‚îÇ   (Integration XML/CFT)     ‚îÇ ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
        </div>

        <h3>Tableau des impacts par composant</h3>
        <table>
            <thead>
                <tr>
                    <th>Composant</th>
                    <th>Role</th>
                    <th>Impact Migration ExaCC</th>
                    <th>Action Requise</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>WildFly Server</strong></td>
                    <td>Presentation web, serveur d'applications Java EE</td>
                    <td>Connexion JDBC vers ExaCC via mTLS</td>
                    <td>
                        <span class="tag tag-attente">Config Wallet</span><br>
                        Deployer le Wallet sur le serveur WildFly.<br>
                        Modifier les datasources JDBC (port 1522, SSL).
                    </td>
                </tr>
                <tr>
                    <td><strong>Server Appli</strong></td>
                    <td>Logique metier, couche DAO, appels DB Links</td>
                    <td>
                        - Connexion JDBC mTLS<br>
                        - DB Links via DBMS_CLOUD_ADMIN
                    </td>
                    <td>
                        <span class="tag tag-attente">Config Wallet</span><br>
                        <span class="tag tag-admin">Migration DB Links</span><br>
                        Voir section "DB Links vers ExaCC".
                    </td>
                </tr>
                <tr>
                    <td><strong>Control-M</strong></td>
                    <td>Ordonnanceur de jobs batch</td>
                    <td>Aucun impact direct (n'execute pas de SQL)</td>
                    <td>
                        <span class="tag tag-toi">Aucune action</span><br>
                        Control-M appelle le Server Appli, pas la base directement.
                    </td>
                </tr>
                <tr>
                    <td><strong>CFT</strong></td>
                    <td>Transfert de fichiers XML vers le serveur</td>
                    <td>Les fichiers doivent etre accessibles pour UTL_FILE_WRAPPER</td>
                    <td>
                        <span class="tag tag-attente">Config Repertoire</span><br>
                        S'assurer que le repertoire CFT est accessible au DIRECTORY Oracle.
                    </td>
                </tr>
                <tr>
                    <td><strong>Integration XML (UTL_FILE)</strong></td>
                    <td>Lecture des fichiers XML en base</td>
                    <td>UTL_FILE remplace par UTL_FILE_WRAPPER</td>
                    <td>
                        <span class="tag tag-toi">Deja couvert</span><br>
                        Voir section "Solution UTL_FILE_WRAPPER".
                    </td>
                </tr>
                <tr>
                    <td><strong>DB Links (Server Appli)</strong></td>
                    <td>Connexion vers autres bases de donnees</td>
                    <td>Migration obligatoire vers DBMS_CLOUD_ADMIN</td>
                    <td>
                        <span class="tag tag-admin">Migration</span><br>
                        Voir section "DB Links vers ExaCC".
                    </td>
                </tr>
            </tbody>
        </table>

        <h3>Checklist Migration Architecture Entreprise</h3>
        <ul class="checklist">
            <li class="pending">
                <span class="step-number">1</span>
                <div>
                    <strong>Configuration WildFly</strong><br>
                    <small>Deployer le Wallet Oracle sur le serveur WildFly, configurer les datasources JDBC avec mTLS (port 1522).</small>
                </div>
            </li>
            <li class="pending">
                <span class="step-number">2</span>
                <div>
                    <strong>Configuration Server Appli</strong><br>
                    <small>Deployer le Wallet sur le Server Appli, mettre a jour les chaines de connexion JDBC.</small>
                </div>
            </li>
            <li class="pending">
                <span class="step-number">3</span>
                <div>
                    <strong>Migration DB Links</strong><br>
                    <small>Recreer tous les DB Links utilises par le Server Appli avec DBMS_CLOUD_ADMIN (voir script d'audit).</small>
                </div>
            </li>
            <li class="pending">
                <span class="step-number">4</span>
                <div>
                    <strong>Configuration CFT/Repertoires</strong><br>
                    <small>Verifier que le repertoire de depot CFT est accessible au DIRECTORY Oracle pour UTL_FILE_WRAPPER.</small>
                </div>
            </li>
            <li class="pending">
                <span class="step-number">5</span>
                <div>
                    <strong>Deploiement UTL_FILE_WRAPPER</strong><br>
                    <small>Creer le package UTL_FILE_WRAPPER et le PUBLIC SYNONYM pour l'integration des fichiers XML.</small>
                </div>
            </li>
            <li class="pending">
                <span class="step-number">6</span>
                <div>
                    <strong>Tests d'integration</strong><br>
                    <small>Tester le flux complet : Control-M ‚Üí CFT ‚Üí XML ‚Üí UTL_FILE_WRAPPER ‚Üí Base ExaCC.</small>
                </div>
            </li>
        </ul>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Points cles :</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li><strong>Control-M</strong> n'a pas besoin de modification (n'accede pas directement a la base)</li>
                    <li><strong>WildFly et Server Appli</strong> necessitent le deploiement du Wallet Oracle</li>
                    <li><strong>DB Links</strong> du Server Appli doivent etre migres via DBMS_CLOUD_ADMIN</li>
                    <li><strong>CFT ‚Üí XML ‚Üí UTL_FILE</strong> fonctionne avec UTL_FILE_WRAPPER (transparent)</li>
                </ul>
            </div>
        </div>
    </section>

</div>

<!-- ==================== ONGLET POST-MIGRATION ==================== -->
<div id="postmigration" class="tab-content">

    <section style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border: 2px solid #4caf50; margin-top: 20px;">
        <h2>‚úÖ Actions Post-Migration ExaCC</h2>
        <p style="margin: 15px 0;">Checklist des actions a realiser apres la migration vers ExaCC pour les applications entreprise (Accurate, etc.)</p>
    </section>

    <!-- SECTION 1: WALLET -->
    <section>
        <h2>1. Deploiement du Wallet Oracle</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">üîê</span>
            <div>
                <strong>OBLIGATOIRE :</strong> Le Wallet est indispensable pour la connexion mTLS sur ExaCC (port 1522).
                Sans Wallet, aucune connexion possible !
            </div>
        </div>

        <h3>Qu'est-ce que le Wallet ?</h3>
        <p>C'est un <strong>dossier securise</strong> contenant des fichiers de securite pour se connecter a la base de donnees cloud :</p>

        <div class="code-container">
            <div class="code-header">
                <span>Contenu du dossier Wallet</span>
            </div>
            <pre><code>üìÅ Wallet_MonExaCC/
   ‚îú‚îÄ‚îÄ cwallet.sso      ‚Üê Certificats SSL (le plus important)
   ‚îú‚îÄ‚îÄ tnsnames.ora     ‚Üê Noms des services de connexion
   ‚îú‚îÄ‚îÄ sqlnet.ora       ‚Üê Configuration reseau
   ‚îî‚îÄ‚îÄ ewallet.p12      ‚Üê Cle privee (format PKCS12)</code></pre>
        </div>

        <h3>Pourquoi c'est obligatoire sur ExaCC ?</h3>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>On-Premise (Avant)</th>
                    <th>ExaCC (Apres)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Type de connexion</td>
                    <td>Connexion simple TCP</td>
                    <td>Connexion <strong>chiffree SSL/TLS</strong></td>
                </tr>
                <tr>
                    <td>Port</td>
                    <td>1521</td>
                    <td><strong>1522</strong> (mTLS)</td>
                </tr>
                <tr>
                    <td>Certificat</td>
                    <td>Pas de certificat</td>
                    <td><strong>Certificat obligatoire</strong></td>
                </tr>
                <tr>
                    <td>Commande connexion</td>
                    <td><code>sqlplus user/pwd@host:1521/service</code></td>
                    <td><code>sqlplus user/pwd@service_high</code> (via Wallet)</td>
                </tr>
            </tbody>
        </table>

        <h3>Analogie simple</h3>
        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                Imagine le Wallet comme une <strong>carte d'acces securisee</strong> :<br><br>
                <strong>Avant</strong> (on-premise) : Tu donnais juste ton nom et mot de passe a la porte<br>
                <strong>Apres</strong> (ExaCC) : Tu dois presenter ta <strong>carte magnetique</strong> (le Wallet) + ton mot de passe<br><br>
                Sans la carte (Wallet), meme avec le bon mot de passe, la porte reste fermee.
            </div>
        </div>

        <h3>Comment ca marche ?</h3>

        <!-- SCH√âMA D'ARCHITECTURE D√âTAILL√â -->
        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 25px; border-radius: 12px; margin: 20px 0; border: 2px solid #2196f3;">
            <h4 style="color: #1565c0; margin-top: 0; text-align: center; font-size: 1.2em;">üìä Architecture Compl√®te du Wallet</h4>

            <!-- √âTAPE 1: T√©l√©chargement -->
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #ff9800;">
                <div style="font-weight: bold; color: #e65100; margin-bottom: 10px;">
                    üî∏ √âTAPE 1 : T√©l√©chargement du Wallet depuis OCI
                </div>
                <div style="font-family: monospace; background: #fafafa; padding: 15px; border-radius: 5px;">
<pre style="margin: 0;">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ORACLE CLOUD INFRASTRUCTURE (OCI)               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ  ExaCC Console - Database Details              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  [üîê Download Wallet]  ‚Üê Clic DBA              ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ                                                 ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  G√©n√®re:                                        ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  üì¶ Wallet_ExaCC_20250125.zip (~50 KB)        ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚îÇ T√©l√©chargement HTTPS
                         ‚ñº
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ üë®‚Äçüíº DBA PC   ‚îÇ
                  ‚îÇ Wallet.zip  ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
                </div>
            </div>

            <!-- √âTAPE 2: D√©ploiement -->
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #4caf50;">
                <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px;">
                    üî∏ √âTAPE 2 : D√©ploiement sur Serveur Applicatif
                </div>
                <div style="font-family: monospace; background: #fafafa; padding: 15px; border-radius: 5px;">
<pre style="margin: 0;">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         SERVEUR APPLICATIF (On-Premise ou VM Cloud)          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  üìÇ /opt/oracle/wallet/  (ou C:\oracle\wallet\)              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ üîê cwallet.sso         ‚Üê Certificats SSL Client         ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Contient le certificat public d'ExaCC                ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Permet l'authentification mutuelle (mTLS)            ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Format Oracle SSO (Single Sign-On)                   ‚îÇ
‚îÇ  ‚îÇ                                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ üîë ewallet.p12          ‚Üê Cl√© Priv√©e                    ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Format PKCS#12 (standard cryptographique)            ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Utilis√© pour d√©chiffrer les donn√©es                  ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Prot√©g√© par mot de passe (optionnel)                 ‚îÇ
‚îÇ  ‚îÇ                                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ üìù tnsnames.ora         ‚Üê Services de Connexion         ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ service_high    = Haute disponibilit√©                ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ service_medium  = Performance moyenne                ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ service_low     = Requ√™tes batch                     ‚îÇ
‚îÇ  ‚îÇ    ‚Ä¢ Contient hostname ExaCC, port 1522, protocole TCPS   ‚îÇ
‚îÇ  ‚îÇ                                                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ ‚öôÔ∏è sqlnet.ora           ‚Üê Configuration SSL             ‚îÇ
‚îÇ       ‚Ä¢ WALLET_LOCATION = (SOURCE=(METHOD=FILE)(...))        ‚îÇ
‚îÇ       ‚Ä¢ SSL_CLIENT_AUTHENTICATION = TRUE                     ‚îÇ
‚îÇ       ‚Ä¢ SSL_VERSION = 1.2                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
                </div>
            </div>

            <!-- √âTAPE 3: Configuration -->
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #9c27b0;">
                <div style="font-weight: bold; color: #6a1b9a; margin-bottom: 10px;">
                    üî∏ √âTAPE 3 : Configuration Environnement
                </div>
                <div style="font-family: monospace; background: #fafafa; padding: 15px; border-radius: 5px;">
<pre style="margin: 0;">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CONFIGURATION SYST√àME                                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  Linux/Unix:                                                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                   ‚îÇ
‚îÇ  $ export TNS_ADMIN=/opt/oracle/wallet                       ‚îÇ
‚îÇ  $ export ORACLE_HOME=/opt/oracle/instantclient_19_8         ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Ajouter dans: /etc/profile ou ~/.bash_profile               ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Windows:                                                     ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                     ‚îÇ
‚îÇ  > set TNS_ADMIN=C:\oracle\wallet                            ‚îÇ
‚îÇ  > setx TNS_ADMIN "C:\oracle\wallet"  (persistant)           ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Ou via: Panneau de configuration ‚Üí Variables syst√®me        ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
                </div>
            </div>

            <!-- √âTAPE 4: Connexion avec D√©tails Techniques -->
            <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #2196f3;">
                <div style="font-weight: bold; color: #1565c0; margin-bottom: 10px;">
                    üî∏ √âTAPE 4 : Flux de Connexion mTLS (Mutual TLS)
                </div>
                <div style="font-family: monospace; background: #fafafa; padding: 15px; border-radius: 5px;">
<pre style="margin: 0;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         FLUX DE CONNEXION D√âTAILL√â                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ   APPLICATION    ‚îÇ              ‚îÇ  WALLET LOCAL   ‚îÇ              ‚îÇ  ORACLE ExaCC  ‚îÇ
  ‚îÇ                  ‚îÇ              ‚îÇ  (Serveur App)  ‚îÇ              ‚îÇ   (OCI Cloud)  ‚îÇ
  ‚îÇ  - Accurate      ‚îÇ              ‚îÇ                 ‚îÇ              ‚îÇ                ‚îÇ
  ‚îÇ  - WildFly       ‚îÇ              ‚îÇ /opt/oracle/    ‚îÇ              ‚îÇ  Hostname:     ‚îÇ
  ‚îÇ  - Batch Jobs    ‚îÇ              ‚îÇ  wallet/        ‚îÇ              ‚îÇ  xxx.oraclecloud‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ 1Ô∏è‚É£ Demande connexion             ‚îÇ                                ‚îÇ
           ‚îÇ    jdbc:oracle:thin:@service_high‚îÇ                               ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ 2Ô∏è‚É£ Lecture Wallet              ‚îÇ
           ‚îÇ                                 ‚îÇ   - cwallet.sso (certificat)   ‚îÇ
           ‚îÇ                                 ‚îÇ   - ewallet.p12 (cl√© priv√©e)   ‚îÇ
           ‚îÇ                                 ‚îÇ   - tnsnames.ora (service)     ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ 3Ô∏è‚É£ √âtablir connexion TLS       ‚îÇ
           ‚îÇ                                 ‚îÇ    Port 1522 (TCPS)            ‚îÇ
           ‚îÇ                                 ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ    4Ô∏è‚É£ HANDSHAKE SSL/TLS        ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ a) Client Hello          ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂ Certificat client      ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ    (cwallet.sso)         ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ                          ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ b) Server Hello          ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ‚óÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ  Certificat serveur    ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ                          ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ c) V√©rification mutuelle ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂ Signature avec cl√©     ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ    priv√©e (ewallet.p12)  ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ                          ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ d) ‚úÖ Authentification OK ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ    Session chiffr√©e TLS  ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îÇ    √©tablie               ‚îÇ ‚îÇ
           ‚îÇ                                 ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ 5Ô∏è‚É£ Authentification BDD        ‚îÇ
           ‚îÇ                                 ‚îÇ    USER/PASSWORD               ‚îÇ
           ‚îÇ                                 ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ 6Ô∏è‚É£ ‚úÖ Connexion √©tablie         ‚îÇ
           ‚îÇ                                 ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ                                 ‚îÇ    Session ID: 12345           ‚îÇ
           ‚îÇ 7Ô∏è‚É£ Retour connexion OK           ‚îÇ                                ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                                ‚îÇ
           ‚îÇ   Connection Pool Ready         ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ 8Ô∏è‚É£ Ex√©cution requ√™tes SQL        ‚îÇ                                ‚îÇ
           ‚îÇ   (Donn√©es chiffr√©es TLS 1.2)   ‚îÇ                                ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ   SELECT * FROM ...             ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ   R√©sultats (chiffr√©s)          ‚îÇ                                ‚îÇ
           ‚îÇ                                 ‚îÇ                                ‚îÇ

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîê S√âCURIT√â mTLS (Mutual TLS)                                                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚úì Authentification BIDIRECTIONNELLE :                                         ‚îÇ
‚îÇ    - Le CLIENT v√©rifie le certificat du SERVEUR (ExaCC)                        ‚îÇ
‚îÇ    - Le SERVEUR v√©rifie le certificat du CLIENT (Wallet)                       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ  ‚úì Chiffrement TLS 1.2/1.3 de bout en bout                                     ‚îÇ
‚îÇ  ‚úì Impossible de se connecter sans le Wallet (m√™me avec bon USER/PASSWORD)     ‚îÇ
‚îÇ  ‚úì Protection contre Man-in-the-Middle (MITM)                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
                </div>
            </div>

            <!-- EXPLICATION D√âTAILL√âE DU HANDSHAKE -->
            <div style="background: #e8f5e9; padding: 25px; border-radius: 8px; margin: 20px 0; border: 3px solid #4caf50;">
                <h4 style="color: #2e7d32; margin-top: 0; font-size: 1.3em;">
                    ü§ù EXPLICATION D√âTAILL√âE : Le HANDSHAKE SSL/TLS (√âtape par √âtape)
                </h4>

                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
                    <p style="margin: 0 0 15px 0; line-height: 1.8; color: #333; font-size: 1.05em;">
                        Le <strong>HANDSHAKE</strong> est la "poign√©e de main" entre le client (votre serveur applicatif)
                        et le serveur (ExaCC) pour √©tablir une connexion s√©curis√©e. C'est un processus d'√©change de messages
                        qui permet de :
                    </p>
                    <ul style="margin: 10px 0 15px 20px; line-height: 1.8; color: #333;">
                        <li>‚úÖ <strong>V√©rifier l'identit√©</strong> des deux parties (authentification mutuelle)</li>
                        <li>‚úÖ <strong>N√©gocier les algorithmes</strong> de chiffrement √† utiliser</li>
                        <li>‚úÖ <strong>√âchanger des cl√©s</strong> de session pour chiffrer les donn√©es</li>
                        <li>‚úÖ <strong>√âtablir un canal s√©curis√©</strong> avant d'envoyer les donn√©es sensibles</li>
                    </ul>
                </div>

                <!-- PHASE 1 : Client Hello -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #2196f3;">
                    <h5 style="color: #1565c0; margin: 0 0 15px 0; font-size: 1.15em;">
                        üì§ PHASE 1 : Client Hello (Le client se pr√©sente)
                    </h5>

                    <div style="background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <p style="margin: 0 0 10px 0; font-weight: bold; color: #1565c0;">Que fait le client ?</p>
                        <p style="margin: 0 0 10px 0; line-height: 1.8;">
                            Le serveur applicatif (client) envoie un message "Hello" √† ExaCC contenant :
                        </p>
                        <ul style="margin: 5px 0 0 20px; line-height: 1.8;">
                            <li><strong>Version TLS</strong> support√©e (ex: TLS 1.2, TLS 1.3)</li>
                            <li><strong>Liste des suites de chiffrement</strong> (cipher suites) support√©es<br>
                                <code style="background: white; padding: 2px 6px; border-radius: 3px; font-size: 0.9em;">
                                    Ex: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
                                </code>
                            </li>
                            <li><strong>Nombre al√©atoire</strong> (Client Random) - utilis√© plus tard pour g√©n√©rer les cl√©s</li>
                            <li><strong>Session ID</strong> (pour r√©utiliser une session existante si possible)</li>
                            <li><strong>Extensions</strong> (SNI - Server Name Indication, etc.)</li>
                        </ul>
                    </div>

                    <div style="background: #1e88e5; color: white; padding: 12px; border-radius: 5px; margin: 10px 0; font-family: monospace; font-size: 0.95em;">
                        üì® Message envoy√© : "Bonjour ExaCC ! Je supporte TLS 1.2/1.3, voici mes algorithmes..."
                    </div>
                </div>

                <!-- PHASE 2 : Server Hello -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #ff9800;">
                    <h5 style="color: #e65100; margin: 0 0 15px 0; font-size: 1.15em;">
                        üì• PHASE 2 : Server Hello (ExaCC r√©pond et envoie son certificat)
                    </h5>

                    <div style="background: #fff3e0; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <p style="margin: 0 0 10px 0; font-weight: bold; color: #e65100;">Que fait ExaCC ?</p>
                        <p style="margin: 0 0 10px 0; line-height: 1.8;">
                            ExaCC r√©pond avec plusieurs messages :
                        </p>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ffb74d;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">a) Server Hello</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li><strong>Version TLS choisie</strong> (celle qui est commune)</li>
                                <li><strong>Suite de chiffrement choisie</strong> parmi celles propos√©es par le client</li>
                                <li><strong>Nombre al√©atoire</strong> (Server Random)</li>
                                <li><strong>Session ID</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ffb74d;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">b) Certificate (Certificat du serveur)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li><strong>Certificat SSL d'ExaCC</strong> sign√© par une autorit√© de certification (CA)</li>
                                <li>Contient la <strong>cl√© publique d'ExaCC</strong></li>
                                <li>Contient l'identit√© d'ExaCC (nom de domaine, organisation, etc.)</li>
                                <li>Permet au client de <strong>v√©rifier l'identit√© du serveur</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ffb74d;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">c) Certificate Request (Demande de certificat client)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>‚ö†Ô∏è <strong>Sp√©cifique au mTLS</strong> (pas dans TLS simple)</li>
                                <li>ExaCC demande au client d'<strong>envoyer son certificat</strong></li>
                                <li>C'est l'authentification <strong>mutuelle</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ffb74d;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">d) Server Hello Done</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Message indiquant que le serveur a fini d'envoyer ses messages</li>
                                <li>C'est maintenant au tour du client de r√©pondre</li>
                            </ul>
                        </div>
                    </div>

                    <div style="background: #ff6f00; color: white; padding: 12px; border-radius: 5px; margin: 10px 0; font-family: monospace; font-size: 0.95em;">
                        üì® Message re√ßu : "J'utilise TLS 1.2 + AES-256. Voici mon certificat. Envoie-moi le tien !"
                    </div>
                </div>

                <!-- PHASE 3 : Client Certificate & Key Exchange -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #9c27b0;">
                    <h5 style="color: #6a1b9a; margin: 0 0 15px 0; font-size: 1.15em;">
                        üîê PHASE 3 : Client Certificate & Key Exchange (Le client s'authentifie)
                    </h5>

                    <div style="background: #f3e5f5; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <p style="margin: 0 0 10px 0; font-weight: bold; color: #6a1b9a;">Que fait le client ?</p>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">a) V√©rification du certificat serveur</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Le client v√©rifie que le certificat d'ExaCC est <strong>valide</strong></li>
                                <li>V√©rifie la <strong>signature de l'autorit√© de certification (CA)</strong></li>
                                <li>V√©rifie que le <strong>nom de domaine</strong> correspond</li>
                                <li>V√©rifie que le certificat n'est <strong>pas expir√©</strong></li>
                                <li>Si la v√©rification √©choue ‚Üí ‚ùå Connexion refus√©e</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">b) Certificate (Envoi du certificat client)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Le client envoie son <strong>certificat</strong> (extrait de <code>cwallet.sso</code>)</li>
                                <li>Contient la <strong>cl√© publique du client</strong></li>
                                <li>Permet √† ExaCC de v√©rifier l'identit√© du client</li>
                                <li><strong style="color: #c62828;">‚ö†Ô∏è La cl√© priv√©e reste sur le serveur applicatif !</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">c) Client Key Exchange (√âchange de cl√© de session)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Le client g√©n√®re une <strong>"Pre-Master Secret"</strong> (cl√© temporaire al√©atoire)</li>
                                <li>Chiffre cette cl√© avec la <strong>cl√© publique d'ExaCC</strong> (du certificat serveur)</li>
                                <li>Envoie cette cl√© chiffr√©e √† ExaCC</li>
                                <li>‚úÖ Seul ExaCC peut d√©chiffrer avec sa cl√© priv√©e</li>
                                <li>Cette cl√© servira √† <strong>g√©n√©rer les cl√©s de session sym√©triques</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">d) Certificate Verify (Preuve de possession de la cl√© priv√©e)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Le client <strong>signe</strong> tous les messages pr√©c√©dents du handshake</li>
                                <li>Utilise sa <strong>cl√© priv√©e</strong> (<code>ewallet.p12</code>) pour cr√©er la signature</li>
                                <li>Envoie la <strong>signature</strong> √† ExaCC</li>
                                <li>ExaCC <strong>v√©rifie</strong> la signature avec la cl√© publique du certificat client</li>
                                <li>‚úÖ Prouve que le client poss√®de bien la cl√© priv√©e correspondant au certificat</li>
                                <li><strong style="color: #2e7d32;">C'est ici que la cl√© priv√©e est utilis√©e (JAMAIS envoy√©e !)</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">e) Change Cipher Spec</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Le client indique qu'il va maintenant utiliser le <strong>chiffrement n√©goci√©</strong></li>
                                <li>Tous les messages suivants seront <strong>chiffr√©s</strong></li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #ba68c8;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">f) Finished</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Message <strong>chiffr√©</strong> contenant un hash de tous les messages du handshake</li>
                                <li>Permet de v√©rifier que le handshake n'a pas √©t√© alt√©r√©</li>
                            </ul>
                        </div>
                    </div>

                    <div style="background: #7b1fa2; color: white; padding: 12px; border-radius: 5px; margin: 10px 0; font-family: monospace; font-size: 0.95em;">
                        üì® Message envoy√© : "Ton certificat est OK. Voici le mien + preuve que j'ai la cl√© priv√©e !"
                    </div>
                </div>

                <!-- PHASE 4 : Server Finished -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #4caf50;">
                    <h5 style="color: #2e7d32; margin: 0 0 15px 0; font-size: 1.15em;">
                        ‚úÖ PHASE 4 : Server Finished (ExaCC confirme et √©tablit la connexion)
                    </h5>

                    <div style="background: #e8f5e9; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <p style="margin: 0 0 10px 0; font-weight: bold; color: #2e7d32;">Que fait ExaCC ?</p>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #81c784;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">a) V√©rification du certificat client</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>ExaCC v√©rifie le certificat client re√ßu</li>
                                <li>V√©rifie la signature de la CA</li>
                                <li>V√©rifie que le certificat est dans la liste autoris√©e</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #81c784;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">b) V√©rification de la signature (Certificate Verify)</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>ExaCC utilise la <strong>cl√© publique du certificat client</strong></li>
                                <li>V√©rifie la <strong>signature num√©rique</strong> envoy√©e par le client</li>
                                <li>Si valide ‚Üí ‚úÖ Le client poss√®de bien la cl√© priv√©e correspondante</li>
                                <li>Si invalide ‚Üí ‚ùå Connexion refus√©e</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #81c784;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">c) G√©n√©ration des cl√©s de session</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>ExaCC d√©chiffre le "Pre-Master Secret" avec sa cl√© priv√©e</li>
                                <li>Combine : <code>Pre-Master Secret + Client Random + Server Random</code></li>
                                <li>G√©n√®re les <strong>cl√©s de session sym√©triques</strong> (AES par exemple)</li>
                                <li>Ces cl√©s seront utilis√©es pour chiffrer toutes les donn√©es de la session</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #81c784;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">d) Change Cipher Spec</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>ExaCC indique qu'il passe en mode chiffr√©</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 5px; margin: 10px 0; border: 1px solid #81c784;">
                            <p style="margin: 0 0 8px 0; font-weight: bold;">e) Finished</p>
                            <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                                <li>Message chiffr√© confirmant que le handshake est termin√©</li>
                                <li>Contient un hash de tous les messages pour v√©rifier l'int√©grit√©</li>
                            </ul>
                        </div>
                    </div>

                    <div style="background: #2e7d32; color: white; padding: 12px; border-radius: 5px; margin: 10px 0; font-family: monospace; font-size: 0.95em;">
                        üì® Message re√ßu : "Ton certificat est valide ! Canal s√©curis√© √©tabli. Tu peux envoyer tes donn√©es."
                    </div>
                </div>

                <!-- R√âSULTAT FINAL -->
                <div style="background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%); color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h5 style="color: white; margin: 0 0 15px 0; font-size: 1.2em; text-align: center;">
                        üéâ HANDSHAKE TERMIN√â - CONNEXION S√âCURIS√âE √âTABLIE
                    </h5>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 5px;">
                        <p style="margin: 0 0 10px 0; font-weight: bold;">Ce qui a √©t√© accompli :</p>
                        <ul style="margin: 0 0 0 20px; line-height: 1.8;">
                            <li>‚úÖ <strong>Authentification mutuelle</strong> : Les deux parties ont prouv√© leur identit√©</li>
                            <li>‚úÖ <strong>Cl√©s de session g√©n√©r√©es</strong> : Chiffrement sym√©trique rapide (AES)</li>
                            <li>‚úÖ <strong>Canal s√©curis√©</strong> : Toutes les donn√©es seront chiffr√©es</li>
                            <li>‚úÖ <strong>Int√©grit√© garantie</strong> : Impossible de modifier les donn√©es en transit</li>
                        </ul>
                        <p style="margin: 15px 0 0 0; font-weight: bold; text-align: center; font-size: 1.1em;">
                            ‚Üí Maintenant l'application peut envoyer USER/PASSWORD de mani√®re s√©curis√©e
                        </p>
                    </div>
                </div>

                <!-- SCH√âMA R√âCAPITULATIF -->
                <div style="background: #263238; color: white; padding: 20px; border-radius: 8px; margin: 20px 0; font-family: monospace; font-size: 0.9em;">
                    <h5 style="color: #4db6ac; margin: 0 0 15px 0;">üìä SCH√âMA R√âCAPITULATIF DU HANDSHAKE mTLS</h5>
<pre style="margin: 0; color: white;">
CLIENT (Serveur Appli)                                    SERVEUR (ExaCC)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PHASE 1 : Client Hello                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   "Bonjour, je supporte TLS 1.2..."  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂
   + Version TLS, Cipher Suites
   + Client Random

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PHASE 2 : Server Hello + Certificate                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                       ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  "OK, TLS 1.2 + AES-256"
                                                                 + Server Random
                                                                 + Certificat Serveur
                                                                 + "Envoie ton certificat"

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PHASE 3 : Client Certificate + Proof                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   üìã V√©rification Certificat Serveur ‚úÖ

   "Voici mon certificat"             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂
   + Certificat Client (cl√© publique)
   + Pre-Master Secret (chiffr√©)
   + SIGNATURE (avec cl√© priv√©e üîë)
   + "Je passe en mode chiffr√©"

   ‚ö†Ô∏è  Cl√© priv√©e utilis√©e ICI
       mais JAMAIS envoy√©e !

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PHASE 4 : Server Finished                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                 üìã V√©rif Certificat Client ‚úÖ
                                                                 üìã V√©rif Signature ‚úÖ
                                                                 üîë G√©n√©ration cl√©s session
                                       ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  "Authentification OK ‚úÖ"
                                                                 + "Mode chiffr√© activ√©"

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úÖ CONNEXION S√âCURIS√âE √âTABLIE - Tunnel TLS actif                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

   Donn√©es chiffr√©es (USER/PASSWORD)  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂
                                       ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  Session √©tablie

   Requ√™tes SQL chiffr√©es             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂
                                       ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  R√©sultats chiffr√©s
</pre>
                </div>

                <!-- POINT CL√â -->
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #ffc107;">
                    <p style="margin: 0; color: #f57c00; font-weight: bold; font-size: 1.05em;">
                        üí° <strong>Point cl√© du HANDSHAKE :</strong><br><br>
                        Le handshake est comme un <strong>contr√¥le de s√©curit√© √† l'a√©roport</strong> :<br>
                        1Ô∏è‚É£ Vous montrez votre passeport (certificat)<br>
                        2Ô∏è‚É£ L'agent v√©rifie que c'est bien le v√¥tre (signature avec cl√© priv√©e)<br>
                        3Ô∏è‚É£ Une fois v√©rifi√©, vous pouvez passer (tunnel TLS √©tabli)<br>
                        4Ô∏è‚É£ Vous ne donnez JAMAIS votre passeport √† l'agent, vous le montrez juste !<br>
                        <br>
                        De m√™me, la <strong>cl√© priv√©e n'est jamais transmise</strong>, elle sert uniquement √†
                        <strong>prouver votre identit√©</strong> en cr√©ant une signature que le serveur peut v√©rifier.
                    </p>
                </div>
            </div>

            <!-- CLARIFICATION IMPORTANTE : Cl√© Priv√©e -->
            <div style="background: #ffebee; padding: 25px; border-radius: 8px; margin: 20px 0; border: 3px solid #e53935;">
                <h4 style="color: #c62828; margin-top: 0; font-size: 1.2em;">
                    ‚ö†Ô∏è CLARIFICATION IMPORTANTE : La cl√© priv√©e est-elle envoy√©e au serveur ExaCC ?
                </h4>

                <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
                    <h5 style="color: #d32f2f; margin-top: 0;">‚ùå NON ! La cl√© priv√©e NE QUITTE JAMAIS le serveur applicatif</h5>

                    <p style="margin: 15px 0; line-height: 1.8; color: #333;">
                        C'est un point crucial de la <strong>cryptographie √† cl√© publique</strong> (asym√©trique).
                        Voici ce qui se passe r√©ellement :
                    </p>

                    <div style="background: #2c3e50; padding: 15px; border-radius: 5px; margin: 15px 0; font-family: monospace;">
<pre style="margin: 0; color: white;">
üîë CRYPTOGRAPHIE ASYM√âTRIQUE : Cl√© Publique vs Cl√© Priv√©e
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üì¶ Wallet contient 2 √©l√©ments distincts :

   1Ô∏è‚É£ CERTIFICAT (dans cwallet.sso)
      ‚îú‚îÄ Contient la CL√â PUBLIQUE du client
      ‚îú‚îÄ Contient l'identit√© du client (DN, organisation, etc.)
      ‚îú‚îÄ Sign√© par une autorit√© de certification (CA)
      ‚îî‚îÄ ‚úÖ PEUT √™tre envoy√© au serveur (pas de risque)

   2Ô∏è‚É£ CL√â PRIV√âE (dans ewallet.p12)
      ‚îú‚îÄ Reste TOUJOURS sur le serveur applicatif
      ‚îú‚îÄ Utilis√©e UNIQUEMENT pour SIGNER des messages
      ‚îú‚îÄ Ne voyage JAMAIS sur le r√©seau
      ‚îî‚îÄ ‚ùå NE DOIT JAMAIS quitter le serveur applicatif
</pre>
                    </div>

                    <h5 style="color: #1565c0; margin-top: 20px;">üîê Comment fonctionne la signature num√©rique ?</h5>

                    <div style="background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #2196f3;">
                        <p style="margin: 0 0 10px 0;"><strong>√âtape par √©tape :</strong></p>
                        <ol style="margin: 10px 0; padding-left: 25px; line-height: 1.8;">
                            <li>
                                <strong>Client cr√©e un message</strong><br>
                                <code style="background: white; padding: 3px 8px; border-radius: 3px;">
                                    Message = "Je suis le serveur applicatif X"
                                </code>
                            </li>
                            <li style="margin-top: 10px;">
                                <strong>Client SIGNE le message avec sa cl√© priv√©e (ewallet.p12)</strong><br>
                                <code style="background: white; padding: 3px 8px; border-radius: 3px;">
                                    Signature = SIGN(Message, Cl√©_Priv√©e_Client)
                                </code><br>
                                <span style="color: #d32f2f;">‚ö†Ô∏è La cl√© priv√©e reste sur le serveur applicatif !</span>
                            </li>
                            <li style="margin-top: 10px;">
                                <strong>Client envoie √† ExaCC :</strong><br>
                                <code style="background: white; padding: 3px 8px; border-radius: 3px; display: block; margin-top: 5px;">
                                    ‚ûú Certificat (contient CL√â PUBLIQUE)<br>
                                    ‚ûú Message<br>
                                    ‚ûú Signature
                                </code><br>
                                <span style="color: #2e7d32;">‚úÖ La cl√© priv√©e n'est PAS envoy√©e !</span>
                            </li>
                            <li style="margin-top: 10px;">
                                <strong>ExaCC V√âRIFIE la signature avec la cl√© publique du certificat</strong><br>
                                <code style="background: white; padding: 3px 8px; border-radius: 3px;">
                                    VERIFY(Signature, Message, Cl√©_Publique_Client) == OK ‚úÖ
                                </code><br>
                                <span style="color: #1565c0;">‚ÑπÔ∏è ExaCC utilise la cl√© PUBLIQUE (dans le certificat) pour v√©rifier</span>
                            </li>
                            <li style="margin-top: 10px;">
                                <strong>Si la v√©rification r√©ussit :</strong><br>
                                <span style="color: #2e7d32;">
                                    ‚úÖ ExaCC sait que le client poss√®de la cl√© priv√©e correspondante<br>
                                    ‚úÖ Le client est authentifi√©<br>
                                    ‚úÖ La connexion mTLS est √©tablie
                                </span>
                            </li>
                        </ol>
                    </div>

                    <h5 style="color: #f57c00; margin-top: 20px;">üîÑ Analogie : Signature manuscrite</h5>

                    <div style="background: #fff3e0; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #ff9800;">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>Cl√© Priv√©e</strong> = Votre main qui signe un document<br>
                            <strong>Signature</strong> = La signature manuscrite sur le papier<br>
                            <strong>Cl√© Publique</strong> = Mod√®le de votre signature pour v√©rification<br>
                            <br>
                            <span style="color: #e65100;">
                                ‚ûú Vous n'envoyez PAS votre main au destinataire !<br>
                                ‚ûú Vous envoyez seulement le document SIGN√â<br>
                                ‚ûú Le destinataire compare votre signature avec le mod√®le public
                            </span>
                        </p>
                    </div>

                    <h5 style="color: #6a1b9a; margin-top: 20px;">üìä Flux de donn√©es r√©el lors du handshake TLS</h5>

                    <div style="background: #4a235a; padding: 15px; border-radius: 5px; margin: 15px 0; font-family: monospace; font-size: 0.9em;">
<pre style="margin: 0; color: white;">
SERVEUR APPLICATIF                    R√âSEAU                    EXACC
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìÇ Wallet LOCAL:
   ‚îú‚îÄ cwallet.sso
   ‚îî‚îÄ ewallet.p12
        ‚Üì
   [Lecture cl√© priv√©e]
        ‚Üì
   [Cr√©ation signature]
        ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ Certificat      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  Transfert   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ (cl√© publique)  ‚îÇ               HTTPS                   ‚îÇ R√©ception   ‚îÇ
   ‚îÇ                 ‚îÇ                                       ‚îÇ Certificat  ‚îÇ
   ‚îÇ + Signature     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  Transfert   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ             ‚îÇ
   ‚îÇ                 ‚îÇ               HTTPS                   ‚îÇ V√©rification‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                       ‚îÇ avec        ‚îÇ
                                                             ‚îÇ cl√© publique‚îÇ
   üîë Cl√© priv√©e                                             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      reste ICI !                                                  ‚úÖ OK
      (NE BOUGE PAS)
</pre>
                    </div>

                </div>

                <div style="background: #c8e6c9; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #4caf50;">
                    <h5 style="color: #2e7d32; margin: 0 0 10px 0;">‚úÖ R√âSUM√â : Ce qui est envoy√© vs ce qui reste local</h5>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                        <thead>
                            <tr style="background: #a5d6a7;">
                                <th style="padding: 10px; border: 1px solid #81c784; text-align: left;">√âl√©ment</th>
                                <th style="padding: 10px; border: 1px solid #81c784; text-align: left;">Envoy√© √† ExaCC ?</th>
                                <th style="padding: 10px; border: 1px solid #81c784; text-align: left;">D√©tails</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: white;">
                                <td style="padding: 10px; border: 1px solid #81c784;"><strong>Certificat (cwallet.sso)</strong></td>
                                <td style="padding: 10px; border: 1px solid #81c784; color: #2e7d32;">‚úÖ OUI</td>
                                <td style="padding: 10px; border: 1px solid #81c784;">Contient la cl√© PUBLIQUE + identit√© client</td>
                            </tr>
                            <tr style="background: #f1f8e9;">
                                <td style="padding: 10px; border: 1px solid #81c784;"><strong>Cl√© Priv√©e (ewallet.p12)</strong></td>
                                <td style="padding: 10px; border: 1px solid #81c784; color: #c62828;">‚ùå NON</td>
                                <td style="padding: 10px; border: 1px solid #81c784;">Reste sur le serveur applicatif, jamais transmise</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 10px; border: 1px solid #81c784;"><strong>Signature num√©rique</strong></td>
                                <td style="padding: 10px; border: 1px solid #81c784; color: #2e7d32;">‚úÖ OUI</td>
                                <td style="padding: 10px; border: 1px solid #81c784;">Cr√©√©e avec la cl√© priv√©e, v√©rifi√©e avec cl√© publique</td>
                            </tr>
                            <tr style="background: #f1f8e9;">
                                <td style="padding: 10px; border: 1px solid #81c784;"><strong>USER/PASSWORD</strong></td>
                                <td style="padding: 10px; border: 1px solid #81c784; color: #2e7d32;">‚úÖ OUI</td>
                                <td style="padding: 10px; border: 1px solid #81c784;">Apr√®s √©tablissement tunnel TLS (chiffr√©)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="background: #fff9c4; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #fbc02d;">
                    <p style="margin: 0; color: #f57c00; font-weight: bold;">
                        üí° Point cl√© : Si la cl√© priv√©e √©tait envoy√©e sur le r√©seau, n'importe qui pourrait l'intercepter
                        et se faire passer pour votre serveur ! C'est pour cette raison qu'elle reste TOUJOURS locale
                        et n'est utilis√©e que pour SIGNER des preuves d'identit√©.
                    </p>
                </div>
            </div>

            <!-- R√©sum√© visuel -->
            <div style="background: #fff3e0; padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid #ff9800;">
                <h4 style="color: #e65100; margin-top: 0;">üìå R√âSUM√â : O√π se trouve quoi ?</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #ffe0b2;">
                            <th style="padding: 10px; border: 1px solid #ffb74d; text-align: left;">Composant</th>
                            <th style="padding: 10px; border: 1px solid #ffb74d; text-align: left;">Emplacement</th>
                            <th style="padding: 10px; border: 1px solid #ffb74d; text-align: left;">R√¥le</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: white;">
                            <td style="padding: 10px; border: 1px solid #ffb74d;"><strong>Base de donn√©es</strong></td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">‚òÅÔ∏è Oracle Cloud (ExaCC)</td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">Stocke les donn√©es, √©coute sur port 1522</td>
                        </tr>
                        <tr style="background: #fff8f0;">
                            <td style="padding: 10px; border: 1px solid #ffb74d;"><strong>Wallet</strong></td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">üñ•Ô∏è Serveur Applicatif (local)</td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">Contient certificats + cl√© priv√©e pour mTLS</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 10px; border: 1px solid #ffb74d;"><strong>Application</strong></td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">üñ•Ô∏è Serveur Applicatif (local)</td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">Utilise le Wallet pour se connecter</td>
                        </tr>
                        <tr style="background: #fff8f0;">
                            <td style="padding: 10px; border: 1px solid #ffb74d;"><strong>TNS_ADMIN</strong></td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">üñ•Ô∏è Variable d'environnement syst√®me</td>
                            <td style="padding: 10px; border: 1px solid #ffb74d;">Pointe vers le dossier contenant le Wallet</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

        <h3>Actions Wallet</h3>
        <table>
            <thead>
                <tr>
                    <th>Action</th>
                    <th>Responsable</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Telecharger le Wallet depuis OCI Console</td>
                    <td>DBA Cloud</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>Deployer le Wallet sur les serveurs applicatifs</td>
                    <td>Admin Systeme</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>Configurer TNS_ADMIN pour pointer vers le dossier Wallet</td>
                    <td>Admin Systeme</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>Tester la connexion avec sqlplus</td>
                    <td>DBA</td>
                    <td>‚òê</td>
                </tr>
            </tbody>
        </table>

        <div class="code-container">
            <div class="code-header">
                <span>Test connexion avec Wallet</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Definir la variable d'environnement
export TNS_ADMIN=/path/to/wallet

-- Tester la connexion
sqlplus user/password@service_name_high

-- Verifier le service
SELECT sys_context('USERENV', 'SERVICE_NAME') FROM dual;</code></pre>
        </div>
    </section>

    <!-- SECTION 2: CHAINE DE CONNEXION -->
    <section>
        <h2>2. Chaines de Connexion Applicatives</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>ATTENTION :</strong> Les chaines de connexion changent completement apres migration ExaCC !
                Port 1522 (mTLS) au lieu de 1521.
            </div>
        </div>

        <h3>Comparaison Avant/Apres</h3>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>On-Premise (Avant)</th>
                    <th>ExaCC (Apres)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Port</td>
                    <td>1521</td>
                    <td><strong>1522</strong> (mTLS)</td>
                </tr>
                <tr>
                    <td>Protocole</td>
                    <td>TCP</td>
                    <td><strong>TCPS</strong> (SSL/TLS)</td>
                </tr>
                <tr>
                    <td>Wallet</td>
                    <td>Non requis</td>
                    <td><strong>Obligatoire</strong></td>
                </tr>
                <tr>
                    <td>Hostname</td>
                    <td>serveur.interne.local</td>
                    <td>adb.eu-paris-1.oraclecloud.com</td>
                </tr>
            </tbody>
        </table>

        <div class="code-container">
            <div class="code-header">
                <span>Exemple tnsnames.ora ExaCC</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Service HIGH (batch, reporting)
EXACC_HIGH = (description=
    (retry_count=20)(retry_delay=3)
    (address=(protocol=tcps)(port=1522)
    (host=adb.eu-paris-1.oraclecloud.com))
    (connect_data=(service_name=xxxxx_exacc_high.adb.oraclecloud.com))
    (security=(ssl_server_dn_match=yes))
)

-- Service MEDIUM (applications interactives)
EXACC_MEDIUM = (description=
    (retry_count=20)(retry_delay=3)
    (address=(protocol=tcps)(port=1522)
    (host=adb.eu-paris-1.oraclecloud.com))
    (connect_data=(service_name=xxxxx_exacc_medium.adb.oraclecloud.com))
    (security=(ssl_server_dn_match=yes))
)</code></pre>
        </div>

        <h3>Actions Chaines de Connexion</h3>
        <table>
            <thead>
                <tr>
                    <th>Application</th>
                    <th>Action</th>
                    <th>Responsable</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Accurate</td>
                    <td>Mettre a jour le fichier de configuration</td>
                    <td>Editeur / Admin</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>Jobs Control-M</td>
                    <td>Modifier les scripts de connexion</td>
                    <td>Ordonnanceur</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>Reporting</td>
                    <td>Reconfigurer les sources de donnees</td>
                    <td>BI Team</td>
                    <td>‚òê</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- SECTION 3: UTL_FILE -->
    <section>
        <h2>3. Configuration UTL_FILE (70 references)</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üì¶</span>
            <div>
                <strong>Strategie retenue :</strong> PUBLIC SYNONYM + UTL_FILE_WRAPPER
                <br>Aucune modification du code applicatif necessaire pour les 70 references !
            </div>
        </div>

        <div class="alert alert-warning">
            <span class="alert-icon">üìã</span>
            <div>
                <strong>Scripts complets disponibles dans l'onglet</strong> <a href="#guide" onclick="showTab('guide', document.querySelector('a[href=\'#guide\']'))" style="color: #1565c0; font-weight: bold;">Guide Migration</a>
                <br>Section "Implementation du Wrapper" avec tous les scripts SQL.
            </div>
        </div>

        <h3>Checklist UTL_FILE</h3>
        <table>
            <thead>
                <tr>
                    <th>Etape</th>
                    <th>Action</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Creer la table <code>utl_file_directory_mapping</code></td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Inserer les mappings (directory ‚Üí Object Storage URI)</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Deployer le package <code>UTL_FILE_WRAPPER</code> (spec + body)</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Creer le PUBLIC SYNONYM <code>UTL_FILE ‚Üí UTL_FILE_WRAPPER</code></td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Accorder les privileges aux schemas applicatifs</td>
                    <td>‚òê</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Tester ecriture/lecture fichier</td>
                    <td>‚òê</td>
                </tr>
            </tbody>
        </table>

        <h3>Verification rapide</h3>
        <div class="code-container">
            <div class="code-header">
                <span>Verifier la configuration UTL_FILE</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Verifier le synonyme
SELECT synonym_name, table_owner, table_name
FROM all_synonyms WHERE synonym_name = 'UTL_FILE';

-- Verifier le package
SELECT object_name, object_type, status
FROM user_objects WHERE object_name = 'UTL_FILE_WRAPPER';

-- Verifier les mappings
SELECT oracle_directory, is_active FROM utl_file_directory_mapping;</code></pre>
        </div>
    </section>

    <!-- SECTION 4: DB LINK -->
    <section>
        <h2>4. Recreation des DB Links</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Contexte :</strong> Les deux instances migrent vers ExaCC.
                <br>Les DB Links doivent etre recrees avec DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Etape 1 : Creer le credential pour le DB Link</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Creer un credential dedie pour le DB Link
BEGIN
    DBMS_CLOUD.CREATE_CREDENTIAL(
        credential_name => 'DBLINK_INSTANCE2_CRED',
        username        => 'USER_INSTANCE2',       -- Utilisateur sur l'instance cible
        password        => 'MotDePasseSecurise'    -- Mot de passe
    );
END;
/</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Etape 2 : Creer le DB Link ExaCC vers ExaCC</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Recreer le DB Link avec DBMS_CLOUD_ADMIN
BEGIN
    DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK(
        db_link_name        => 'LINK_INSTANCE2',
        hostname            => 'adb.eu-paris-1.oraclecloud.com',
        port                => 1522,
        service_name        => 'xxxxx_instance2_high.adb.oraclecloud.com',
        ssl_server_dn_match => TRUE,
        credential_name     => 'DBLINK_INSTANCE2_CRED'
    );
END;
/</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Etape 3 : Tester le DB Link</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Verifier que le DB Link existe
SELECT db_link, username, host FROM user_db_links;

-- Tester la connexion
SELECT 'DB Link OK' AS test_result FROM dual@LINK_INSTANCE2;

-- Tester une vraie requete
SELECT COUNT(*) FROM schema.table@LINK_INSTANCE2;</code></pre>
        </div>
    </section>

    <!-- SECTION 5: VERIFICATION -->
    <section>
        <h2>5. Script de Verification Globale</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üîç</span>
            <div>
                Executez ce script apres toutes les configurations pour valider l'ensemble.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Script de verification post-migration</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- SCRIPT DE VERIFICATION POST-MIGRATION EXACC
-- ============================================================

SET SERVEROUTPUT ON
SET LINESIZE 200

PROMPT
PROMPT ========================================
PROMPT 1. VERIFICATION SYNONYME UTL_FILE
PROMPT ========================================

SELECT synonym_name, table_owner, table_name
FROM all_synonyms
WHERE synonym_name = 'UTL_FILE';

PROMPT
PROMPT ========================================
PROMPT 2. VERIFICATION PACKAGE UTL_FILE_WRAPPER
PROMPT ========================================

SELECT object_name, object_type, status
FROM all_objects
WHERE object_name = 'UTL_FILE_WRAPPER'
ORDER BY object_type;

PROMPT
PROMPT ========================================
PROMPT 3. VERIFICATION TABLE MAPPING
PROMPT ========================================

SELECT oracle_directory,
       SUBSTR(object_storage_uri, 1, 60) AS uri_short,
       is_active
FROM utl_file_directory_mapping
ORDER BY oracle_directory;

PROMPT
PROMPT ========================================
PROMPT 4. VERIFICATION DB LINKS
PROMPT ========================================

SELECT db_link, username, host
FROM user_db_links;

PROMPT
PROMPT ========================================
PROMPT 5. VERIFICATION CREDENTIALS
PROMPT ========================================

SELECT credential_name, username, enabled
FROM user_credentials;

PROMPT
PROMPT ========================================
PROMPT 6. TEST DB LINK (si existe)
PROMPT ========================================

-- Decommenter et adapter selon votre DB Link
-- SELECT 'OK' AS dblink_test FROM dual@LINK_INSTANCE2;

PROMPT
PROMPT ========================================
PROMPT VERIFICATION TERMINEE
PROMPT ========================================</code></pre>
        </div>
    </section>

    <!-- SECTION 6: PLANNING -->
    <section>
        <h2>6. Planning d'Execution</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">üìÖ</span>
            <div>
                <strong>Recommandation :</strong> Executer ces actions dans l'ordre suivant pour minimiser les risques.
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Jour</th>
                    <th>Action</th>
                    <th>Impact</th>
                    <th>Rollback</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>J</strong></td>
                    <td>Migration base vers ExaCC</td>
                    <td>Indisponibilite planifiee</td>
                    <td>Restauration on-premise</td>
                </tr>
                <tr>
                    <td><strong>J</strong></td>
                    <td>Deploiement Wallet sur serveurs</td>
                    <td>Aucun</td>
                    <td>Supprimer le wallet</td>
                </tr>
                <tr>
                    <td><strong>J</strong></td>
                    <td>Mise a jour chaines de connexion</td>
                    <td>Reconnexion apps</td>
                    <td>Revenir config precedente</td>
                </tr>
                <tr>
                    <td><strong>J+1</strong></td>
                    <td>Deploiement UTL_FILE_WRAPPER + Synonyme</td>
                    <td>Aucun si synonyme OK</td>
                    <td>DROP SYNONYM, retour UTL_FILE natif</td>
                </tr>
                <tr>
                    <td><strong>J+1</strong></td>
                    <td>Recreation DB Links</td>
                    <td>Requetes inter-instances</td>
                    <td>Recreer ancien DB Link</td>
                </tr>
                <tr>
                    <td><strong>J+2</strong></td>
                    <td>Tests applicatifs complets</td>
                    <td>Validation metier</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td><strong>J+3</strong></td>
                    <td>Validation finale + Mise en production</td>
                    <td>GO/NO-GO</td>
                    <td>Plan de rollback complet</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- SECTION 7: CHECKLIST FINALE -->
    <section>
        <h2>7. Checklist Finale</h2>

        <div style="background: #fff; border: 2px solid #4caf50; border-radius: 8px; padding: 20px;">
            <h3 style="color: #2e7d32; margin-bottom: 15px;">Validation Post-Migration</h3>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4 style="color: #1565c0; margin-bottom: 10px;">Infrastructure</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Wallet deploye sur tous les serveurs</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê TNS_ADMIN configure correctement</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Connexion sqlplus OK</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Firewall ouvert port 1522</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #1565c0; margin-bottom: 10px;">Base de donnees</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê UTL_FILE_WRAPPER VALID</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê PUBLIC SYNONYM UTL_FILE cree</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Table mapping renseignee</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê DB Links recrees et testes</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #1565c0; margin-bottom: 10px;">Applications</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Accurate connecte a ExaCC</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Jobs Control-M mis a jour</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Reporting fonctionnel</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Interfaces OK</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #1565c0; margin-bottom: 10px;">Validation Metier</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Ecriture fichiers Object Storage OK</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Lecture fichiers Object Storage OK</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Requetes inter-instances OK</li>
                        <li style="padding: 8px 0; border-bottom: 1px solid #e0e0e0;">‚òê Performance acceptable</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

</div>
<!-- ==================== FIN ONGLET POST-MIGRATION ==================== -->
<!-- ==================== ONGLET MODES DE CONNEXION ==================== -->
<div id="modesconnexion" class="tab-content">

    <section style="background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%); border: 2px solid #3f51b5; margin-top: 20px;">
        <h2>üîå Modes de Connexion √† ExaCC</h2>
        <p style="margin: 15px 0;">Comprendre les diff√©rents modes de connexion disponibles sur Oracle ExaCC : mTLS, TLS simple et TCP classique.</p>
    </section>

    <!-- Introduction -->
    <section>
        <h2>üìã Vue d'ensemble des 3 Modes de Connexion</h2>

        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Important :</strong> Le mode de connexion d√©pend de la configuration d'ExaCC par votre √©quipe DBA/Cloud Oracle.
                V√©rifiez avec eux quel mode est activ√© avant de configurer vos applications.
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Mode</th>
                    <th>Port</th>
                    <th>Wallet</th>
                    <th>Chiffrement</th>
                    <th>S√©curit√©</th>
                </tr>
            </thead>
            <tbody>
                <tr style="background: #e8f5e9;">
                    <td><strong>mTLS</strong> (Mutual TLS)</td>
                    <td>1522</td>
                    <td>‚úÖ Obligatoire</td>
                    <td>‚úÖ TLS 1.2/1.3</td>
                    <td>üîíüîíüîí Maximum</td>
                </tr>
                <tr style="background: #fff3e0;">
                    <td><strong>TLS</strong> (One-Way)</td>
                    <td>1522</td>
                    <td>‚ùå Non requis</td>
                    <td>‚úÖ TLS 1.2/1.3</td>
                    <td>üîíüîí Bonne</td>
                </tr>
                <tr style="background: #ffebee;">
                    <td><strong>TCP</strong> (Classique)</td>
                    <td>1521</td>
                    <td>‚ùå Non requis</td>
                    <td>‚ùå Aucun</td>
                    <td>üîí Basique</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- MODE 1: mTLS -->
    <section>
        <h2 style="color: #2e7d32;">üîê Mode 1 : mTLS (Mutual TLS) - Wallet OBLIGATOIRE</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Le plus s√©curis√© :</strong> Les DEUX parties (client et serveur) doivent prouver leur identit√© avec des certificats.
                C'est le mode par d√©faut sur Autonomous Database.
            </div>
        </div>

        <h3>Sch√©ma de fonctionnement</h3>
        <div style="background: #1a237e; color: white; padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace; font-size: 0.9em; overflow-x: auto;">
<pre style="margin: 0; color: white;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SERVEUR APPLICATIF ‚îÇ                          ‚îÇ       ExaCC         ‚îÇ
‚îÇ                     ‚îÇ                          ‚îÇ                     ‚îÇ
‚îÇ  üì¶ Wallet LOCAL    ‚îÇ                          ‚îÇ  üì¶ Certificat      ‚îÇ
‚îÇ  - cwallet.sso      ‚îÇ                          ‚îÇ     Serveur         ‚îÇ
‚îÇ  - ewallet.p12      ‚îÇ                          ‚îÇ                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                                                ‚îÇ
           ‚îÇ  1Ô∏è‚É£ "Bonjour, voici MON certificat"            ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (cwallet.sso)                              ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  2Ô∏è‚É£ "OK, voici MON certificat serveur"         ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ                                                ‚îÇ
           ‚îÇ  3Ô∏è‚É£ V√©rification MUTUELLE                      ‚îÇ
           ‚îÇ     - Client v√©rifie certificat serveur ‚úÖ     ‚îÇ
           ‚îÇ     - Serveur v√©rifie certificat client ‚úÖ     ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  4Ô∏è‚É£ Signature avec cl√© priv√©e (preuve)         ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (ewallet.p12 utilis√© localement)           ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  5Ô∏è‚É£ ‚úÖ Connexion chiffr√©e √©tablie               ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (Port 1522 - TCPS)                         ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  6Ô∏è‚É£ USER/PASSWORD envoy√© (chiffr√©)             ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
</pre>
        </div>

        <h3>Caract√©ristiques</h3>
        <table>
            <thead>
                <tr>
                    <th>√âl√©ment</th>
                    <th>Valeur</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><strong>Port</strong></td><td>1522</td></tr>
                <tr><td><strong>Wallet</strong></td><td>‚úÖ OBLIGATOIRE</td></tr>
                <tr><td><strong>Certificat client</strong></td><td>‚úÖ Requis</td></tr>
                <tr><td><strong>Certificat serveur</strong></td><td>‚úÖ Requis</td></tr>
                <tr><td><strong>Chiffrement</strong></td><td>TLS 1.2/1.3</td></tr>
                <tr><td><strong>Qui v√©rifie qui ?</strong></td><td>Les DEUX se v√©rifient mutuellement</td></tr>
            </tbody>
        </table>

        <h3>Cha√Æne de connexion</h3>
        <div class="code-container">
            <div class="code-header">
                <span>JDBC avec Wallet (mTLS)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Format JDBC
jdbc:oracle:thin:@tcps://exacc-host:1522/SERVICE?wallet_location=/path/to/wallet

-- Format TNS
jdbc:oracle:thin:@service_high?TNS_ADMIN=/path/to/wallet

-- SQLPlus
export TNS_ADMIN=/path/to/wallet
sqlplus user/password@service_high</code></pre>
        </div>

        <h3>Quand ce mode est utilis√© ?</h3>
        <ul style="margin: 15px 0; padding-left: 25px; line-height: 1.8;">
            <li>‚úÖ Autonomous Database (par d√©faut)</li>
            <li>‚úÖ ExaCC avec configuration haute s√©curit√©</li>
            <li>‚úÖ Connexions depuis Internet ou r√©seaux non s√©curis√©s</li>
            <li>‚úÖ Environnements soumis √† des normes de conformit√© (PCI-DSS, SOC2, etc.)</li>
        </ul>
    </section>

    <!-- MODE 2: TLS Simple -->
    <section>
        <h2 style="color: #e65100;">üîí Mode 2 : TLS Simple (One-Way) - Wallet PAS obligatoire</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>Chiffrement sans Wallet client :</strong> Seul le SERVEUR (ExaCC) prouve son identit√©.
                Le client fait confiance au serveur sans pr√©senter de certificat.
            </div>
        </div>

        <h3>Sch√©ma de fonctionnement</h3>
        <div style="background: #e65100; color: white; padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace; font-size: 0.9em; overflow-x: auto;">
<pre style="margin: 0; color: white;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SERVEUR APPLICATIF ‚îÇ                          ‚îÇ       ExaCC         ‚îÇ
‚îÇ                     ‚îÇ                          ‚îÇ                     ‚îÇ
‚îÇ  ‚ùå Pas de Wallet   ‚îÇ                          ‚îÇ  üì¶ Certificat      ‚îÇ
‚îÇ     n√©cessaire      ‚îÇ                          ‚îÇ     Serveur         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                                                ‚îÇ
           ‚îÇ  1Ô∏è‚É£ "Bonjour, je veux me connecter"            ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (Pas de certificat client)                 ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  2Ô∏è‚É£ "OK, voici MON certificat serveur"         ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ                                                ‚îÇ
           ‚îÇ  3Ô∏è‚É£ V√©rification UNI-DIRECTIONNELLE            ‚îÇ
           ‚îÇ     - Client v√©rifie certificat serveur ‚úÖ     ‚îÇ
           ‚îÇ     - Serveur NE v√©rifie PAS le client ‚ùå      ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  4Ô∏è‚É£ ‚úÖ Connexion chiffr√©e √©tablie               ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (Port 1522 - TCPS)                         ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  5Ô∏è‚É£ USER/PASSWORD envoy√© (chiffr√©)             ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  6Ô∏è‚É£ Authentification par USER/PASSWORD seul    ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
</pre>
        </div>

        <h3>Caract√©ristiques</h3>
        <table>
            <thead>
                <tr>
                    <th>√âl√©ment</th>
                    <th>Valeur</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><strong>Port</strong></td><td>1522</td></tr>
                <tr><td><strong>Wallet</strong></td><td>‚ùå PAS obligatoire</td></tr>
                <tr><td><strong>Certificat client</strong></td><td>‚ùå Pas requis</td></tr>
                <tr><td><strong>Certificat serveur</strong></td><td>‚úÖ Requis (v√©rifi√© par client)</td></tr>
                <tr><td><strong>Chiffrement</strong></td><td>TLS 1.2/1.3</td></tr>
                <tr><td><strong>Qui v√©rifie qui ?</strong></td><td>Client v√©rifie serveur seulement</td></tr>
            </tbody>
        </table>

        <h3>Cha√Æne de connexion</h3>
        <div class="code-container">
            <div class="code-header">
                <span>JDBC sans Wallet (TLS simple)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Format JDBC simple
jdbc:oracle:thin:@tcps://exacc-host:1522/SERVICE

-- Format TNS complet
jdbc:oracle:thin:@(DESCRIPTION=
    (ADDRESS=(PROTOCOL=TCPS)(HOST=exacc-host)(PORT=1522))
    (CONNECT_DATA=(SERVICE_NAME=SERVICE))
)

-- SQLPlus (n√©cessite configuration sqlnet.ora)
sqlplus user/password@"(DESCRIPTION=(ADDRESS=(PROTOCOL=TCPS)(HOST=exacc-host)(PORT=1522))(CONNECT_DATA=(SERVICE_NAME=SERVICE)))"</code></pre>
        </div>

        <h3>Configuration requise c√¥t√© ExaCC</h3>
        <div class="code-container">
            <div class="code-header">
                <span>D√©sactiver mTLS sur Autonomous Database</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Le DBA doit ex√©cuter cette commande pour d√©sactiver mTLS
BEGIN
    ORDS_ADMIN.DISABLE_MTLS;
END;
/

-- Ou via OCI Console :
-- Database Details ‚Üí Network ‚Üí Mutual TLS (mTLS) ‚Üí Disable</code></pre>
        </div>

        <h3>Quand ce mode est utilis√© ?</h3>
        <ul style="margin: 15px 0; padding-left: 25px; line-height: 1.8;">
            <li>‚úÖ ExaCC configur√© sans mTLS obligatoire</li>
            <li>‚úÖ Connexions depuis r√©seau interne s√©curis√©</li>
            <li>‚úÖ Quand on veut chiffrement SANS gestion de Wallet client</li>
            <li>‚úÖ Applications legacy qui ne supportent pas bien le Wallet</li>
        </ul>
    </section>

    <!-- MODE 3: TCP Classique -->
    <section>
        <h2 style="color: #c62828;">‚ö° Mode 3 : TCP Classique - Connexion NON chiffr√©e</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">üö®</span>
            <div>
                <strong>Mode traditionnel sans chiffrement :</strong> C'est le mode identique √† On-Premise.
                Les donn√©es circulent en CLAIR sur le r√©seau. N√©cessite un r√©seau priv√© s√©curis√©.
            </div>
        </div>

        <h3>Sch√©ma de fonctionnement</h3>
        <div style="background: #b71c1c; color: white; padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace; font-size: 0.9em; overflow-x: auto;">
<pre style="margin: 0; color: white;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SERVEUR APPLICATIF ‚îÇ                          ‚îÇ       ExaCC         ‚îÇ
‚îÇ                     ‚îÇ                          ‚îÇ                     ‚îÇ
‚îÇ  ‚ùå Pas de Wallet   ‚îÇ                          ‚îÇ  ‚ùå Pas de          ‚îÇ
‚îÇ  ‚ùå Pas de certif   ‚îÇ                          ‚îÇ     certificat      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                                                ‚îÇ
           ‚îÇ  1Ô∏è‚É£ "Bonjour, voici USER/PASSWORD"             ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     ‚ö†Ô∏è En clair sur le r√©seau !                ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  2Ô∏è‚É£ V√©rification USER/PASSWORD                 ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  3Ô∏è‚É£ ‚úÖ Connexion √©tablie                        ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
           ‚îÇ     (Port 1521 - TCP)                          ‚îÇ
           ‚îÇ                                                ‚îÇ
           ‚îÇ  ‚ö†Ô∏è Toutes les donn√©es NON chiffr√©es           ‚îÇ
           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
</pre>
        </div>

        <h3>Caract√©ristiques</h3>
        <table>
            <thead>
                <tr>
                    <th>√âl√©ment</th>
                    <th>Valeur</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><strong>Port</strong></td><td>1521</td></tr>
                <tr><td><strong>Wallet</strong></td><td>‚ùå Pas n√©cessaire</td></tr>
                <tr><td><strong>Certificat client</strong></td><td>‚ùå Pas n√©cessaire</td></tr>
                <tr><td><strong>Certificat serveur</strong></td><td>‚ùå Pas n√©cessaire</td></tr>
                <tr><td><strong>Chiffrement</strong></td><td>‚ùå AUCUN</td></tr>
                <tr><td><strong>Qui v√©rifie qui ?</strong></td><td>Personne (juste USER/PASSWORD)</td></tr>
            </tbody>
        </table>

        <h3>Cha√Æne de connexion</h3>
        <div class="code-container">
            <div class="code-header">
                <span>JDBC classique (identique On-Premise)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Format JDBC simple (identique √† On-Premise)
jdbc:oracle:thin:@exacc-host:1521/SERVICE

-- Format TNS
jdbc:oracle:thin:@(DESCRIPTION=
    (ADDRESS=(PROTOCOL=TCP)(HOST=exacc-host)(PORT=1521))
    (CONNECT_DATA=(SERVICE_NAME=SERVICE))
)

-- SQLPlus
sqlplus user/password@exacc-host:1521/SERVICE</code></pre>
        </div>

        <h3>‚ö†Ô∏è Conditions OBLIGATOIRES</h3>
        <div style="background: #ffcdd2; padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid #e53935;">
            <p style="margin: 0 0 15px 0; font-weight: bold; color: #c62828;">Ce mode n'est possible QUE si :</p>
            <ul style="margin: 0; padding-left: 25px; line-height: 1.8;">
                <li>‚úÖ R√©seau <strong>priv√©</strong> entre serveur applicatif et ExaCC (VPN, FastConnect, Private Endpoint)</li>
                <li>‚úÖ R√©seau totalement <strong>isol√© d'Internet</strong></li>
                <li>‚úÖ Configuration sp√©cifique valid√©e par l'√©quipe Cloud Oracle</li>
                <li>‚úÖ Port 1521 ouvert sur ExaCC (pas toujours le cas)</li>
            </ul>
        </div>

        <div style="background: #263238; color: white; padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace; font-size: 0.9em;">
<pre style="margin: 0; color: white;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  R√âSEAU PRIV√â OBLIGATOIRE                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Serveur Appli ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ VPN/FastConnect ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ExaCC       ‚îÇ
‚îÇ       ‚îÇ                                           ‚îÇ         ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ R√©seau priv√© isol√© ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                   (Pas d'acc√®s Internet)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
        </div>

        <h3>Quand ce mode est possible ?</h3>
        <ul style="margin: 15px 0; padding-left: 25px; line-height: 1.8;">
            <li>‚úÖ ExaCC avec r√©seau priv√© (VPN, FastConnect, Private Endpoint)</li>
            <li>‚úÖ R√©seau totalement isol√© d'Internet</li>
            <li>‚úÖ Configuration sp√©cifique par l'√©quipe Cloud</li>
            <li>‚ùå JAMAIS depuis Internet public</li>
        </ul>
    </section>

    <!-- Questions √† poser au DBA -->
    <section>
        <h2>‚ùì Questions √† poser √† votre DBA Cloud</h2>

        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 25px; border-radius: 10px; margin: 15px 0;">
            <p style="margin: 0 0 15px 0; font-weight: bold; color: #1565c0; font-size: 1.1em;">
                Avant de configurer vos applications, posez ces questions √† votre √©quipe DBA/Cloud Oracle :
            </p>

            <div style="background: white; padding: 20px; border-radius: 8px; margin: 10px 0;">
                <ol style="margin: 0; padding-left: 25px; line-height: 2;">
                    <li><strong>Quel mode est configur√© sur notre ExaCC ?</strong>
                        <ul style="margin: 5px 0 10px 20px;">
                            <li>‚òê mTLS (Wallet obligatoire)</li>
                            <li>‚òê TLS simple (pas de Wallet)</li>
                            <li>‚òê TCP sur r√©seau priv√©</li>
                        </ul>
                    </li>
                    <li><strong>Le port 1521 (TCP) est-il accessible ?</strong></li>
                    <li><strong>Devons-nous d√©ployer un Wallet sur les serveurs applicatifs ?</strong></li>
                    <li><strong>Quelle est l'URL/hostname de connexion ?</strong></li>
                    <li><strong>Quels sont les noms de services disponibles ?</strong> (service_high, service_medium, service_low)</li>
                </ol>
            </div>
        </div>

        <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div>
                <strong>Conseil :</strong> La r√©ponse √† ces questions d√©terminera si vous devez modifier vos cha√Ænes de connexion
                et si vous devez d√©ployer un Wallet sur vos serveurs applicatifs.
            </div>
        </div>
    </section>

    <!-- R√©capitulatif -->
    <section>
        <h2>üìä Tableau R√©capitulatif</h2>

        <table>
            <thead>
                <tr>
                    <th>Mode</th>
                    <th>Port</th>
                    <th>Wallet</th>
                    <th>Chiffrement</th>
                    <th>S√©curit√©</th>
                    <th>Cha√Æne de connexion</th>
                </tr>
            </thead>
            <tbody>
                <tr style="background: #e8f5e9;">
                    <td><strong>mTLS</strong></td>
                    <td>1522</td>
                    <td>‚úÖ Obligatoire</td>
                    <td>‚úÖ TLS</td>
                    <td>üîíüîíüîí</td>
                    <td><code>@tcps://host:1522/SVC?wallet_location=...</code></td>
                </tr>
                <tr style="background: #fff3e0;">
                    <td><strong>TLS</strong></td>
                    <td>1522</td>
                    <td>‚ùå Non</td>
                    <td>‚úÖ TLS</td>
                    <td>üîíüîí</td>
                    <td><code>@tcps://host:1522/SVC</code></td>
                </tr>
                <tr style="background: #ffebee;">
                    <td><strong>TCP</strong></td>
                    <td>1521</td>
                    <td>‚ùå Non</td>
                    <td>‚ùå Non</td>
                    <td>üîí</td>
                    <td><code>@host:1521/SVC</code></td>
                </tr>
            </tbody>
        </table>

        <div style="background: #fff9c4; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #fbc02d;">
            <p style="margin: 0; color: #f57c00; font-weight: bold;">
                üí° <strong>R√©sum√© :</strong><br><br>
                ‚Ä¢ <strong>Vos cha√Ænes actuelles vont continuer √† fonctionner</strong> uniquement si ExaCC est configur√© en mode TCP (port 1521) avec r√©seau priv√©.<br><br>
                ‚Ä¢ Si ExaCC est configur√© en <strong>mTLS</strong> (le plus courant), vous devrez d√©ployer le Wallet et modifier vos cha√Ænes de connexion.<br><br>
                ‚Ä¢ Si ExaCC est configur√© en <strong>TLS simple</strong>, vous devrez juste changer le port (1522) et le protocole (TCPS).
            </p>
        </div>
    </section>

</div>
<!-- ==================== FIN ONGLET MODES DE CONNEXION ==================== -->

<!-- ==================== ONGLET SCRIPTS ==================== -->
<div id="scripts" class="tab-content">

    <section style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border: 2px solid #ff9800; margin-top: 20px;">
        <h2>üìú Scripts SQL - Biblioth√®que Partag√©e</h2>
        <p style="margin: 15px 0;">Stockez et partagez vos scripts SQL avec toute l'√©quipe. Les modifications sont synchronis√©es en temps r√©el.</p>
    </section>

    <div id="firebase-status" class="firebase-status status-loading">
        üîÑ Connexion √† Firebase...
    </div>

    <div class="scripts-container">
        <!-- Liste des scripts -->
        <div class="scripts-list">
            <h3>üìÅ Mes Scripts</h3>
            <div id="scripts-list-container">
                <!-- Scripts charg√©s dynamiquement -->
            </div>
            <button class="add-script-btn" onclick="createNewScript()">+ Nouveau Script</button>
        </div>

        <!-- √âditeur -->
        <div class="scripts-editor">
            <div class="editor-header">
                <input type="text" id="script-title" class="editor-title-input" placeholder="Titre du script..." />
                <div class="editor-actions">
                    <button class="editor-btn btn-copy" onclick="copyScriptContent()">üìã Copier</button>
                    <button class="editor-btn btn-save" onclick="saveScript()">üíæ Sauvegarder</button>
                    <button class="editor-btn btn-delete" onclick="deleteScript()">üóëÔ∏è Supprimer</button>
                </div>
            </div>
            <input type="text" id="script-description" class="editor-desc-input" placeholder="Description du script..." />
            <textarea id="script-content" class="editor-textarea" placeholder="-- √âcrivez votre script SQL ici..."></textarea>
        </div>
    </div>

</div>
<!-- ==================== FIN ONGLET SCRIPTS ==================== -->

<!-- ==================== ONGLET REMEDIATION PARNA ==================== -->
<div id="remediation" class="tab-content">

    <section style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border: 2px solid #ff9800; margin-top: 20px;">
        <h2>üîß Plan de Rem√©diation UTL_FILE - Application PARNA</h2>
        <p style="margin: 15px 0;"><strong>Scripts pr√™ts √† copier-coller</strong> - Bas√©s sur les r√©sultats de votre audit</p>
    </section>

    <!-- R√âSUM√â AUDIT -->
    <section>
        <h2>üìä R√©sultats de l'Audit PARNA</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Audit termin√© !</strong> Tous vos packages sont compatibles √† 100% avec la solution wrapper.<br>
                Aucune modification de code n√©cessaire.
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>√âl√©ment</th>
                    <th>Quantit√©</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Directories Oracle</strong></td>
                    <td>6</td>
                    <td><span style="background: #4caf50; color: white; padding: 3px 10px; border-radius: 10px;">100% mapp√©s</span></td>
                </tr>
                <tr>
                    <td><strong>Packages PL/SQL</strong></td>
                    <td>11</td>
                    <td><span style="background: #4caf50; color: white; padding: 3px 10px; border-radius: 10px;">100% couverts</span></td>
                </tr>
                <tr>
                    <td><strong>Lignes UTL_FILE</strong></td>
                    <td>111</td>
                    <td><span style="background: #4caf50; color: white; padding: 3px 10px; border-radius: 10px;">100% compatibles</span></td>
                </tr>
                <tr>
                    <td><strong>Fonctions UTL_FILE</strong></td>
                    <td>21 diff√©rentes</td>
                    <td><span style="background: #4caf50; color: white; padding: 3px 10px; border-radius: 10px;">100% dans wrapper</span></td>
                </tr>
            </tbody>
        </table>

        <h3>Directories identifi√©s</h3>
        <table>
            <thead>
                <tr>
                    <th>Directory Oracle</th>
                    <th>Chemin actuel</th>
                    <th>Mapping Object Storage</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>DIR_ARCH_RNA</strong></td>
                    <td>/applis/08449-parna-p1/archive</td>
                    <td>archive/</td>
                </tr>
                <tr>
                    <td><strong>DIR_IN_RNA</strong></td>
                    <td>/applis/08449-parna-p1/in</td>
                    <td>in/</td>
                </tr>
                <tr>
                    <td><strong>DIR_LOG_RNA</strong></td>
                    <td>/applis/logs/08449-parna-p1</td>
                    <td>logs/</td>
                </tr>
                <tr>
                    <td><strong>DIR_OUT_RNA</strong></td>
                    <td>/applis/08449-parna-p1/out</td>
                    <td>out/</td>
                </tr>
                <tr>
                    <td><strong>DIR_TEMP_RNA</strong></td>
                    <td>/applis/08449-parna-p1/temp</td>
                    <td>temp/</td>
                </tr>
                <tr>
                    <td><strong>IN_APPLI_DIR</strong></td>
                    <td>/applis/08449-parna-p1/in/</td>
                    <td>in/</td>
                </tr>
            </tbody>
        </table>

        <h3>Top 5 Packages prioritaires</h3>
        <table>
            <thead>
                <tr>
                    <th>Package</th>
                    <th>Lignes UTL_FILE</th>
                    <th>Priorit√©</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>PKG_TEC_FICHIERS</strong></td>
                    <td>61</td>
                    <td><span style="background: #d32f2f; color: white; padding: 3px 10px; border-radius: 10px;">CRITIQUE</span></td>
                </tr>
                <tr>
                    <td><strong>PKG_DTC</strong></td>
                    <td>21</td>
                    <td><span style="background: #f57c00; color: white; padding: 3px 10px; border-radius: 10px;">IMPORTANT</span></td>
                </tr>
                <tr>
                    <td><strong>PKG_LOG</strong></td>
                    <td>14</td>
                    <td><span style="background: #f57c00; color: white; padding: 3px 10px; border-radius: 10px;">IMPORTANT</span></td>
                </tr>
                <tr>
                    <td><strong>PKG_RNADEXTBAATCP01</strong></td>
                    <td>3</td>
                    <td><span style="background: #1976d2; color: white; padding: 3px 10px; border-radius: 10px;">MOYEN</span></td>
                </tr>
                <tr>
                    <td>+7 autres packages</td>
                    <td>12</td>
                    <td><span style="background: #388e3c; color: white; padding: 3px 10px; border-radius: 10px;">FAIBLE</span></td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- AUDIT DB LINKS -->
    <section>
        <h2>üîó Audit des DB Links PARNA</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>1 DB Link identifi√©</strong> - √Ä recr√©er avec DBMS_CLOUD_ADMIN sur ExaCC
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>DB Link</th>
                    <th>User distant</th>
                    <th>Host actuel</th>
                    <th>Date cr√©ation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>P08449A</strong></td>
                    <td>BANKREC</td>
                    <td>S01VL9976319:1521 (SID: P08449AP10)</td>
                    <td>23/09/22</td>
                </tr>
            </tbody>
        </table>

        <h3>üîß √âtape 1 : Cr√©er le Credential</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Cr√©er credential pour DB Link P08449A</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- CR√âATION CREDENTIAL POUR DB LINK P08449A
-- ============================================================
-- √Ä ex√©cuter sur ExaCC AVANT de cr√©er le DB Link

BEGIN
    DBMS_CLOUD.CREATE_CREDENTIAL(
        credential_name => 'CRED_P08449A',
        username        => 'BANKREC',
        password        => '[MOT_DE_PASSE_BANKREC]'  -- √Ä remplacer
    );
END;
/

-- V√©rification
SELECT credential_name, username
FROM user_credentials
WHERE credential_name = 'CRED_P08449A';</code></pre>
        </div>

        <h3>üîß √âtape 2 : Cr√©er le DB Link ExaCC</h3>
        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>IMPORTANT :</strong> Demander √† l'√©quipe OCI le hostname et service_name ExaCC de P08449A
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Cr√©er DB Link P08449A sur ExaCC</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- CR√âATION DB LINK P08449A SUR EXACC
-- ============================================================
-- IMPORTANT : Remplacer les valeurs [HOSTNAME_EXACC] et [SERVICE_NAME]

-- Supprimer l'ancien DB Link s'il existe
BEGIN
    EXECUTE IMMEDIATE 'DROP DATABASE LINK P08449A';
EXCEPTION
    WHEN OTHERS THEN NULL;
END;
/

-- Cr√©er le nouveau DB Link avec DBMS_CLOUD_ADMIN
BEGIN
    DBMS_CLOUD_ADMIN.CREATE_DATABASE_LINK(
        db_link_name        => 'P08449A',
        hostname            => '[HOSTNAME_EXACC_P08449A]',  -- Ex: exacc-p08449a-scan.oraclecloud.com
        port                => 1522,                         -- Port mTLS ExaCC
        service_name        => '[SERVICE_NAME_P08449A]',     -- Ex: P08449A_HIGH.adb.oraclecloud.com
        ssl_server_dn_match => TRUE,
        credential_name     => 'CRED_P08449A'
    );
END;
/</code></pre>
        </div>

        <h3>üß™ √âtape 3 : Tester le DB Link</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Tests DB Link P08449A</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- ============================================================
-- TEST DB LINK P08449A
-- ============================================================

-- Test 1 : V√©rifier que le DB Link existe
SELECT db_link, host, username
FROM user_db_links
WHERE db_link = 'P08449A';

-- Test 2 : Tester la connexion
SELECT 'DB Link P08449A OK' AS status FROM dual@P08449A;

-- Test 3 : Tester une table distante (adapter selon votre besoin)
-- SELECT COUNT(*) FROM [TABLE_DISTANTE]@P08449A;</code></pre>
        </div>

        <div class="alert alert-info">
            <span class="alert-icon">üìù</span>
            <div>
                <strong>Informations √† demander √† l'√©quipe OCI :</strong><br><br>
                <strong>Ancien (On-Premise) :</strong><br>
                ‚Ä¢ HOST: S01VL9976319<br>
                ‚Ä¢ PORT: 1521<br>
                ‚Ä¢ PROTOCOL: TCP<br>
                ‚Ä¢ SID: P08449AP10<br><br>
                <strong>Nouveau (ExaCC) - √Ä compl√©ter :</strong><br>
                ‚Ä¢ HOST: [√Ä demander]<br>
                ‚Ä¢ PORT: 1522<br>
                ‚Ä¢ PROTOCOL: TCPS (mTLS)<br>
                ‚Ä¢ SERVICE_NAME: [√Ä demander]<br>
                ‚Ä¢ Mot de passe BANKREC: [√Ä confirmer]
            </div>
        </div>
    </section>

    <!-- √âTAPE 1 : EMAIL OCI -->
    <section>
        <h2>üìß √âtape 1 : Demander Object Storage √† l'√©quipe OCI</h2>

        <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>ACTION REQUISE :</strong> Copiez l'email ci-dessous et envoyez-le √† l'√©quipe OCI pour cr√©er le bucket.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Email - Demande Object Storage (pr√™t √† envoyer)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>Objet: Migration ExaCC - Demande cr√©ation Object Storage pour remplacement UTL_FILE

Bonjour l'√©quipe OCI,

Dans le cadre de notre migration vers ExaCC, nous devons remplacer les acc√®s UTL_FILE
par Oracle Object Storage via DBMS_CLOUD.

=============================================================================
üìã BESOIN : Cr√©ation Bucket Object Storage + Credentials
=============================================================================

1Ô∏è‚É£ BUCKET √Ä CR√âER
-----------------
Nom du bucket: parna-exacc-files
R√©gion: [Votre r√©gion OCI]
Type: Standard (Tier 1)
Visibilit√©: Private

2Ô∏è‚É£ STRUCTURE DE R√âPERTOIRES √Ä CR√âER DANS LE BUCKET
---------------------------------------------------
Les r√©pertoires suivants doivent √™tre cr√©√©s dans le bucket :

‚îú‚îÄ‚îÄ archive/         (correspond √† DIR_ARCH_RNA: /applis/08449-parna-p1/archive)
‚îú‚îÄ‚îÄ in/             (correspond √† DIR_IN_RNA: /applis/08449-parna-p1/in)
‚îú‚îÄ‚îÄ logs/           (correspond √† DIR_LOG_RNA: /applis/logs/08449-parna-p1)
‚îú‚îÄ‚îÄ out/            (correspond √† DIR_OUT_RNA: /applis/08449-parna-p1/out)
‚îî‚îÄ‚îÄ temp/           (correspond √† DIR_TEMP_RNA: /applis/08449-parna-p1/temp)

3Ô∏è‚É£ CREDENTIALS OCI √Ä FOURNIR
------------------------------
Nous avons besoin des informations suivantes pour configurer DBMS_CLOUD :

‚úÖ User OCID: ocid1.user.oc1..aaaa[...]
‚úÖ Tenancy OCID: ocid1.tenancy.oc1..aaaa[...]
‚úÖ Fingerprint: aa:bb:cc:dd[...]
‚úÖ Cl√© API priv√©e (format PEM)
‚úÖ R√©gion: eu-paris-1 (ou votre r√©gion)
‚úÖ Namespace Object Storage: [√Ä compl√©ter]
‚úÖ Bucket URI complet: https://objectstorage.[region].oraclecloud.com/n/[namespace]/b/parna-exacc-files/o/

4Ô∏è‚É£ DROITS REQUIS
-----------------
Le user OCI doit avoir les droits suivants :
- OBJECT_READ sur le bucket
- OBJECT_WRITE sur le bucket
- OBJECT_DELETE sur le bucket (pour op√©rations de maintenance)

=============================================================================
üìä CONTEXTE TECHNIQUE
=============================================================================

6 directories Oracle actuels √† migrer :
‚Ä¢ DIR_ARCH_RNA   ‚Üí /applis/08449-parna-p1/archive    ‚Üí archive/
‚Ä¢ DIR_IN_RNA     ‚Üí /applis/08449-parna-p1/in         ‚Üí in/
‚Ä¢ DIR_LOG_RNA    ‚Üí /applis/logs/08449-parna-p1       ‚Üí logs/
‚Ä¢ DIR_OUT_RNA    ‚Üí /applis/08449-parna-p1/out        ‚Üí out/
‚Ä¢ DIR_TEMP_RNA   ‚Üí /applis/08449-parna-p1/temp       ‚Üí temp/
‚Ä¢ IN_APPLI_DIR   ‚Üí /applis/08449-parna-p1/in/        ‚Üí in/

Ces directories seront mapp√©s vers Object Storage via notre wrapper UTL_FILE_WRAPPER.

Packages PL/SQL concern√©s :
- PKG_TEC_FICHIERS (61 occurrences UTL_FILE)
- PKG_DTC (21 occurrences)
- PKG_LOG (14 occurrences)
- + 8 autres packages
Total : 111 lignes de code utilisant UTL_FILE

=============================================================================
üìÖ D√âLAI
=============================================================================
Merci de nous fournir ces √©l√©ments pour le : [Date souhait√©e]

=============================================================================
üë§ CONTACT
=============================================================================
Pour toute question: [Votre nom/email]

Cordialement,
L'√©quipe DBA</code></pre>
        </div>
    </section>

    <!-- √âTAPE 2 : MAPPING DIRECTORIES -->
    <section>
        <h2>üìä √âtape 2 : Cr√©er le Mapping Directories (apr√®s r√©ception OCI)</h2>

        <div class="alert alert-info">
            <span class="alert-icon">‚ÑπÔ∏è</span>
            <div>
                <strong>Pr√©requis :</strong> L'√©quipe OCI vous a fourni le Bucket URI et les credentials.<br>
                Remplacez [REGION], [NAMESPACE] et [SCHEMA] avant d'ex√©cuter.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Script de mapping PARNA (6 directories)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- =============================================================================
-- SCRIPT DE MAPPING DIRECTORIES UTL_FILE ‚Üí OCI OBJECT STORAGE
-- =============================================================================
-- Application: PARNA (08449-parna-p1)
-- Directories: 6 identifi√©s lors de l'audit

-- IMPORTANT : Remplacer avant ex√©cution :
-- [REGION]     : R√©gion OCI (ex: eu-paris-1)
-- [NAMESPACE]  : Namespace Object Storage fourni par OCI
-- [SCHEMA]     : Sch√©ma Oracle propri√©taire de la table

-- √âTAPE 1 : Cr√©er la table de mapping
CREATE TABLE [SCHEMA].UTL_FILE_DIRECTORY_MAPPING (
    directory_name   VARCHAR2(128) PRIMARY KEY,
    object_uri       VARCHAR2(1000) NOT NULL,
    credential_name  VARCHAR2(128) DEFAULT 'OCI_CREDENTIAL',
    created_date     DATE DEFAULT SYSDATE,
    comments         VARCHAR2(500)
);

-- √âTAPE 2 : Ins√©rer les 6 mappings PARNA

-- 1/6 : DIR_ARCH_RNA
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'DIR_ARCH_RNA',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/archive/',
    'OCI_CREDENTIAL',
    'R√©pertoire archive - /applis/08449-parna-p1/archive'
);

-- 2/6 : DIR_IN_RNA
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'DIR_IN_RNA',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/in/',
    'OCI_CREDENTIAL',
    'R√©pertoire entrant - /applis/08449-parna-p1/in'
);

-- 3/6 : DIR_LOG_RNA
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'DIR_LOG_RNA',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/logs/',
    'OCI_CREDENTIAL',
    'R√©pertoire logs - /applis/logs/08449-parna-p1'
);

-- 4/6 : DIR_OUT_RNA
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'DIR_OUT_RNA',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/out/',
    'OCI_CREDENTIAL',
    'R√©pertoire sortant - /applis/08449-parna-p1/out'
);

-- 5/6 : DIR_TEMP_RNA
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'DIR_TEMP_RNA',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/temp/',
    'OCI_CREDENTIAL',
    'R√©pertoire temporaire - /applis/08449-parna-p1/temp'
);

-- 6/6 : IN_APPLI_DIR
INSERT INTO [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
    (directory_name, object_uri, credential_name, comments)
VALUES (
    'IN_APPLI_DIR',
    'https://objectstorage.[REGION].oraclecloud.com/n/[NAMESPACE]/b/parna-exacc-files/o/in/',
    'OCI_CREDENTIAL',
    'R√©pertoire entrant application - /applis/08449-parna-p1/in/'
);

COMMIT;

-- √âTAPE 3 : V√©rifier les mappings (doit retourner 6 lignes)
SELECT
    directory_name AS "Directory",
    object_uri AS "URI Object Storage",
    credential_name AS "Credential"
FROM [SCHEMA].UTL_FILE_DIRECTORY_MAPPING
ORDER BY directory_name;</code></pre>
        </div>
    </section>

    <!-- √âTAPE 3 : CR√âER SYNONYME -->
    <section>
        <h2>üîÑ √âtape 3 : Cr√©er le Synonyme PUBLIC</h2>

        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <div>
                <strong>Avantage du synonyme PUBLIC :</strong> UNE SEULE commande pour tous les sch√©mas !<br>
                Aucune modification des 11 packages n√©cessaire.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - Cr√©er synonyme UTL_FILE ‚Üí UTL_FILE_WRAPPER</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- =============================================================================
-- CR√âATION DU SYNONYME PUBLIC
-- =============================================================================
-- Pr√©requis: Le package UTL_FILE_WRAPPER est d√©ploy√© et VALID
-- √Ä ex√©cuter en tant que DBA

-- √âTAPE 1 : V√©rifier que le wrapper existe et est VALID
SELECT owner, object_name, object_type, status
FROM dba_objects
WHERE object_name = 'UTL_FILE_WRAPPER'
  AND object_type IN ('PACKAGE', 'PACKAGE BODY')
ORDER BY owner;
-- Noter le OWNER o√π le wrapper est VALID


-- √âTAPE 2 : Cr√©er le SYNONYME PUBLIC
-- ‚ö†Ô∏è Remplacer [SCHEMA_WRAPPER] par le sch√©ma o√π le wrapper est d√©ploy√©
CREATE OR REPLACE PUBLIC SYNONYM UTL_FILE FOR [SCHEMA_WRAPPER].UTL_FILE_WRAPPER;


-- √âTAPE 3 : V√©rifier que le synonyme est cr√©√©
SELECT owner, synonym_name, table_owner, table_name
FROM dba_synonyms
WHERE synonym_name = 'UTL_FILE'
  AND owner = 'PUBLIC';
-- Doit afficher : PUBLIC | UTL_FILE | [SCHEMA_WRAPPER] | UTL_FILE_WRAPPER


-- √âTAPE 4 : Recompiler tous les sch√©mas impact√©s
BEGIN
    FOR rec IN (
        SELECT DISTINCT owner
        FROM dba_source
        WHERE UPPER(text) LIKE '%UTL_FILE%'
          AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
    ) LOOP
        DBMS_OUTPUT.PUT_LINE('Recompilation de: ' || rec.owner);
        DBMS_UTILITY.COMPILE_SCHEMA(schema => rec.owner, compile_all => FALSE);
    END LOOP;
END;
/


-- √âTAPE 5 : V√©rifier aucun objet invalide
SELECT owner, object_name, object_type
FROM dba_objects
WHERE status = 'INVALID'
  AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
ORDER BY owner, object_name;
-- Cette requ√™te doit retourner 0 ligne</code></pre>
        </div>
    </section>

    <!-- √âTAPE 4 : TESTS -->
    <section>
        <h2>‚úÖ √âtape 4 : Tests de Validation</h2>

        <h3>Test rapide (n'importe quel directory)</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Test rapide avec DIR_TEMP_RNA</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Test rapide √©criture/lecture/suppression
SET SERVEROUTPUT ON
DECLARE
    v_file UTL_FILE.FILE_TYPE;
    v_line VARCHAR2(1000);
    v_test VARCHAR2(100) := 'Test PARNA - ' || TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI:SS');
BEGIN
    DBMS_OUTPUT.PUT_LINE('Test depuis: ' || USER);

    -- √âcriture
    v_file := UTL_FILE.FOPEN('DIR_TEMP_RNA', 'test_' || USER || '.txt', 'W');
    UTL_FILE.PUT_LINE(v_file, v_test);
    UTL_FILE.FCLOSE(v_file);
    DBMS_OUTPUT.PUT_LINE('‚úÖ √âcriture OK');

    -- Lecture
    v_file := UTL_FILE.FOPEN('DIR_TEMP_RNA', 'test_' || USER || '.txt', 'R');
    UTL_FILE.GET_LINE(v_file, v_line);
    UTL_FILE.FCLOSE(v_file);

    IF v_line = v_test THEN
        DBMS_OUTPUT.PUT_LINE('‚úÖ Lecture OK - Contenu v√©rifi√©');
    ELSE
        DBMS_OUTPUT.PUT_LINE('‚ùå Contenu diff√©rent !');
    END IF;

    -- Suppression
    UTL_FILE.FREMOVE('DIR_TEMP_RNA', 'test_' || USER || '.txt');
    DBMS_OUTPUT.PUT_LINE('‚úÖ Suppression OK');

    DBMS_OUTPUT.PUT_LINE('üéâ MIGRATION R√âUSSIE !');
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('‚ùå Erreur: ' || SQLERRM);
END;
/</code></pre>
        </div>

        <h3>Test complet des 6 directories PARNA</h3>
        <div class="code-container">
            <div class="code-header">
                <span>SQL - Tester tous les directories PARNA</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- Test des 6 directories PARNA
SET SERVEROUTPUT ON
DECLARE
    v_file UTL_FILE.FILE_TYPE;
    TYPE t_dirs IS TABLE OF VARCHAR2(30);
    v_dirs t_dirs := t_dirs('DIR_ARCH_RNA', 'DIR_IN_RNA', 'DIR_LOG_RNA',
                            'DIR_OUT_RNA', 'DIR_TEMP_RNA', 'IN_APPLI_DIR');
    v_count NUMBER := 0;
BEGIN
    FOR i IN 1..v_dirs.COUNT LOOP
        BEGIN
            v_file := UTL_FILE.FOPEN(v_dirs(i), 'test_parna.txt', 'W');
            UTL_FILE.PUT_LINE(v_file, 'Test ' || v_dirs(i));
            UTL_FILE.FCLOSE(v_file);
            UTL_FILE.FREMOVE(v_dirs(i), 'test_parna.txt');
            v_count := v_count + 1;
            DBMS_OUTPUT.PUT_LINE('‚úÖ ' || v_dirs(i) || ' : OK');
        EXCEPTION
            WHEN OTHERS THEN
                DBMS_OUTPUT.PUT_LINE('‚ùå ' || v_dirs(i) || ' : ' || SQLERRM);
        END;
    END LOOP;

    DBMS_OUTPUT.PUT_LINE('');
    DBMS_OUTPUT.PUT_LINE('R√©sultat: ' || v_count || '/6 directories fonctionnels');

    IF v_count = 6 THEN
        DBMS_OUTPUT.PUT_LINE('üéâ TOUS LES DIRECTORIES PARNA SONT OK !');
    END IF;
END;
/</code></pre>
        </div>
    </section>

    <!-- √âTAPE 5 : ROLLBACK -->
    <section>
        <h2>üîÑ √âtape 5 : Proc√©dure de Rollback (si probl√®me)</h2>

        <div class="alert alert-danger">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>En cas de probl√®me :</strong> Ce script annule toute la migration et revient √† UTL_FILE natif.<br>
                √Ä ex√©cuter en tant que SYSDBA.
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>SQL - ROLLBACK COMPLET (SYSDBA)</span>
                <button class="copy-btn" onclick="copyCode(this)">üìã Copier</button>
            </div>
            <pre><code>-- =============================================================================
-- ROLLBACK COMPLET - MIGRATION UTL_FILE PARNA
-- =============================================================================
-- Ex√©cuter en tant que SYSDBA

SET SERVEROUTPUT ON

DECLARE
    v_count NUMBER;
    v_schema VARCHAR2(128) := '[SCHEMA_WRAPPER]';  -- ‚ö†Ô∏è ADAPTER
BEGIN
    DBMS_OUTPUT.PUT_LINE('======================================');
    DBMS_OUTPUT.PUT_LINE('ROLLBACK MIGRATION PARNA - D√âBUT');
    DBMS_OUTPUT.PUT_LINE('======================================');

    -- √âTAPE 1 : Supprimer le synonyme PUBLIC
    BEGIN
        EXECUTE IMMEDIATE 'DROP PUBLIC SYNONYM UTL_FILE';
        DBMS_OUTPUT.PUT_LINE('‚úÖ Synonyme PUBLIC supprim√©');
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('‚ÑπÔ∏è  Synonyme n''existait pas');
    END;

    -- √âTAPE 2 : Supprimer le package wrapper
    BEGIN
        EXECUTE IMMEDIATE 'DROP PACKAGE ' || v_schema || '.UTL_FILE_WRAPPER';
        DBMS_OUTPUT.PUT_LINE('‚úÖ Package UTL_FILE_WRAPPER supprim√©');
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('‚ÑπÔ∏è  Package n''existait pas');
    END;

    -- √âTAPE 3 : Supprimer la table de mapping
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE ' || v_schema || '.UTL_FILE_DIRECTORY_MAPPING CASCADE CONSTRAINTS';
        DBMS_OUTPUT.PUT_LINE('‚úÖ Table de mapping supprim√©e');
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('‚ÑπÔ∏è  Table n''existait pas');
    END;

    -- √âTAPE 4 : Recompiler tous les sch√©mas
    FOR rec IN (
        SELECT DISTINCT owner
        FROM dba_source
        WHERE UPPER(text) LIKE '%UTL_FILE%'
          AND owner NOT IN ('SYS', 'SYSTEM', 'ORACLE_OCM')
    ) LOOP
        DBMS_OUTPUT.PUT_LINE('Recompilation de: ' || rec.owner);
        DBMS_UTILITY.COMPILE_SCHEMA(schema => rec.owner, compile_all => FALSE);
    END LOOP;

    DBMS_OUTPUT.PUT_LINE('======================================');
    DBMS_OUTPUT.PUT_LINE('ROLLBACK TERMIN√â');
    DBMS_OUTPUT.PUT_LINE('Le code utilise UTL_FILE natif Oracle');
    DBMS_OUTPUT.PUT_LINE('======================================');
END;
/</code></pre>
        </div>
    </section>

    <!-- CHECKLIST FINALE -->
    <section>
        <h2>‚úÖ Checklist Compl√®te PARNA</h2>

        <div class="code-container">
            <div class="code-header">
                <span>Checklist - Cocher au fur et √† mesure</span>
            </div>
            <pre><code>=== PHASE 1 : DEMANDE OCI ===
‚òê 1. Email envoy√© √† l'√©quipe OCI
‚òê 2. Credentials OCI re√ßus (User OCID, Tenancy, Fingerprint, Cl√© API)
‚òê 3. Bucket "parna-exacc-files" cr√©√©
‚òê 4. Structure r√©pertoires cr√©√©e :
    ‚òê archive/
    ‚òê in/
    ‚òê logs/
    ‚òê out/
    ‚òê temp/

=== PHASE 2 : CONFIGURATION EXACC ===
‚òê 5. UTL_FILE_WRAPPER package d√©ploy√© (voir migration-utl-file-exacc.html)
‚òê 6. DBMS_CLOUD credential 'OCI_CREDENTIAL' cr√©√©
‚òê 7. Table UTL_FILE_DIRECTORY_MAPPING cr√©√©e
‚òê 8. 6 mappings PARNA ins√©r√©s :
    ‚òê DIR_ARCH_RNA
    ‚òê DIR_IN_RNA
    ‚òê DIR_LOG_RNA
    ‚òê DIR_OUT_RNA
    ‚òê DIR_TEMP_RNA
    ‚òê IN_APPLI_DIR
‚òê 9. Test connectivit√© DBMS_CLOUD ‚Üí OCI OK

=== PHASE 3 : MIGRATION ===
‚òê 10. Synonyme PUBLIC UTL_FILE cr√©√©
‚òê 11. Sch√©mas recompil√©s (0 objet invalide)
‚òê 12. Test rapide DIR_TEMP_RNA OK
‚òê 13. Test complet 6 directories OK

=== PHASE 4 : VALIDATION PACKAGES ===
‚òê 14. PKG_TEC_FICHIERS (61 lignes) test√© ‚úì
‚òê 15. PKG_DTC (21 lignes) test√© ‚úì
‚òê 16. PKG_LOG (14 lignes) test√© ‚úì
‚òê 17. PKG_RNADEXTBAATCP01 (3 lignes) test√© ‚úì
‚òê 18. PKG_RNADEXTBAATGS01 (2 lignes) test√© ‚úì
‚òê 19. PKG_RNADEXTAUTO01 (2 lignes) test√© ‚úì
‚òê 20. PC_TA_RN_BDDF_* (7 packages) test√©s ‚úì

=== PHASE 5 : PRODUCTION ===
‚òê 21. Tests de non-r√©gression OK
‚òê 22. Validation √©quipe m√©tier
‚òê 23. Documentation mise √† jour
‚òê 24. Plan de rollback pr√©par√©
‚òê 25. Mise en production valid√©e

=== R√âSUM√â ===
Directories migr√©s : 6/6
Packages migr√©s : 11/11
Lignes UTL_FILE : 111/111
Taux de r√©ussite : 100% ‚úÖ</code></pre>
        </div>
    </section>

    <!-- LIEN VERS LE GUIDE -->
    <section style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border: 2px solid #2196f3;">
        <h2>üìö Ressources Compl√©mentaires</h2>

        <p style="margin: 15px 0;">
            <strong>Pour cr√©er le package UTL_FILE_WRAPPER :</strong><br>
            Consultez le fichier <a href="migration-utl-file-exacc.html" style="color: #1565c0; font-weight: bold;">migration-utl-file-exacc.html</a> qui contient le code complet du wrapper.
        </p>

        <p style="margin: 15px 0;">
            <strong>Pour l'audit g√©n√©rique (autres applications) :</strong><br>
            Consultez l'<a href="#guide" onclick="showTab('guide', document.querySelector('a[href=\'#guide\']'))" style="color: #1565c0; font-weight: bold;">onglet Guide Migration</a>.
        </p>

        <p style="margin: 15px 0;">
            <strong>Fichiers t√©l√©chargeables :</strong><br>
            - <a href="EMAIL_DEMANDE_OCI.txt" style="color: #1565c0;">EMAIL_DEMANDE_OCI.txt</a><br>
            - <a href="SCRIPT_MAPPING_DIRECTORIES.sql" style="color: #1565c0;">SCRIPT_MAPPING_DIRECTORIES.sql</a><br>
            - <a href="SYNTHESE_AUDIT_REMEDIATION.md" style="color: #1565c0;">SYNTHESE_AUDIT_REMEDIATION.md</a>
        </p>
    </section>

</div>
<!-- ==================== FIN ONGLET REMEDIATION ==================== -->

<!-- ==================== ONGLET CAPTURES ==================== -->
<div id="captures" class="tab-content">

    <section style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border: 2px solid #4caf50; margin-top: 20px;">
        <h2>üì∑ Captures d'ecran - Coller avec Ctrl+V</h2>
        <p style="margin: 15px 0;">Faites une capture d'ecran (Win+Shift+S) puis collez-la ici avec <strong>Ctrl+V</strong>. Elle sera sauvegardee automatiquement.</p>
    </section>

    <div id="storage-status" class="storage-info status-connected">
        Pret a recevoir vos captures
    </div>

    <div class="captures-container">
        <!-- Liste des captures -->
        <div class="captures-list">
            <h3>üìÇ Mes Captures</h3>
            <div id="captures-list-container">
                <p style="color: #999; font-size: 0.85rem; text-align: center; padding: 20px;">Aucune capture. Collez une image avec Ctrl+V.</p>
            </div>
        </div>

        <!-- Zone de collage -->
        <div class="captures-paste-zone">
            <div class="paste-header">
                <h3>üìã Zone de collage</h3>
            </div>
            <div class="paste-zone" id="paste-zone" tabindex="0">
                <div id="paste-placeholder">
                    <div class="paste-icon">üìã</div>
                    <div class="paste-text">Cliquez ici puis collez votre capture</div>
                    <div class="paste-hint">Faites Win+Shift+S pour capturer, puis</div>
                    <div class="paste-shortcut">Ctrl + V</div>
                </div>
                <div id="paste-preview-container" style="display: none; text-align: center;">
                    <img id="paste-preview" class="paste-preview" src="" alt="Preview">
                    <div class="paste-actions">
                        <button class="paste-action-btn save" onclick="saveCapture()">üíæ Sauvegarder</button>
                        <button class="paste-action-btn clear" onclick="clearPaste()">üóëÔ∏è Effacer</button>
                    </div>
                    <div id="upload-status" class="upload-status"></div>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- ==================== FIN ONGLET CAPTURES ==================== -->

</div>

<footer>
    <p><strong>Guide DBA - Migration UTL_FILE vers ExaCC</strong></p>
    <p>Document simplifi√© pour le p√©rim√®tre DBA uniquement</p>
</footer>

<script>
// Fonction pour switcher entre les onglets
function showTab(tabId, clickedLink) {
    // Cacher tous les contenus d'onglets
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });

    // D√©sactiver tous les liens de navigation
    document.querySelectorAll('.tabs-nav a').forEach(link => {
        link.classList.remove('active');
    });

    // Afficher l'onglet s√©lectionn√©
    document.getElementById(tabId).classList.add('active');

    // Activer le lien cliqu√©
    clickedLink.classList.add('active');
}

function copyCode(button) {
    const codeContainer = button.closest('.code-container');
    const code = codeContainer.querySelector('pre code').innerText;

    navigator.clipboard.writeText(code).then(() => {
        const originalText = button.innerHTML;
        button.innerHTML = '‚úÖ Copi√©!';
        button.classList.add('copied');
        setTimeout(() => {
            button.innerHTML = originalText;
            button.classList.remove('copied');
        }, 2000);
    });
}

function saveConfig() {
    const config = {
        bucket_uri: document.getElementById('bucket_uri').value,
        credential_name: document.getElementById('credential_name').value,
        acl_confirmed: document.getElementById('acl_confirmed').checked,
        folders_list: document.getElementById('folders_list').value
    };
    localStorage.setItem('exacc_migration_config', JSON.stringify(config));

    // Mettre √† jour les scripts SQL automatiquement
    updateSQLScripts(config);

    alert('‚úÖ Configuration sauvegard√©e et scripts SQL mis √† jour !');
}

function updateSQLScripts(config) {
    const bucketUri = config.bucket_uri || '[URI_BUCKET]';
    const credentialName = config.credential_name || '[CREDENTIAL]';
    const foldersList = config.folders_list || '';

    // Mettre √† jour les placeholders URI
    document.querySelectorAll('.placeholder-uri').forEach(el => {
        el.textContent = bucketUri;
        if (bucketUri !== '[URI_BUCKET]') {
            el.style.background = '#c8e6c9';
            el.style.padding = '2px 4px';
            el.style.borderRadius = '3px';
        }
    });

    // Mettre √† jour les placeholders CREDENTIAL
    document.querySelectorAll('.placeholder-cred').forEach(el => {
        el.textContent = credentialName;
        if (credentialName !== '[CREDENTIAL]') {
            el.style.background = '#c8e6c9';
            el.style.padding = '2px 4px';
            el.style.borderRadius = '3px';
        }
    });

    // G√©n√©rer les INSERT pour chaque dossier
    if (foldersList.trim()) {
        const folders = foldersList.split('\n')
            .map(f => f.trim().replace(/\/$/, ''))  // Enlever les / √† la fin
            .filter(f => f.length > 0);

        if (folders.length > 0) {
            let insertStatements = '    -- G√©n√©r√© automatiquement depuis ta liste de dossiers\n';
            folders.forEach((folder, index) => {
                insertStatements += `    INSERT INTO utl_file_directory_mapping (oracle_directory, object_storage_uri, credential_name)\n`;
                insertStatements += `    VALUES ('${folder.toUpperCase()}', v_base_uri || '${folder.toUpperCase()}/', v_credential);\n`;
                if (index < folders.length - 1) {
                    insertStatements += '\n';
                }
            });

            const insertLinesEl = document.getElementById('sql-insert-lines');
            if (insertLinesEl) {
                insertLinesEl.innerHTML = insertStatements;
            }
        }
    }

    // Afficher les badges "Mis √† jour auto"
    document.querySelectorAll('.auto-update-badge').forEach(badge => {
        if (bucketUri !== '[URI_BUCKET]' || credentialName !== '[CREDENTIAL]') {
            badge.style.display = 'inline';
        }
    });
}

// Configuration Firebase globale
const firebaseConfig = {
    apiKey: "AIzaSyAq621LTxfNlKgHiVGTHXBMyf5N69U4boI",
    authDomain: "oracle-exacc-scripts.firebaseapp.com",
    databaseURL: "https://oracle-exacc-scripts-default-rtdb.firebaseio.com",
    projectId: "oracle-exacc-scripts",
    storageBucket: "oracle-exacc-scripts.firebasestorage.app",
    messagingSenderId: "757268566812",
    appId: "1:757268566812:web:791e2adb5bd78726f660d9"
};

// Initialiser Firebase au demarrage
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const auth = firebase.auth();

// Charger la config au demarrage
window.onload = function() {
    // Verifier l'authentification Firebase
    auth.onAuthStateChanged(function(user) {
        if (!user) {
            // Utilisateur non connecte, rediriger vers login
            window.location.href = 'login.html';
            return;
        }

        // Utilisateur connecte, charger la config
        const saved = localStorage.getItem('exacc_migration_config');
        if (saved) {
            const config = JSON.parse(saved);
            document.getElementById('bucket_uri').value = config.bucket_uri || '';
            document.getElementById('credential_name').value = config.credential_name || '';
            document.getElementById('acl_confirmed').checked = config.acl_confirmed || false;
            document.getElementById('folders_list').value = config.folders_list || '';

            // Appliquer les valeurs aux scripts SQL au chargement
            updateSQLScripts(config);
        }

        // Initialiser Firebase Database
        initFirebase();
    });
};

// Fonction de deconnexion
function logout() {
    auth.signOut().then(function() {
        window.location.href = 'login.html';
    }).catch(function(error) {
        console.error('Erreur deconnexion:', error);
        window.location.href = 'login.html';
    });
}

// ===== FIREBASE SCRIPTS MANAGEMENT =====
let currentScriptId = null;
let scriptsData = {};

function initFirebase() {
    const statusEl = document.getElementById('firebase-status');

    try {
        // Firebase deja initialise au chargement de la page
        // Reference a la base de donnees
        const db = firebase.database();
        const scriptsRef = db.ref('scripts');

        // √âcouter les changements en temps r√©el
        scriptsRef.on('value', (snapshot) => {
            scriptsData = snapshot.val() || {};
            renderScriptsList();
            statusEl.className = 'firebase-status status-connected';
            statusEl.innerHTML = '‚úÖ Connect√© √† Firebase - Synchronisation temps r√©el';
        }, (error) => {
            console.error('Firebase error:', error);
            statusEl.className = 'firebase-status status-disconnected';
            statusEl.innerHTML = '‚ùå Erreur de connexion Firebase';
        });

    } catch (error) {
        console.error('Firebase init error:', error);
        statusEl.className = 'firebase-status status-disconnected';
        statusEl.innerHTML = '‚ùå Erreur d\'initialisation Firebase';
    }
}

function renderScriptsList() {
    const container = document.getElementById('scripts-list-container');
    container.innerHTML = '';

    const scriptIds = Object.keys(scriptsData);

    if (scriptIds.length === 0) {
        container.innerHTML = '<p style="color: #999; font-size: 0.85rem; text-align: center; padding: 20px;">Aucun script. Cliquez sur "Nouveau Script" pour commencer.</p>';
        return;
    }

    // Trier par date de modification (plus r√©cent en premier)
    scriptIds.sort((a, b) => {
        const dateA = scriptsData[a].updatedAt || 0;
        const dateB = scriptsData[b].updatedAt || 0;
        return dateB - dateA;
    });

    scriptIds.forEach(id => {
        const script = scriptsData[id];
        const div = document.createElement('div');
        div.className = 'script-item' + (id === currentScriptId ? ' active' : '');
        div.onclick = () => loadScript(id);
        div.innerHTML = `
            <div class="script-title">${script.title || 'Sans titre'}</div>
            <div class="script-desc">${script.description || 'Pas de description'}</div>
        `;
        container.appendChild(div);
    });
}

function loadScript(scriptId) {
    currentScriptId = scriptId;
    const script = scriptsData[scriptId];

    if (script) {
        document.getElementById('script-title').value = script.title || '';
        document.getElementById('script-description').value = script.description || '';
        document.getElementById('script-content').value = script.content || '';
    }

    // Mettre √† jour l'UI
    renderScriptsList();
}

function createNewScript() {
    currentScriptId = null;
    document.getElementById('script-title').value = '';
    document.getElementById('script-description').value = '';
    document.getElementById('script-content').value = '';
    document.getElementById('script-title').focus();
    renderScriptsList();
}

function saveScript() {
    const title = document.getElementById('script-title').value.trim();
    const description = document.getElementById('script-description').value.trim();
    const content = document.getElementById('script-content').value;

    if (!title) {
        alert('‚ö†Ô∏è Veuillez entrer un titre pour le script');
        return;
    }

    const db = firebase.database();
    const timestamp = Date.now();

    const scriptData = {
        title: title,
        description: description,
        content: content,
        updatedAt: timestamp
    };

    if (currentScriptId) {
        // Mise √† jour
        db.ref('scripts/' + currentScriptId).update(scriptData)
            .then(() => {
                showSaveSuccess();
            })
            .catch(error => {
                alert('‚ùå Erreur lors de la sauvegarde: ' + error.message);
            });
    } else {
        // Nouveau script
        scriptData.createdAt = timestamp;
        const newRef = db.ref('scripts').push();
        currentScriptId = newRef.key;
        newRef.set(scriptData)
            .then(() => {
                showSaveSuccess();
            })
            .catch(error => {
                alert('‚ùå Erreur lors de la cr√©ation: ' + error.message);
            });
    }
}

function showSaveSuccess() {
    const btn = document.querySelector('.btn-save');
    const originalText = btn.innerHTML;
    btn.innerHTML = '‚úÖ Sauvegard√©!';
    btn.style.background = '#4caf50';
    setTimeout(() => {
        btn.innerHTML = originalText;
        btn.style.background = '';
    }, 2000);
}

function deleteScript() {
    if (!currentScriptId) {
        alert('‚ö†Ô∏è Aucun script s√©lectionn√©');
        return;
    }

    const script = scriptsData[currentScriptId];
    if (!confirm(`Supprimer le script "${script.title}" ?`)) {
        return;
    }

    const db = firebase.database();
    db.ref('scripts/' + currentScriptId).remove()
        .then(() => {
            currentScriptId = null;
            document.getElementById('script-title').value = '';
            document.getElementById('script-description').value = '';
            document.getElementById('script-content').value = '';
        })
        .catch(error => {
            alert('‚ùå Erreur lors de la suppression: ' + error.message);
        });
}

function copyScriptContent() {
    const content = document.getElementById('script-content').value;
    navigator.clipboard.writeText(content).then(() => {
        const btn = document.querySelector('.btn-copy');
        const originalText = btn.innerHTML;
        btn.innerHTML = '‚úÖ Copi√©!';
        setTimeout(() => {
            btn.innerHTML = originalText;
        }, 2000);
    });
}

// ===== CAPTURES - PASTE FROM CLIPBOARD + FIREBASE STORAGE =====
let currentPastedImage = null;
let capturesData = {};

// Initialiser Firebase Storage et charger les captures
function initCapturesStorage() {
    const storage = firebase.storage();
    const db = firebase.database();
    const capturesRef = db.ref('captures');

    // Ecouter les changements en temps reel
    capturesRef.on('value', (snapshot) => {
        capturesData = snapshot.val() || {};
        renderCapturesList();
    }, (error) => {
        console.error('Erreur chargement captures:', error);
    });
}

// Afficher la liste des captures
function renderCapturesList() {
    const container = document.getElementById('captures-list-container');
    if (!container) return;

    const captureIds = Object.keys(capturesData);

    if (captureIds.length === 0) {
        container.innerHTML = '<p style="color: #999; font-size: 0.85rem; text-align: center; padding: 20px;">Aucune capture. Collez une image avec Ctrl+V.</p>';
        return;
    }

    // Trier par date (plus recent en premier)
    captureIds.sort((a, b) => {
        const dateA = capturesData[a].createdAt || 0;
        const dateB = capturesData[b].createdAt || 0;
        return dateB - dateA;
    });

    let html = '';
    captureIds.forEach(id => {
        const capture = capturesData[id];
        const date = new Date(capture.createdAt);
        const dateStr = date.toLocaleDateString('fr-FR') + ' ' + date.toLocaleTimeString('fr-FR', {hour: '2-digit', minute: '2-digit'});

        html += `
            <div class="capture-item" onclick="viewCapture('${id}')">
                <img src="${capture.url}" alt="${capture.name}" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%2280%22><rect fill=%22%23eee%22 width=%22100%22 height=%2280%22/><text x=%2250%25%22 y=%2250%25%22 fill=%22%23999%22 text-anchor=%22middle%22>Image</text></svg>'">
                <div class="capture-name">${capture.name || 'Sans nom'}</div>
                <div class="capture-date">${dateStr}</div>
                <div class="capture-actions">
                    <button class="capture-btn capture-btn-view" onclick="event.stopPropagation(); window.open('${capture.url}', '_blank')">Ouvrir</button>
                    <button class="capture-btn capture-btn-delete" onclick="event.stopPropagation(); deleteCapture('${id}')">Supprimer</button>
                </div>
            </div>
        `;
    });

    container.innerHTML = html;
}

// Ecouter le paste (Ctrl+V)
function setupPasteListener() {
    const pasteZone = document.getElementById('paste-zone');
    if (!pasteZone) return;

    // Ecouter le paste sur la zone
    pasteZone.addEventListener('paste', handlePaste);

    // Ecouter aussi sur tout le document quand l'onglet captures est actif
    document.addEventListener('paste', (e) => {
        const capturesTab = document.getElementById('captures');
        if (capturesTab && capturesTab.classList.contains('active')) {
            handlePaste(e);
        }
    });

    // Focus automatique sur la zone quand on clique
    pasteZone.addEventListener('click', () => {
        pasteZone.focus();
    });
}

// Gerer le paste
function handlePaste(e) {
    const items = e.clipboardData?.items;
    if (!items) return;

    for (let i = 0; i < items.length; i++) {
        if (items[i].type.indexOf('image') !== -1) {
            e.preventDefault();
            const blob = items[i].getAsFile();
            displayPastedImage(blob);
            break;
        }
    }
}

// Afficher l'image collee (QUALITE ORIGINALE PRESERVEE - aucun redimensionnement)
function displayPastedImage(blob) {
    currentPastedImage = blob;

    const reader = new FileReader();
    reader.onload = (e) => {
        const preview = document.getElementById('paste-preview');
        const previewContainer = document.getElementById('paste-preview-container');
        const placeholder = document.getElementById('paste-placeholder');
        const pasteZone = document.getElementById('paste-zone');

        preview.src = e.target.result;
        previewContainer.style.display = 'block';
        placeholder.style.display = 'none';
        pasteZone.classList.add('has-image');

        // Afficher les infos de l'image originale
        const statusEl = document.getElementById('upload-status');
        const sizeKB = (blob.size / 1024).toFixed(1);
        const img = new Image();
        img.onload = () => {
            statusEl.className = 'upload-status info';
            statusEl.textContent = `Qualite originale: ${img.width} x ${img.height} px (${sizeKB} KB)`;
        };
        img.src = e.target.result;
    };
    reader.readAsDataURL(blob);
}

// Effacer l'image collee
function clearPaste() {
    currentPastedImage = null;

    const preview = document.getElementById('paste-preview');
    const previewContainer = document.getElementById('paste-preview-container');
    const placeholder = document.getElementById('paste-placeholder');
    const pasteZone = document.getElementById('paste-zone');
    const statusEl = document.getElementById('upload-status');

    preview.src = '';
    previewContainer.style.display = 'none';
    placeholder.style.display = 'block';
    pasteZone.classList.remove('has-image');
    statusEl.className = 'upload-status';
    statusEl.textContent = '';
}

// Sauvegarder la capture dans Firebase Storage
function saveCapture() {
    if (!currentPastedImage) {
        alert('Aucune image a sauvegarder. Collez une capture avec Ctrl+V.');
        return;
    }

    const statusEl = document.getElementById('upload-status');
    statusEl.className = 'upload-status loading';
    statusEl.textContent = 'Sauvegarde en cours...';

    const storage = firebase.storage();
    const db = firebase.database();

    // Generer un nom unique
    const timestamp = Date.now();
    const fileName = `capture_${timestamp}.png`;
    const storageRef = storage.ref('captures/' + fileName);

    // Upload
    storageRef.put(currentPastedImage)
        .then(snapshot => snapshot.ref.getDownloadURL())
        .then(url => {
            // Sauvegarder les metadonnees dans Realtime Database
            const captureData = {
                name: fileName,
                url: url,
                createdAt: timestamp,
                size: currentPastedImage.size
            };

            return db.ref('captures').push(captureData);
        })
        .then(() => {
            statusEl.className = 'upload-status success';
            statusEl.textContent = 'Capture sauvegardee avec succes !';

            // Effacer apres 2 secondes
            setTimeout(() => {
                clearPaste();
            }, 2000);
        })
        .catch(error => {
            console.error('Erreur upload:', error);
            statusEl.className = 'upload-status error';
            statusEl.textContent = 'Erreur: ' + error.message;
        });
}

// Voir une capture en grand
function viewCapture(captureId) {
    const capture = capturesData[captureId];
    if (capture && capture.url) {
        window.open(capture.url, '_blank');
    }
}

// Supprimer une capture
function deleteCapture(captureId) {
    const capture = capturesData[captureId];
    if (!capture) return;

    if (!confirm('Supprimer cette capture ?')) return;

    const storage = firebase.storage();
    const db = firebase.database();

    // Supprimer de Storage
    const storageRef = storage.ref('captures/' + capture.name);
    storageRef.delete()
        .then(() => {
            // Supprimer de Database
            return db.ref('captures/' + captureId).remove();
        })
        .then(() => {
            console.log('Capture supprimee');
        })
        .catch(error => {
            console.error('Erreur suppression:', error);
            // Supprimer quand meme de la database si le fichier n'existe plus
            db.ref('captures/' + captureId).remove();
        });
}

// Initialiser au chargement
const originalOnload = window.onload;
window.onload = function() {
    if (originalOnload) originalOnload();

    // Attendre que Firebase soit pret
    setTimeout(() => {
        initCapturesStorage();
        setupPasteListener();
    }, 500);
};
</script>

</body>
</html>
